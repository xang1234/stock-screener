# =============================================================================
# Stock Scanner Backend Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your API keys.
# For Docker deployment, see .env.docker.example in the project root.
# =============================================================================

# -----------------------------------------------------------------------------
# LLM API KEYS (at least one required for chatbot)
# -----------------------------------------------------------------------------

# Groq - Fast inference, free tier available (recommended)
# Get key at: https://console.groq.com
GROQ_API_KEY=
# Multiple Groq keys for load balancing (comma-separated, optional)
GROQ_API_KEYS=

# Google Gemini - For theme extraction
# Get key at: https://aistudio.google.com/apikey
GEMINI_API_KEY=
# Alternative name (either works)
GOOGLE_API_KEY=

# DeepSeek - Cost-effective fallback
# Get key at: https://platform.deepseek.com
DEEPSEEK_API_KEY=

# Together AI - Wide model selection
# Get key at: https://api.together.xyz
TOGETHER_API_KEY=

# OpenRouter - 100+ models, unified billing
# Get key at: https://openrouter.ai/keys
OPENROUTER_API_KEY=

# -----------------------------------------------------------------------------
# WEB SEARCH API KEYS (optional, enables research mode)
# -----------------------------------------------------------------------------

# Tavily - Primary web search for chatbot research mode
# Get key at: https://tavily.com
TAVILY_API_KEY=

# Serper - Fallback web search
# Get key at: https://serper.dev
SERPER_API_KEY=

# -----------------------------------------------------------------------------
# DATA SOURCE API KEYS
# -----------------------------------------------------------------------------

# Alpha Vantage - Fundamental data (free tier: 25 requests/day)
# Get key at: https://www.alphavantage.co/support/#api-key
ALPHA_VANTAGE_API_KEY=

# -----------------------------------------------------------------------------
# LLM ROUTING CONFIGURATION
# -----------------------------------------------------------------------------

# Primary LLM provider: groq, deepseek, together_ai, openrouter, gemini
LLM_DEFAULT_PROVIDER=groq

# Model for chatbot (LiteLLM format: provider/model)
LLM_CHATBOT_MODEL=groq/qwen-qwen3-32b

# Model for research agents
LLM_RESEARCH_MODEL=groq/qwen-qwen3-32b

# Enable automatic fallback to other providers on failure
LLM_FALLBACK_ENABLED=true

# Fallback model chain (comma-separated, tried in order)
LLM_FALLBACK_MODELS=groq/llama-3.3-70b-versatile,deepseek/deepseek-chat,together_ai/meta-llama/Llama-3-70b-chat-hf

# -----------------------------------------------------------------------------
# DATABASE
# -----------------------------------------------------------------------------

# SQLite database path (use absolute path to avoid issues)
# For local dev, relative path works:
DATABASE_URL=sqlite:///./data/stockscanner.db

# For explicit absolute path (recommended):
# DATABASE_URL=sqlite:////Users/yourname/StockScreenClaude/data/stockscanner.db

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------

API_HOST=0.0.0.0
API_PORT=8000

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# Admin API key for config endpoints (/api/v1/config/*)
ADMIN_API_KEY=

# -----------------------------------------------------------------------------
# REDIS / CELERY
# -----------------------------------------------------------------------------

REDIS_HOST=localhost
REDIS_PORT=6379
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/1

# Celery Beat timezone for scheduled tasks (IANA format)
# All schedule hours (cache_warm_hour, etc.) are written in this timezone
CELERY_TIMEZONE=America/New_York

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------

YFINANCE_RATE_LIMIT=1
ALPHAVANTAGE_RATE_LIMIT=25

# -----------------------------------------------------------------------------
# SCANNING CONFIGURATION
# -----------------------------------------------------------------------------

DEFAULT_UNIVERSE=all
SCAN_BATCH_SIZE=20
CACHE_TTL_HOURS=24

# -----------------------------------------------------------------------------
# DATA FETCH LOCK
# -----------------------------------------------------------------------------

# Max time to wait for serialized data fetch lock (seconds)
DATA_FETCH_LOCK_WAIT_SECONDS=7200

# -----------------------------------------------------------------------------
# DEEP RESEARCH
# -----------------------------------------------------------------------------

# Max bytes to download for read_url tool (prevents large responses)
RESEARCH_READ_URL_MAX_BYTES=5000000

# -----------------------------------------------------------------------------
# OPTIONAL: Social/News APIs
# -----------------------------------------------------------------------------

# Twitter/X API (optional)
TWITTER_BEARER_TOKEN=

# Benzinga API (optional)
BENZINGA_API_KEY=

# -----------------------------------------------------------------------------
# OPTIONAL: SEC EDGAR
# -----------------------------------------------------------------------------

# User agent for SEC EDGAR API (required format: AppName/Version (email))
SEC_USER_AGENT=StockScanner/1.0 (contact@example.com)
