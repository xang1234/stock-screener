# =============================================================================
# Docker Deployment Environment Configuration
# =============================================================================
# Copy this file to .env.docker and configure for your deployment scenario.
#
# Usage:
#   Local dev:  docker-compose up (no .env.docker needed)
#   Homelab:    docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d
#   VPS+HTTPS:  docker-compose -f docker-compose.yml -f docker-compose.prod.yml -f docker-compose.https.yml up -d
#
# =============================================================================

# -----------------------------------------------------------------------------
# DEPLOYMENT CONFIGURATION
# -----------------------------------------------------------------------------

# Domain name for HTTPS deployment (VPS scenario only)
# Used by Caddy to obtain Let's Encrypt certificate
# Example: stocks.yourdomain.com
DOMAIN=

# CORS allowed origins (comma-separated)
# For local dev: http://localhost,http://localhost:80
# For homelab: https://stocks.home.lan
# For VPS: https://stocks.yourdomain.com
CORS_ORIGINS=http://localhost,http://localhost:80

# -----------------------------------------------------------------------------
# LLM API KEYS (at least one required for chatbot)
# -----------------------------------------------------------------------------

# Groq - Fast inference, free tier available (recommended for start)
# Get key at: https://console.groq.com
GROQ_API_KEY=
# Multiple Groq keys for load balancing (comma-separated, optional)
GROQ_API_KEYS=

# Google Gemini - For theme extraction
# Get key at: https://aistudio.google.com/apikey
GEMINI_API_KEY=
# Alternative name (either works)
GOOGLE_API_KEY=

# DeepSeek - Cost-effective fallback
# Get key at: https://platform.deepseek.com
DEEPSEEK_API_KEY=

# Together AI - Wide model selection
# Get key at: https://api.together.xyz
TOGETHER_API_KEY=

# OpenRouter - 100+ models, unified billing
# Get key at: https://openrouter.ai/keys
OPENROUTER_API_KEY=

# -----------------------------------------------------------------------------
# WEB SEARCH API KEYS (optional, enables research mode)
# -----------------------------------------------------------------------------

# Tavily - Primary web search for chatbot research mode
# Get key at: https://tavily.com
TAVILY_API_KEY=

# Serper - Fallback web search
# Get key at: https://serper.dev
SERPER_API_KEY=

# -----------------------------------------------------------------------------
# DATA SOURCE API KEYS
# -----------------------------------------------------------------------------

# Alpha Vantage - Fundamental data (free tier: 25 requests/day)
# Get key at: https://www.alphavantage.co/support/#api-key
ALPHA_VANTAGE_API_KEY=

# -----------------------------------------------------------------------------
# LLM ROUTING CONFIGURATION (optional, sensible defaults provided)
# -----------------------------------------------------------------------------

# Primary LLM provider: groq, deepseek, together_ai, openrouter, gemini
LLM_DEFAULT_PROVIDER=groq

# Model for chatbot (LiteLLM format: provider/model)
LLM_CHATBOT_MODEL=groq/qwen-qwen3-32b

# Model for research agents
LLM_RESEARCH_MODEL=groq/qwen-qwen3-32b

# Enable automatic fallback to other providers on failure
LLM_FALLBACK_ENABLED=true

# Fallback model chain (comma-separated, tried in order)
LLM_FALLBACK_MODELS=groq/llama-3.3-70b-versatile,deepseek/deepseek-chat,together_ai/meta-llama/Llama-3-70b-chat-hf

# -----------------------------------------------------------------------------
# INTERNAL CONFIGURATION (usually no changes needed)
# -----------------------------------------------------------------------------

# Database (mounted volume, don't change)
DATABASE_URL=sqlite:////app/data/stockscanner.db

# Redis connection (internal Docker network)
REDIS_HOST=redis
REDIS_PORT=6379

# Celery configuration (internal Docker network)
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1

# Server binding (internal, nginx handles external)
API_HOST=0.0.0.0
API_PORT=8000

# Admin API key for config endpoints (/api/v1/config/*)
ADMIN_API_KEY=

# -----------------------------------------------------------------------------
# OPTIONAL: Social/News API Keys
# -----------------------------------------------------------------------------

# Twitter/X API (optional, for social sentiment)
TWITTER_BEARER_TOKEN=

# Benzinga API (optional, for news)
BENZINGA_API_KEY=

# -----------------------------------------------------------------------------
# OPTIONAL: Advanced Configuration
# -----------------------------------------------------------------------------

# SEC EDGAR user agent (required for SEC filings)
# Format: AppName/Version (contact@email.com)
SEC_USER_AGENT=StockScanner/1.0 (contact@example.com)

# Cache TTL settings (seconds)
PRICE_CACHE_TTL=604800
FUNDAMENTAL_CACHE_TTL=604800
QUARTERLY_CACHE_TTL=2592000

# Scanning parallelism
SCAN_PARALLEL_WORKERS=4
SCAN_PARALLEL_BATCH_SIZE=50

# Data fetch lock (seconds to wait before failing)
DATA_FETCH_LOCK_WAIT_SECONDS=7200

# Deep research safety limits
RESEARCH_READ_URL_MAX_BYTES=5000000

# Optional one-time cleanup for legacy scan universes
INVALID_UNIVERSE_CLEANUP_ENABLED=false
