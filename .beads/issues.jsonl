{"id":"StockScreenClaude-08c","title":"T2: Use case tests with fake repositories (no DB/network)","description":"## What\nWrite unit tests for use cases using fake (in-memory) repositories and providers. These tests validate workflow logic without any infrastructure dependencies.\n\n## Files to Create\n- backend/tests/unit/use_cases/conftest.py — Shared fake implementations:\n  - FakeScanRepository (in-memory dict)\n  - FakeScanResultRepository (in-memory list)\n  - FakeUniverseRepository (returns configured symbol lists)\n  - FakeStockDataProvider (returns deterministic StockData)\n  - FakeProgressSink (collects events in a list)\n  - FakeCancellationToken (configurable)\n\n- backend/tests/unit/use_cases/test_create_scan.py\n  - Happy path: creates scan with expected fields\n  - Idempotency: same key returns existing scan\n  - Universe resolution called correctly\n\n- backend/tests/unit/use_cases/test_run_bulk_scan.py\n  - Happy path: processes all symbols, writes results\n  - Cancellation: stops between chunks, status updated\n  - Checkpointing: resume skips already-processed symbols\n  - Error handling: failed symbols don't crash the run\n\n- backend/tests/unit/use_cases/test_get_scan_results.py\n  - Pagination: correct page size and total count\n  - Filtering: FilterSpec applied correctly\n  - Sorting: SortSpec applied correctly\n\n## Why Fake Repos\nFake repos (not mocks) test actual behavior. A FakeScanRepository stores data in a dict and returns it — so we verify the use case calls the right methods with the right data, not just that it 'called save once'.\n\n## Acceptance Criteria\n- All use case happy paths tested\n- Error and edge cases covered\n- Tests run in \u003c2 seconds total (no IO)\n- No mocking of domain logic — only infrastructure ports are faked\n\n## Depends On\n- C1 (RunBulkScanUseCase must exist)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:05:47.289944+08:00","created_by":"David Ten","updated_at":"2026-02-17T15:59:06.246239+08:00","closed_at":"2026-02-17T15:59:06.246239+08:00","close_reason":"All 3 use case test files consolidated under tests/unit/use_cases/ with shared conftest.py fakes. 37 tests pass. Backward-compat re-exports in scanning_fakes.py.","dependencies":[{"issue_id":"StockScreenClaude-08c","depends_on_id":"StockScreenClaude-5pd","type":"blocks","created_at":"2026-02-17T00:08:12.07183+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-0ch","title":"F1: Create BuildDailyFeatureSnapshotUseCase","description":"## What\nImplement the core offline pipeline use case that builds a complete feature snapshot for a trading day.\n\n## Files to Create\n- backend/app/use_cases/feature_store/build_daily_snapshot.py\n\n## Algorithm (from v3 plan Phase F)\n1. Determine as_of_date trading day (domain time policy — skip weekends/holidays)\n2. FeatureRunRepository.start_run(...) with correlation_id\n3. Resolve universe of active symbols via UniverseRepository (likely 'ALL' or configured set)\n4. Persist resolved universe: FeatureStoreRepository.save_run_universe_symbols(run_id, symbols)\n5. Merge data requirements from all configured screeners\n6. Call StockDataProvider.prepare_bulk(symbols, requirements, as_of_date, allow_partial=True)\n7. For each symbol with data:\n   - Run orchestrator (domain, pure) with pre-fetched data\n   - Collect ScanResultItemDomain\n8. FeatureStoreRepository.upsert_snapshot_rows(run_id, rows)\n9. Run DQ checks (domain/feature_store/quality.py):\n   - Row count vs expected universe size\n   - Null rate on composite_score\n   - Score distribution sanity\n10. If DQ fails → mark_quarantined(run_id, dq_report) — keep data for inspection\n11. If DQ passes → publish_atomically(run_id) — atomic pointer update\n12. Emit completion ProgressEvent with stats\n\n## Error Handling\n- allow_partial=True means partial upstream failures don't crash the whole run\n- Failed symbols logged in warnings_json\n- Run is still publishable if DQ passes despite partial failures (configurable threshold)\n\n## Acceptance Criteria\n- Can build and publish a snapshot for a given date\n- Quarantines on DQ failure (doesn't publish bad data)\n- Handles partial upstream failures gracefully\n- Idempotent: re-running for same date creates a new run (doesn't corrupt existing)\n- Unit-testable with fake repos and fake StockDataProvider\n\n## Depends On\n- E3 (Feature Store repositories)\n- B3 (port-based orchestrator)\n- C1 (pattern for use case structure)","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:04:08.218565+08:00","created_by":"David Ten","updated_at":"2026-02-18T00:15:37.399716+08:00","closed_at":"2026-02-18T00:15:37.399716+08:00","close_reason":"Implemented BuildDailyFeatureSnapshotUseCase with 22 passing tests, DQ checks, publish/quarantine, cancellation, chunked scanning, and progress events","dependencies":[{"issue_id":"StockScreenClaude-0ch","depends_on_id":"StockScreenClaude-rwf","type":"blocks","created_at":"2026-02-17T00:08:10.294006+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-0ch","depends_on_id":"StockScreenClaude-7yl","type":"blocks","created_at":"2026-02-17T00:08:10.598267+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-0ch","depends_on_id":"StockScreenClaude-5pd","type":"blocks","created_at":"2026-02-17T00:08:10.987087+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-0rg","title":"Add Cache Health API Endpoint","description":"Add GET /v1/cache/health endpoint that exposes the cache health status. Returns status, SPY last date, expected date, task progress, and warmup metadata.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-05T15:01:05.109469+08:00","created_by":"David Ten","updated_at":"2026-02-05T15:10:12.116751+08:00","closed_at":"2026-02-05T15:10:12.116751+08:00","close_reason":"Added GET /v1/cache/health, POST /v1/cache/refresh, and POST /v1/cache/force-cancel endpoints","dependencies":[{"issue_id":"StockScreenClaude-0rg","depends_on_id":"StockScreenClaude-szs","type":"blocks","created_at":"2026-02-05T15:02:50.848677+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-17g","title":"T14: Add universe selector UI with exchange/index options","status":"closed","priority":3,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:49:35.1814+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:24.174723+08:00","closed_at":"2026-02-16T14:58:24.174723+08:00","close_reason":"Implemented in universe unification session","dependencies":[{"issue_id":"StockScreenClaude-17g","depends_on_id":"StockScreenClaude-bkd","type":"blocks","created_at":"2026-02-16T14:50:39.710704+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-17g","depends_on_id":"StockScreenClaude-hq1","type":"blocks","created_at":"2026-02-16T14:50:40.025699+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-1mj","title":"SE-E5: feature_store_query.py — setup_engine JSON field mappings + sort parity","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-20T23:47:40.803961+08:00","created_by":"David Ten","updated_at":"2026-02-20T23:53:07.214475+08:00","closed_at":"2026-02-20T23:53:07.214475+08:00","close_reason":"18 se_* JSON field mappings + _JSON_SORT_NUMERIC + _json_sort_expr in feature_store_query, parity with scan_result_query","dependencies":[{"issue_id":"StockScreenClaude-1mj","depends_on_id":"StockScreenClaude-f2w","type":"blocks","created_at":"2026-02-20T23:47:44.728637+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-1wy","title":"Z2: Consolidate Pydantic schemas after migration","description":"## What\nDuring the strangler migration, some Pydantic schemas may have been duplicated (inline in router vs separate files). Consolidate them into a clean schema layer.\n\n## Current State\nThe scan router (backend/app/api/v1/scans.py) has many schemas defined inline (~100+ lines of Pydantic models at the top of the file). During the refactor, domain types were added alongside these.\n\n## Target State\n- backend/app/schemas/scanning.py — All scan-related request/response schemas\n- backend/app/schemas/feature_store.py — Feature store API schemas\n- Remove inline schema definitions from routers\n- Clear mapping: domain types ↔ API schemas (explicit conversion functions)\n\n## Consolidation Rules\n- Request schemas: Pydantic models that validate API input → kept in schemas/\n- Response schemas: Pydantic models that format API output → kept in schemas/\n- Domain types: dataclasses in domain/ — NOT Pydantic (no validation dependencies)\n- Conversion: explicit to_domain() and from_domain() methods on schemas\n\n## Acceptance Criteria\n- No inline Pydantic models in router files\n- Clear schema files organized by feature area\n- Domain types remain pure (no Pydantic dependency)\n- All API contracts unchanged (same JSON shape)\n- OpenAPI docs still generate correctly\n\n## Depends On\n- Z1 (legacy paths removed, so we know what's actually used)","status":"closed","priority":3,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:06:40.283661+08:00","created_by":"David Ten","updated_at":"2026-02-19T07:20:16.517029+08:00","closed_at":"2026-02-19T07:20:16.517029+08:00","close_reason":"Extracted 34 inline Pydantic schemas from 6 routers into 7 schema files, added from_domain() classmethods, updated 2 test files. 225 tests pass.","dependencies":[{"issue_id":"StockScreenClaude-1wy","depends_on_id":"StockScreenClaude-jhs","type":"blocks","created_at":"2026-02-17T00:08:14.070113+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-26z","title":"T7: Create idempotent schema migration and backfill script","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:49:09.775217+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:23.858771+08:00","closed_at":"2026-02-16T14:58:23.858771+08:00","close_reason":"Implemented in universe unification session","dependencies":[{"issue_id":"StockScreenClaude-26z","depends_on_id":"StockScreenClaude-47f","type":"blocks","created_at":"2026-02-16T14:50:11.223107+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-26z","depends_on_id":"StockScreenClaude-eeh","type":"blocks","created_at":"2026-02-16T14:50:11.507008+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-2ev","title":"Move fundamentals refresh to Saturday morning","description":"Change from Friday 6PM (collides with 5:30PM warmup) to Saturday 8AM ET for zero contention","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T08:11:52.177863+08:00","created_by":"David Ten","updated_at":"2026-02-19T08:15:02.651096+08:00","closed_at":"2026-02-19T08:15:02.651096+08:00","close_reason":"Moved from Friday 6PM to Saturday 8AM in settings defaults and beat schedule comments"}
{"id":"StockScreenClaude-2sm","title":"EPIC-Z: Cleanup — Remove Legacy Path, Consolidate Schemas","description":"Final cleanup after the feature store is stable and all endpoints are migrated. Remove the legacy compute-per-request scan path (or downgrade to opt-in debug mode). Consolidate Pydantic schemas that were duplicated during the strangler migration. Corresponds to Phase PR9 of the v3 architecture plan.","status":"closed","priority":3,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-16T23:59:08.865032+08:00","created_by":"David Ten","updated_at":"2026-02-19T15:58:02.320499+08:00","closed_at":"2026-02-19T15:58:02.320499+08:00","close_reason":"Phase 1 (schema consolidation, MinerviniScanner rename) and Phase 2 (remove legacy fallback in 6 use cases, promote bridge methods to port, replace chart-data endpoint, update all tests) completed. 879 tests pass (8 pre-existing failures). Net -114 lines removed."}
{"id":"StockScreenClaude-2u8","title":"T4: Write unit tests for UniverseResolver","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:49:00.726511+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:23.715763+08:00","closed_at":"2026-02-16T14:58:23.715763+08:00","close_reason":"Implemented in universe unification session","dependencies":[{"issue_id":"StockScreenClaude-2u8","depends_on_id":"StockScreenClaude-z91","type":"blocks","created_at":"2026-02-16T14:49:59.995548+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3dn","title":"SE-D6: Field-level calculation spec + trace metadata","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-20T16:01:42.317364+08:00","created_by":"David Ten","updated_at":"2026-02-20T16:06:24.641459+08:00","closed_at":"2026-02-20T16:06:24.641459+08:00","close_reason":"Implemented SE-D6: FieldTrace/ScoreTrace types in models.py, BreakoutReadinessTraceInputs in readiness.py, trace.py builder, ExplainPayload.score_trace, scanner opt-in. 29 new tests all pass."}
{"id":"StockScreenClaude-3e8","title":"T4: Golden scan parity test — legacy vs feature store comparison","description":"## What\nCreate a golden test that verifies feature store results match legacy scan results for a fixed set of tickers. This is the ultimate validation that the refactor preserved behavior.\n\n## Files to Create\n- backend/tests/parity/test_scan_parity.py\n- backend/tests/parity/fixtures/ — Recorded test data\n\n## Test Design\n1. Pick 20 stable large-cap tickers (AAPL, MSFT, GOOGL, etc.)\n2. Record legacy scan results for these tickers at a fixed as_of_date\n3. Build a feature store snapshot for the same date with same config\n4. Compare field by field:\n   - composite_score: within 0.01 tolerance (floating point)\n   - overall_rating: exact match\n   - passes_count: exact match\n   - Per-screener scores: within 0.01 tolerance\n5. Compare filtered/sorted result ordering for common filter sets\n\n## Why Tolerance\nFloating point arithmetic may differ slightly between compute-per-request and batch paths due to ordering of operations. 0.01 tolerance prevents false failures while catching real regressions.\n\n## Acceptance Criteria\n- 20-ticker parity test passes\n- Composite scores match within tolerance\n- Ratings match exactly\n- Filter/sort ordering stable\n- Test is reproducible (uses recorded fixture data, not live API)\n\n## Depends On\n- G2 (dual-source query must work to compare both paths)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:06:02.69785+08:00","created_by":"David Ten","updated_at":"2026-02-18T13:30:23.081161+08:00","closed_at":"2026-02-18T13:30:23.081161+08:00","close_reason":"All acceptance criteria met: 21-ticker golden parity tests implemented in commit f65bc4e5, covering field-by-field comparison with 0.01 tolerance, exact rating matches, filter/sort ordering, pagination, and schema alignment — all using deterministic fixture data against in-memory SQLite.","dependencies":[{"issue_id":"StockScreenClaude-3e8","depends_on_id":"StockScreenClaude-78r","type":"blocks","created_at":"2026-02-17T00:08:12.652449+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3hc","title":"T11: Update scan response schemas to include structured universe fields","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:49:22.357834+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:24.042519+08:00","closed_at":"2026-02-16T14:58:24.042519+08:00","close_reason":"Implemented in universe unification session","dependencies":[{"issue_id":"StockScreenClaude-3hc","depends_on_id":"StockScreenClaude-47f","type":"blocks","created_at":"2026-02-16T14:50:27.785739+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3wc","title":"Prevent SQLite corruption on Docker shutdown (Ctrl+C)","status":"closed","priority":1,"issue_type":"bug","owner":"davidten7@gmail.com","created_at":"2026-02-26T08:16:56.352075+08:00","created_by":"David Ten","updated_at":"2026-02-26T08:17:02.821466+08:00","closed_at":"2026-02-26T08:17:02.821466+08:00","close_reason":"Added WAL checkpoint + engine.dispose() to FastAPI lifespan shutdown and Celery worker_shutting_down signal; increased stop_grace_period to 30s for all 3 Celery worker services"}
{"id":"StockScreenClaude-3wq","title":"T15: Update scan history label formatting","status":"closed","priority":3,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:49:38.938522+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:24.220295+08:00","closed_at":"2026-02-16T14:58:24.220295+08:00","close_reason":"Implemented in universe unification session","dependencies":[{"issue_id":"StockScreenClaude-3wq","depends_on_id":"StockScreenClaude-3hc","type":"blocks","created_at":"2026-02-16T14:50:43.0457+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z0","title":"B1: Extract composite score + rating policies to domain layer","description":"## What\nExtract pure scoring and rating logic from ScanOrchestrator into domain modules. These become pure functions with zero IO dependencies.\n\n## Current State\n- backend/app/scanners/scan_orchestrator.py contains:\n  - _calculate_composite_score() (~line 350-400): weighted_average, maximum, minimum methods\n  - _calculate_overall_rating() (~line 400-450): threshold-based rating from composite score\n\n## Files to Create\n- backend/app/domain/scanning/composite.py — CompositeScorer class\n  - Methods: weighted_average, maximum, minimum\n  - Input: dict of screener scores + weights\n  - Output: float composite score\n  - Pure function, no IO\n\n- backend/app/domain/scanning/rating.py — RatingCalculator class\n  - Input: composite score, pass rates, thresholds config\n  - Output: integer rating (1-5 scale)\n  - Must match EXACT current thresholds from scan_orchestrator.py\n  - Pure function, no IO\n\n## Why This Matters\nThese are the core business rules of the screener. By extracting them to domain/, they become:\n1. Unit-testable without mocking anything\n2. Reusable by both online scan and offline feature store\n3. Protected from accidental IO coupling\n\n## Acceptance Criteria\n- CompositeScorer produces identical results to current _calculate_composite_score\n- RatingCalculator produces identical results to current _calculate_overall_rating\n- Both have zero imports outside domain/ and stdlib\n- Boundary test (from A1) passes\n- Existing scan results unchanged (integration verify)\n\n## Depends On\n- A1 (domain/scanning/ package must exist)","status":"closed","priority":1,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:00:12.299098+08:00","created_by":"David Ten","updated_at":"2026-02-17T07:36:21.328604+08:00","closed_at":"2026-02-17T07:36:21.328604+08:00","close_reason":"Created domain/scanning/scoring.py with calculate_composite_score and calculate_overall_rating pure functions. Boundary tests pass, smoke tests verify identical behavior to orchestrator.","dependencies":[{"issue_id":"StockScreenClaude-3z0","depends_on_id":"StockScreenClaude-7tx","type":"blocks","created_at":"2026-02-17T00:08:09.981428+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5","title":"XR2-ROOT XUI Reader v2 Delivery Program","description":"Top-level program epic coordinating implementation of XUI Reader v2 from spec to release with explicit safety and reliability gates.","design":"This root captures program-level intent: deliver read-only X List and user timeline collection through normal web UI automation while preserving fail-closed safety and deterministic what-is-new semantics.","acceptance_criteria":"All child workstreams are created under this root; closure requires each workstream epic to meet its acceptance criteria and dependency gates.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:01.182019+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:01.182019+08:00","labels":["program","read-only-automation","xui-reader-v2"],"comments":[{"id":196,"issue_id":"StockScreenClaude-3z5","author":"David Ten","text":"Background: This initiative intentionally prioritizes reliability and operator control over aggressive scraping throughput.\nReasoning: The biggest failure modes are silent data drift and unsafe session handling, so architecture and sequencing enforce explicit checks, bounded loops, and redaction-first diagnostics.\nProgram outcome: A shippable CLI package with auditable behavior, reproducible tests, and an operational runbook for long-lived watch usage.","created_at":"2026-02-27T17:16:01Z"}]}
{"id":"StockScreenClaude-3z5.1","title":"XR2-WS0 Foundations and Scaffold Contracts","description":"Establish package scaffold, shared contracts, and base tooling consumed by all downstream implementation work.","design":"Contract-first foundation reduces rework: stable paths/config/models/errors/logging APIs prevent cascading refactors as collectors and storage land.","acceptance_criteria":"CLI skeleton runs; config contracts are stable; base modules and test harness exist for subsequent workstreams.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:01.604669+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:01.604669+08:00","labels":["foundation","workstream","ws0","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.1","depends_on_id":"StockScreenClaude-3z5","type":"parent-child","created_at":"2026-02-28T01:16:01.606003+08:00","created_by":"David Ten"}],"comments":[{"id":197,"issue_id":"StockScreenClaude-3z5.1","author":"David Ten","text":"Intent: Lock foundational contracts before behavior-heavy collectors and storage work begin.\nFuture-self note: If downstream tasks stall on repeated interface churn, revisit this epic and strengthen contract tests around config/model boundaries.","created_at":"2026-02-27T17:16:03Z"}]}
{"id":"StockScreenClaude-3z5.1.1","title":"XR2-WS0-T1 Scaffold package layout and CLI command tree","description":"Create src-layout package skeleton and wire Typer command tree with global options placeholders.","design":"Ensure command registration mirrors spec sections to avoid later CLI churn.","acceptance_criteria":"`xui --help` lists command groups and key options; module imports are stable.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:05.124719+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:20:59.042152+08:00","labels":["cli","ws0","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.1.1","depends_on_id":"StockScreenClaude-3z5.1","type":"parent-child","created_at":"2026-02-28T01:16:05.126492+08:00","created_by":"David Ten"}],"comments":[{"id":205,"issue_id":"StockScreenClaude-3z5.1.1","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:05Z"}]}
{"id":"StockScreenClaude-3z5.1.1.1","title":"XR2-WS0-T1.1 Create module skeleton files for core domains","description":"Add initial modules for config/models/errors/logging/browser/collectors/extract/store/render/scheduler/diagnostics.","design":"Stub interfaces only; avoid behavior coupling at this stage.","acceptance_criteria":"All core modules import cleanly and include minimal public interfaces.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:05.393623+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:05.393623+08:00","labels":["subtask","ws0","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.1.1.1","depends_on_id":"StockScreenClaude-3z5.1.1","type":"parent-child","created_at":"2026-02-28T01:16:05.395248+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.1.2","title":"XR2-WS0-T2 Define config paths model and error contracts","description":"Implement config loading/path resolution and shared domain models plus error taxonomy baseline.","design":"Use typed contracts now so downstream code can rely on predictable shape and error semantics.","acceptance_criteria":"Config init/show works with schema validation and typed models/errors are reusable across commands.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:05.639068+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:05.639068+08:00","labels":["config","ws0","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.1.2","depends_on_id":"StockScreenClaude-3z5.1","type":"parent-child","created_at":"2026-02-28T01:16:05.640326+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.1.2","depends_on_id":"StockScreenClaude-3z5.1.1","type":"blocks","created_at":"2026-02-28T01:21:02.123159+08:00","created_by":"David Ten"}],"comments":[{"id":206,"issue_id":"StockScreenClaude-3z5.1.2","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:05Z"}]}
{"id":"StockScreenClaude-3z5.1.2.1","title":"XR2-WS0-T2.1 Add config init/show defaults and validation surface","description":"Implement default config generation and resolved config rendering with validation diagnostics.","design":"Prefer explicit validation messages over implicit fallbacks.","acceptance_criteria":"Invalid config paths/values produce actionable error output.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:05.886737+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:05.886737+08:00","labels":["subtask","ws0","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.1.2.1","depends_on_id":"StockScreenClaude-3z5.1.2","type":"parent-child","created_at":"2026-02-28T01:16:05.887941+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.1.3","title":"XR2-WS0-T3 Establish tooling baseline and local quality gates","description":"Create pyproject baseline, dependency declarations, test command scaffolding, and lint/test execution entrypoints.","design":"Tooling baseline keeps future contributors aligned on reproducible dev loop.","acceptance_criteria":"Project installs in editable mode and baseline test/lint commands execute.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:06.136051+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:06.136051+08:00","labels":["tooling","ws0","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.1.3","depends_on_id":"StockScreenClaude-3z5.1","type":"parent-child","created_at":"2026-02-28T01:16:06.137191+08:00","created_by":"David Ten"}],"comments":[{"id":207,"issue_id":"StockScreenClaude-3z5.1.3","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:05Z"},{"id":229,"issue_id":"StockScreenClaude-3z5.1.3","author":"David Ten","text":"Planning refinement: removed hard dependency on WS0-T2 so tooling/lint/test scaffolding can proceed in parallel with config/model contracts. This shortens critical path and improves early contributor feedback loops.","created_at":"2026-02-27T17:28:24Z"}]}
{"id":"StockScreenClaude-3z5.1.3.1","title":"XR2-WS0-T3.1 Add pyproject scripts and contributor bootstrap notes","description":"Document minimal setup including Playwright browser install and local command workflow.","design":"Keep docs tightly scoped to v2 baseline; avoid speculative extras.","acceptance_criteria":"New contributor can clone, install, and run CLI/test commands from docs.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:06.370962+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:06.370962+08:00","labels":["subtask","ws0","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.1.3.1","depends_on_id":"StockScreenClaude-3z5.1.3","type":"parent-child","created_at":"2026-02-28T01:16:06.37209+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.10","title":"XR2-CP2 Validate onboarding and operator UX from clean machine","description":"Perform a clean-environment onboarding drill to verify setup docs, auth flow clarity, failure messaging, and doctor guidance are sufficient for non-author operators.","design":"A large share of user friction is first-run confusion. Explicitly testing onboarding flow lowers support overhead and improves trust.","acceptance_criteria":"A clean-machine walkthrough completes without tribal knowledge; friction points are captured and resolved in docs/help text before release candidate.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:29:36.19747+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:29:36.19747+08:00","labels":["checkpoint","onboarding","ux","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.10","depends_on_id":"StockScreenClaude-3z5","type":"parent-child","created_at":"2026-02-28T01:29:36.198655+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.10","depends_on_id":"StockScreenClaude-3z5.9","type":"blocks","created_at":"2026-02-28T01:29:36.391851+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.10","depends_on_id":"StockScreenClaude-3z5.7.1","type":"blocks","created_at":"2026-02-28T01:29:36.584657+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.10","depends_on_id":"StockScreenClaude-3z5.8.3","type":"blocks","created_at":"2026-02-28T01:29:36.842274+08:00","created_by":"David Ten"}],"comments":[{"id":236,"issue_id":"StockScreenClaude-3z5.10","author":"David Ten","text":"User-impact focus: optimize for time-to-first-success and understandable recovery when things fail. This checkpoint ensures release quality is measured against real operator experience, not just passing tests.","created_at":"2026-02-27T17:29:37Z"}]}
{"id":"StockScreenClaude-3z5.2","title":"XR2-WS1 Auth and Profile Lifecycle","description":"Implement profile management and secure authentication lifecycle using Playwright storage state with fail-closed checks.","design":"Auth is the first trust boundary; correctness and secret hygiene are non-negotiable because all collection behavior depends on valid session state.","acceptance_criteria":"auth login/status/logout and profile commands operate deterministically with secure storage permissions and actionable remediation messaging.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:01.850533+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:01.850533+08:00","labels":["auth","workstream","ws1","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.2","depends_on_id":"StockScreenClaude-3z5","type":"parent-child","created_at":"2026-02-28T01:16:01.851705+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.2","depends_on_id":"StockScreenClaude-3z5.1","type":"blocks","created_at":"2026-02-28T01:20:59.238972+08:00","created_by":"David Ten"}],"comments":[{"id":198,"issue_id":"StockScreenClaude-3z5.2","author":"David Ten","text":"Intent: Build trustable auth/profile flows first so every run has deterministic identity and explicit failure modes.\nFuture-self note: Any shortcut that weakens storage_state secrecy or fail-closed checks should be rejected even if it improves convenience.","created_at":"2026-02-27T17:16:03Z"}]}
{"id":"StockScreenClaude-3z5.2.1","title":"XR2-WS1-T1 Implement profile lifecycle commands","description":"Implement profiles list/create/delete/switch and per-profile directory bootstrap semantics.","design":"Profiles partition auth state and storage; lifecycle correctness is required for multi-account safety.","acceptance_criteria":"Profile commands are deterministic and guard against unsafe deletion of active profile state.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:06.624471+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:06.624471+08:00","labels":["profiles","ws1","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.2.1","depends_on_id":"StockScreenClaude-3z5.2","type":"parent-child","created_at":"2026-02-28T01:16:06.625877+08:00","created_by":"David Ten"}],"comments":[{"id":208,"issue_id":"StockScreenClaude-3z5.2.1","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:05Z"}]}
{"id":"StockScreenClaude-3z5.2.1.1","title":"XR2-WS1-T1.1 Enforce active-profile safety rules","description":"Add safeguards for deleting/switching profiles with clear prompts/errors.","design":"Avoid ambiguous behavior around implicit default profile changes.","acceptance_criteria":"Unsafe delete/switch operations are blocked with actionable remediation text.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:06.87473+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:06.87473+08:00","labels":["subtask","ws1","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.2.1.1","depends_on_id":"StockScreenClaude-3z5.2.1","type":"parent-child","created_at":"2026-02-28T01:16:06.876013+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.2.2","title":"XR2-WS1-T2 Implement auth login storage-state capture","description":"Build headful login flow that saves Playwright storage_state into selected profile path.","design":"Manual login remains explicit and non-automated; never attempt hidden credential extraction.","acceptance_criteria":"Login command persists valid storage_state and reports destination path without exposing secrets.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:07.13354+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:07.13354+08:00","labels":["auth","ws1","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.2.2","depends_on_id":"StockScreenClaude-3z5.2","type":"parent-child","created_at":"2026-02-28T01:16:07.13491+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.2.2","depends_on_id":"StockScreenClaude-3z5.2.1","type":"blocks","created_at":"2026-02-28T01:21:02.500834+08:00","created_by":"David Ten"}],"comments":[{"id":209,"issue_id":"StockScreenClaude-3z5.2.2","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:06Z"}]}
{"id":"StockScreenClaude-3z5.2.2.1","title":"XR2-WS1-T2.1 Apply storage-state file permission hardening","description":"Set restrictive permissions and verify secret-safe handling for storage_state artifacts.","design":"Treat session state as password-class secret in all paths.","acceptance_criteria":"storage_state files are created with secure permissions and never echoed to logs.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:07.371594+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:07.371594+08:00","labels":["security","subtask","ws1","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.2.2.1","depends_on_id":"StockScreenClaude-3z5.2.2","type":"parent-child","created_at":"2026-02-28T01:16:07.372793+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.2.3","title":"XR2-WS1-T3 Implement auth status logout and remediation UX","description":"Implement fast auth status probe plus logout cleanup and clear re-login guidance.","design":"Fail-closed is required when session validity cannot be confirmed.","acceptance_criteria":"Status and logout commands return consistent exit codes and recovery steps.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:07.615529+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:07.615529+08:00","labels":["auth","ws1","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.2.3","depends_on_id":"StockScreenClaude-3z5.2","type":"parent-child","created_at":"2026-02-28T01:16:07.616831+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.2.3","depends_on_id":"StockScreenClaude-3z5.2.2","type":"blocks","created_at":"2026-02-28T01:21:02.743872+08:00","created_by":"David Ten"}],"comments":[{"id":210,"issue_id":"StockScreenClaude-3z5.2.3","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:06Z"}]}
{"id":"StockScreenClaude-3z5.2.3.1","title":"XR2-WS1-T3.1 Add login-wall and challenge detection messaging","description":"Define reusable detection outputs for login wall/challenge states used by collectors and auth status.","design":"Consistent user messaging improves triage and reduces unsafe retries.","acceptance_criteria":"Detected blocked states are categorized and surfaced with explicit manual next actions.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:07.854936+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:07.854936+08:00","labels":["subtask","ws1","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.2.3.1","depends_on_id":"StockScreenClaude-3z5.2.3","type":"parent-child","created_at":"2026-02-28T01:16:07.856073+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.3","title":"XR2-WS2 Browser Session and Collector Engine","description":"Build browser session lifecycle, resource routing, allowed overlay handling, and bounded list/user timeline collection loops.","design":"External UI automation is brittle; isolating session and collector contracts localizes breakage and enables focused diagnostics.","acceptance_criteria":"List and user collection loops terminate under explicit stop conditions and produce stable extraction-ready DOM payloads and counters.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:02.097058+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:02.097058+08:00","labels":["browser","collectors","workstream","ws2","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.3","depends_on_id":"StockScreenClaude-3z5","type":"parent-child","created_at":"2026-02-28T01:16:02.098295+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.3","depends_on_id":"StockScreenClaude-3z5.1","type":"blocks","created_at":"2026-02-28T01:20:59.423326+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.3","depends_on_id":"StockScreenClaude-3z5.2","type":"blocks","created_at":"2026-02-28T01:20:59.604608+08:00","created_by":"David Ten"}],"comments":[{"id":199,"issue_id":"StockScreenClaude-3z5.3","author":"David Ten","text":"Intent: Encapsulate browser lifecycle and collector loops to constrain external UI volatility.\nFuture-self note: Keep loop termination explicit and observable; never allow unbounded scroll or retry behavior.","created_at":"2026-02-27T17:16:03Z"}]}
{"id":"StockScreenClaude-3z5.3.1","title":"XR2-WS2-T1 Build BrowserSessionManager lifecycle","description":"Implement browser/context/page lifecycle manager with timeout and engine config wiring.","design":"Centralized lifecycle logic avoids duplicated launch behavior across commands.","acceptance_criteria":"Session manager supports one-run reuse and deterministic teardown semantics.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:08.114052+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:08.114052+08:00","labels":["browser","ws2","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.3.1","depends_on_id":"StockScreenClaude-3z5.3","type":"parent-child","created_at":"2026-02-28T01:16:08.115199+08:00","created_by":"David Ten"}],"comments":[{"id":211,"issue_id":"StockScreenClaude-3z5.3.1","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:06Z"}]}
{"id":"StockScreenClaude-3z5.3.1.1","title":"XR2-WS2-T1.1 Wire engine and timeout policy from config","description":"Bind browser engine headless mode and timeout defaults to resolved config values.","design":"Keep runtime flags able to override config while preserving safe defaults.","acceptance_criteria":"Context/page creation reflects configured timeout and engine policy.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:08.354595+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:08.354595+08:00","labels":["subtask","ws2","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.3.1.1","depends_on_id":"StockScreenClaude-3z5.3.1","type":"parent-child","created_at":"2026-02-28T01:16:08.355771+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.3.2","title":"XR2-WS2-T2 Implement resource routing and allowed overlay dismissal","description":"Add request interception for blockable resource types and implement non-evasive overlay dismissal helpers.","design":"Policy must improve speed while preserving required dynamic timeline requests.","acceptance_criteria":"Routing blocks configured asset classes and overlay handling only targets allowed prompt types.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:08.591448+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:08.591448+08:00","labels":["overlays","ws2","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.3.2","depends_on_id":"StockScreenClaude-3z5.3","type":"parent-child","created_at":"2026-02-28T01:16:08.592649+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.3.2","depends_on_id":"StockScreenClaude-3z5.3.1","type":"blocks","created_at":"2026-02-28T01:21:02.926449+08:00","created_by":"David Ten"}],"comments":[{"id":212,"issue_id":"StockScreenClaude-3z5.3.2","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:06Z"}]}
{"id":"StockScreenClaude-3z5.3.2.1","title":"XR2-WS2-T2.1 Add guardrails for non-evasive overlay automation","description":"Codify allowed overlay selectors and reject challenge/login-wall bypass behavior.","design":"Guardrails enforce product non-goals at code level.","acceptance_criteria":"Overlay helper exits safely when encountering unsupported challenge states.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:08.852513+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:08.852513+08:00","labels":["safety","subtask","ws2","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.3.2.1","depends_on_id":"StockScreenClaude-3z5.3.2","type":"parent-child","created_at":"2026-02-28T01:16:08.853666+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.3.3","title":"XR2-WS2-T3 Implement list/user collector navigation and bounded scroll loops","description":"Build canonical navigation plus scroll collection loop with stop conditions and per-source counters.","design":"Collector loops must always terminate under explicit bounds to avoid runaways.","acceptance_criteria":"list read and user read collect within limits max_scrolls and stagnation-round thresholds.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:09.136149+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:09.136149+08:00","labels":["collectors","ws2","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.3.3","depends_on_id":"StockScreenClaude-3z5.3","type":"parent-child","created_at":"2026-02-28T01:16:09.137392+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.3.3","depends_on_id":"StockScreenClaude-3z5.3.2","type":"blocks","created_at":"2026-02-28T01:21:03.118962+08:00","created_by":"David Ten"}],"comments":[{"id":213,"issue_id":"StockScreenClaude-3z5.3.3","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:06Z"}]}
{"id":"StockScreenClaude-3z5.3.3.1","title":"XR2-WS2-T3.1 Implement user tab selection fallback strategy","description":"Implement tab targeting by href first then resilient text fallback in tab navigation region.","design":"Tab selection is a common break point when class names drift.","acceptance_criteria":"posts/replies/media tab navigation works or fails with actionable selector diagnostics.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:09.385693+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:09.385693+08:00","labels":["subtask","ws2","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.3.3.1","depends_on_id":"StockScreenClaude-3z5.3.3","type":"parent-child","created_at":"2026-02-28T01:16:09.386795+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.4","title":"XR2-WS3 Extraction and Normalization Robustness","description":"Implement selector-pack-driven extraction with primary and fallback parsing, bounded expansion, and normalized TweetItem records.","design":"Data quality is product value: extraction must be resilient to selector drift while preserving deterministic field semantics.","acceptance_criteria":"Extractor returns normalized records with dedupe-safe IDs and explicit handling for replies, reposts, pinned, and quoted content.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:02.34417+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:02.34417+08:00","labels":["extractor","workstream","ws3","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.4","depends_on_id":"StockScreenClaude-3z5","type":"parent-child","created_at":"2026-02-28T01:16:02.34581+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.4","depends_on_id":"StockScreenClaude-3z5.3","type":"blocks","created_at":"2026-02-28T01:20:59.782455+08:00","created_by":"David Ten"}],"comments":[{"id":200,"issue_id":"StockScreenClaude-3z5.4","author":"David Ten","text":"Intent: Make extraction resilient through selector packs and fallback paths without sacrificing field correctness.\nFuture-self note: Every selector change should be coupled to fixture updates and a clear migration comment.","created_at":"2026-02-27T17:16:04Z"}]}
{"id":"StockScreenClaude-3z5.4.1","title":"XR2-WS3-T1 Implement selector pack resolver and override merge","description":"Load built-in default selector pack and merge optional user override with override-wins policy.","design":"Runtime selector patching reduces need for emergency code releases.","acceptance_criteria":"Resolver outputs effective selector map and reports invalid override keys clearly.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:09.62843+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:09.62843+08:00","labels":["selectors","ws3","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.4.1","depends_on_id":"StockScreenClaude-3z5.4","type":"parent-child","created_at":"2026-02-28T01:16:09.629833+08:00","created_by":"David Ten"}],"comments":[{"id":214,"issue_id":"StockScreenClaude-3z5.4.1","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:07Z"}]}
{"id":"StockScreenClaude-3z5.4.1.1","title":"XR2-WS3-T1.1 Validate selector override schema and fallback behavior","description":"Add schema checks for override file and deterministic fallback to defaults when invalid.","design":"Invalid overrides should not crash collection without context.","acceptance_criteria":"Malformed overrides emit warnings and safe defaults continue execution when possible.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:09.86956+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:09.86956+08:00","labels":["subtask","ws3","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.4.1.1","depends_on_id":"StockScreenClaude-3z5.4.1","type":"parent-child","created_at":"2026-02-28T01:16:09.870776+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.4.2","title":"XR2-WS3-T2 Build primary and fallback tweet extraction","description":"Implement article-first extraction and link-first fallback for tweet id author time text and metadata fields.","design":"Dual-path extraction increases resilience against DOM variation.","acceptance_criteria":"Extractor returns complete TweetItem fields or explicit nulls without uncaught parse failures.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:10.131557+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:10.131557+08:00","labels":["extract","ws3","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.4.2","depends_on_id":"StockScreenClaude-3z5.4","type":"parent-child","created_at":"2026-02-28T01:16:10.132621+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.4.2","depends_on_id":"StockScreenClaude-3z5.4.1","type":"blocks","created_at":"2026-02-28T01:21:03.309492+08:00","created_by":"David Ten"}],"comments":[{"id":215,"issue_id":"StockScreenClaude-3z5.4.2","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:07Z"}]}
{"id":"StockScreenClaude-3z5.4.2.1","title":"XR2-WS3-T2.1 Parse quote reply repost and pinned indicators","description":"Capture reply/repost/pinned/quote metadata with normalization rules.","design":"These flags feed filtering checkpoint and user-output behavior.","acceptance_criteria":"Metadata fields are populated consistently across primary and fallback extraction paths.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:10.372083+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:10.372083+08:00","labels":["subtask","ws3","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.4.2.1","depends_on_id":"StockScreenClaude-3z5.4.2","type":"parent-child","created_at":"2026-02-28T01:16:10.373135+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.4.3","title":"XR2-WS3-T3 Implement normalization dedupe and bounded truncated expansion","description":"Normalize parsed records, enforce in-run dedupe, and support optional bounded show-more expansion.","design":"Normalization should be deterministic and side-effect free for testability.","acceptance_criteria":"Expanded text obeys per-run click limits and normalized IDs/timestamps remain consistent.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:10.634807+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:10.634807+08:00","labels":["normalize","ws3","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.4.3","depends_on_id":"StockScreenClaude-3z5.4","type":"parent-child","created_at":"2026-02-28T01:16:10.636068+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.4.3","depends_on_id":"StockScreenClaude-3z5.4.2","type":"blocks","created_at":"2026-02-28T01:21:03.533803+08:00","created_by":"David Ten"}],"comments":[{"id":216,"issue_id":"StockScreenClaude-3z5.4.3","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:07Z"}]}
{"id":"StockScreenClaude-3z5.4.3.1","title":"XR2-WS3-T3.1 Add normalization edge-case fixtures","description":"Create fixture coverage for malformed ids missing times and mixed unicode text normalization paths.","design":"Fixtures protect against subtle parser regressions.","acceptance_criteria":"Edge-case fixtures execute in tests and document expected normalization outcomes.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:10.882445+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:10.882445+08:00","labels":["subtask","tests","ws3","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.4.3.1","depends_on_id":"StockScreenClaude-3z5.4.3","type":"parent-child","created_at":"2026-02-28T01:16:10.883778+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.5","title":"XR2-WS4 Storage Checkpoints and New-Only Semantics","description":"Deliver SQLite schema, migrations, checkpoint logic, idempotent persistence, retention, and state counter durability.","design":"The new-only promise depends on precise checkpoint semantics and replay-safe persistence; this workstream protects that contract.","acceptance_criteria":"Cross-run dedupe and per-source checkpoint advancement are deterministic and verified with tests for old-streak and pinned handling.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:02.60514+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:02.60514+08:00","labels":["checkpoints","storage","workstream","ws4","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.5","depends_on_id":"StockScreenClaude-3z5","type":"parent-child","created_at":"2026-02-28T01:16:02.606271+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.5","depends_on_id":"StockScreenClaude-3z5.1","type":"blocks","created_at":"2026-02-28T01:20:59.959957+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.5","depends_on_id":"StockScreenClaude-3z5.4","type":"blocks","created_at":"2026-02-28T01:21:00.182039+08:00","created_by":"David Ten"}],"comments":[{"id":201,"issue_id":"StockScreenClaude-3z5.5","author":"David Ten","text":"Intent: Preserve new-only correctness across reruns with robust checkpoint and dedupe semantics.\nFuture-self note: Bugs here are high-impact because they create silent misses or duplicate floods; bias to stronger invariants and tests.","created_at":"2026-02-27T17:16:04Z"}]}
{"id":"StockScreenClaude-3z5.5.1","title":"XR2-WS4-T1 Implement SQLite schema migrations and store interfaces","description":"Create schema migrations and store APIs for sources checkpoints tweets and runs.","design":"Durable schema and migration discipline are required for safe iteration.","acceptance_criteria":"Database initializes idempotently with expected tables indexes and migration tracking.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:11.132017+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:11.132017+08:00","labels":["storage","ws4","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.5.1","depends_on_id":"StockScreenClaude-3z5.5","type":"parent-child","created_at":"2026-02-28T01:16:11.133242+08:00","created_by":"David Ten"}],"comments":[{"id":217,"issue_id":"StockScreenClaude-3z5.5.1","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:07Z"}]}
{"id":"StockScreenClaude-3z5.5.1.1","title":"XR2-WS4-T1.1 Build migration runner and bootstrap pragmas","description":"Implement migration execution order and base pragmas including WAL mode configuration.","design":"Pragmas and migration order should be explicit to avoid environment surprises.","acceptance_criteria":"Fresh and existing profile DBs migrate without data loss or duplicate DDL errors.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:11.399749+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:11.399749+08:00","labels":["subtask","ws4","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.5.1.1","depends_on_id":"StockScreenClaude-3z5.5.1","type":"parent-child","created_at":"2026-02-28T01:16:11.401024+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.5.2","title":"XR2-WS4-T2 Implement checkpoint engine and new-only filters","description":"Implement per-source checkpoint updates and --new filtering with old-streak early-stop semantics.","design":"Checkpoint correctness defines core user trust for repeated runs.","acceptance_criteria":"New-only mode emits only unseen tweets and checkpoint advancement excludes pinned old-streak pollution.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:11.65477+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:11.65477+08:00","labels":["checkpoints","ws4","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.5.2","depends_on_id":"StockScreenClaude-3z5.5","type":"parent-child","created_at":"2026-02-28T01:16:11.656141+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.5.2","depends_on_id":"StockScreenClaude-3z5.5.1","type":"blocks","created_at":"2026-02-28T01:21:03.716393+08:00","created_by":"David Ten"}],"comments":[{"id":218,"issue_id":"StockScreenClaude-3z5.5.2","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:07Z"}]}
{"id":"StockScreenClaude-3z5.5.2.1","title":"XR2-WS4-T2.1 Cover id-mode and time-mode checkpoint transitions","description":"Add focused tests for id/time modes, no-new runs, and mixed-order timelines.","design":"Transition rules must remain stable even as extraction logic evolves.","acceptance_criteria":"Checkpoint mode tests pass and document expected advancement behavior.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:11.892347+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:11.892347+08:00","labels":["subtask","tests","ws4","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.5.2.1","depends_on_id":"StockScreenClaude-3z5.5.2","type":"parent-child","created_at":"2026-02-28T01:16:11.893422+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.5.3","title":"XR2-WS4-T3 Implement retention and run/state counter persistence","description":"Implement data retention cleanup and persistence for run counters and daily budget state.","design":"Retention and counters keep local state bounded and operationally useful.","acceptance_criteria":"Old data pruning and counter updates execute predictably with timezone-aware daily boundaries.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:12.137513+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:12.137513+08:00","labels":["retention","state","ws4","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.5.3","depends_on_id":"StockScreenClaude-3z5.5","type":"parent-child","created_at":"2026-02-28T01:16:12.138792+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.5.3","depends_on_id":"StockScreenClaude-3z5.5.1","type":"blocks","created_at":"2026-02-28T01:28:25.067627+08:00","created_by":"David Ten"}],"comments":[{"id":219,"issue_id":"StockScreenClaude-3z5.5.3","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:07Z"},{"id":230,"issue_id":"StockScreenClaude-3z5.5.3","author":"David Ten","text":"Planning refinement: changed dependency to WS4-T1 (schema/store) instead of WS4-T2 (checkpoint engine). Retention and run counters are largely orthogonal and can be developed/tested earlier.","created_at":"2026-02-27T17:28:25Z"}]}
{"id":"StockScreenClaude-3z5.5.3.1","title":"XR2-WS4-T3.1 Add retention safety checks and dry-run metrics","description":"Add protections and reporting around retention deletions including affected-row metrics.","design":"Operators need visibility before tuning retention horizons.","acceptance_criteria":"Retention routine reports deletions and never removes rows outside configured policy.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:12.375671+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:12.375671+08:00","labels":["subtask","ws4","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.5.3.1","depends_on_id":"StockScreenClaude-3z5.5.3","type":"parent-child","created_at":"2026-02-28T01:16:12.376794+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.6","title":"XR2-WS5 Multi-Source Read and Watch Scheduler","description":"Implement multi-source orchestration, merged output ordering, watch loop cadence, shutdown windows, and budget enforcement.","design":"Long-running operation amplifies defects; explicit cadence and budget controls are required to keep behavior bounded and operator-safe.","acceptance_criteria":"watch mode remains bounded and observable: interval/jitter/shutdown/budget semantics work predictably with graceful shutdown behavior.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:02.870807+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:02.870807+08:00","labels":["scheduler","watch","workstream","ws5","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.6","depends_on_id":"StockScreenClaude-3z5","type":"parent-child","created_at":"2026-02-28T01:16:02.872147+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.6","depends_on_id":"StockScreenClaude-3z5.3","type":"blocks","created_at":"2026-02-28T01:21:00.422549+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.6","depends_on_id":"StockScreenClaude-3z5.5","type":"blocks","created_at":"2026-02-28T01:21:00.604658+08:00","created_by":"David Ten"}],"comments":[{"id":202,"issue_id":"StockScreenClaude-3z5.6","author":"David Ten","text":"Intent: Ship reliable multi-source and watch operations with strict operational budgets.\nFuture-self note: Treat watch mode as production automation; graceful interruption and daily reset correctness are first-class requirements.","created_at":"2026-02-27T17:16:04Z"}]}
{"id":"StockScreenClaude-3z5.6.1","title":"XR2-WS5-T1 Implement multi-source read orchestration and merge","description":"Implement source selection execution loop, per-source isolation, and merged deterministic output ordering.","design":"Cross-source behavior should degrade gracefully when one source fails.","acceptance_criteria":"read command emits stable ordering by created_at then id and reports per-source failures clearly.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:12.641349+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:12.641349+08:00","labels":["read","ws5","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.6.1","depends_on_id":"StockScreenClaude-3z5.6","type":"parent-child","created_at":"2026-02-28T01:16:12.642433+08:00","created_by":"David Ten"}],"comments":[{"id":220,"issue_id":"StockScreenClaude-3z5.6.1","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:08Z"}]}
{"id":"StockScreenClaude-3z5.6.1.1","title":"XR2-WS5-T1.1 Add merged-output determinism tests","description":"Create deterministic merge fixtures including null timestamp tie-break cases.","design":"Ordering consistency is critical for downstream automation diffs.","acceptance_criteria":"Merge tests prove deterministic ordering across repeated runs.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:13.055033+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:13.055033+08:00","labels":["subtask","tests","ws5","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.6.1.1","depends_on_id":"StockScreenClaude-3z5.6.1","type":"parent-child","created_at":"2026-02-28T01:16:13.056079+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.6.2","title":"XR2-WS5-T2 Implement watch scheduler interval jitter shutdown parser","description":"Build watch loop timing with jitter and local shutdown-window parsing including cross-midnight windows.","design":"Scheduler math must be explicit and testable to avoid accidental always-on behavior.","acceptance_criteria":"Watch loop sleeps/runs according to configured interval jitter and shutdown boundaries.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:13.308042+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:13.308042+08:00","labels":["scheduler","watch","ws5","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.6.2","depends_on_id":"StockScreenClaude-3z5.6","type":"parent-child","created_at":"2026-02-28T01:16:13.309261+08:00","created_by":"David Ten"}],"comments":[{"id":221,"issue_id":"StockScreenClaude-3z5.6.2","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:08Z"},{"id":231,"issue_id":"StockScreenClaude-3z5.6.2","author":"David Ten","text":"Planning refinement: removed dependency on WS5-T1 to allow scheduler interval/jitter/shutdown parser work to proceed in parallel. Integration with read orchestration still validated before closing WS5 epic.","created_at":"2026-02-27T17:28:25Z"}]}
{"id":"StockScreenClaude-3z5.6.2.1","title":"XR2-WS5-T2.1 Implement next-run time calculator utilities","description":"Create reusable time calculation helpers for interval jitter and shutdown wake-up boundaries.","design":"Centralized utilities prevent duplicated bug-prone date math.","acceptance_criteria":"Calculator outputs expected next-run timestamps for representative timezone scenarios.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:13.555362+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:13.555362+08:00","labels":["subtask","ws5","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.6.2.1","depends_on_id":"StockScreenClaude-3z5.6.2","type":"parent-child","created_at":"2026-02-28T01:16:13.556579+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.6.3","title":"XR2-WS5-T3 Implement budget enforcement and graceful shutdown","description":"Enforce daily page-load/scroll budgets and implement signal-safe shutdown with state flush.","design":"Budget ceilings and clean exits are the primary anti-runaway controls.","acceptance_criteria":"Budget exceedance stops further collection with clear exit behavior and persisted counters.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:13.801324+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:13.801324+08:00","labels":["budget","ws5","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.6.3","depends_on_id":"StockScreenClaude-3z5.6","type":"parent-child","created_at":"2026-02-28T01:16:13.802939+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.6.3","depends_on_id":"StockScreenClaude-3z5.6.2","type":"blocks","created_at":"2026-02-28T01:21:04.346033+08:00","created_by":"David Ten"}],"comments":[{"id":222,"issue_id":"StockScreenClaude-3z5.6.3","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:08Z"}]}
{"id":"StockScreenClaude-3z5.6.3.1","title":"XR2-WS5-T3.1 Define exit-code matrix for watch outcomes","description":"Specify and implement exit codes for success budget-stop auth-fail and interrupted states.","design":"Consistent exit codes enable reliable orchestration via cron/systemd.","acceptance_criteria":"Documented exit codes are implemented and covered by targeted tests.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:14.063651+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:14.063651+08:00","labels":["subtask","ws5","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.6.3.1","depends_on_id":"StockScreenClaude-3z5.6.3","type":"parent-child","created_at":"2026-02-28T01:16:14.064906+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.7","title":"XR2-WS6 Diagnostics Observability and Security Guardrails","description":"Provide doctor checks, debug artifacts, structured logging, and secret-safe observability controls for rapid incident triage.","design":"Given UI volatility, fast diagnosis is essential; observability must be rich enough to debug while never exposing sensitive session material.","acceptance_criteria":"doctor and debug outputs are actionable, redacted, and consistent with strict storage-state secrecy requirements.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:03.117155+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:03.117155+08:00","labels":["diagnostics","security","workstream","ws6","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.7","depends_on_id":"StockScreenClaude-3z5","type":"parent-child","created_at":"2026-02-28T01:16:03.119357+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.7","depends_on_id":"StockScreenClaude-3z5.2","type":"blocks","created_at":"2026-02-28T01:21:00.781153+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.7","depends_on_id":"StockScreenClaude-3z5.3","type":"blocks","created_at":"2026-02-28T01:21:00.958987+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.7","depends_on_id":"StockScreenClaude-3z5.5","type":"blocks","created_at":"2026-02-28T01:21:01.1432+08:00","created_by":"David Ten"}],"comments":[{"id":203,"issue_id":"StockScreenClaude-3z5.7","author":"David Ten","text":"Intent: Shorten diagnosis time while maintaining zero secret leakage.\nFuture-self note: Debug convenience must never override redaction rules or storage-state privacy boundaries.","created_at":"2026-02-27T17:16:04Z"}]}
{"id":"StockScreenClaude-3z5.7.1","title":"XR2-WS6-T1 Implement doctor preflight and bounded smoke checks","description":"Implement doctor command checks for config auth storage and bounded list/user smoke runs.","design":"Doctor should quickly discriminate config/auth/selector problems for operators.","acceptance_criteria":"doctor returns structured pass/fail sections and captures failure context without unsafe behavior.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:14.348543+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:14.348543+08:00","labels":["doctor","ws6","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.7.1","depends_on_id":"StockScreenClaude-3z5.7","type":"parent-child","created_at":"2026-02-28T01:16:14.350275+08:00","created_by":"David Ten"}],"comments":[{"id":223,"issue_id":"StockScreenClaude-3z5.7.1","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:08Z"}]}
{"id":"StockScreenClaude-3z5.7.1.1","title":"XR2-WS6-T1.1 Add doctor source-selection fallback rules","description":"Define behavior when no configured sources exist or sources are disabled.","design":"Doctor must remain useful in partially configured environments.","acceptance_criteria":"doctor emits actionable guidance instead of hard failure when optional smoke sources are unavailable.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:14.621351+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:14.621351+08:00","labels":["subtask","ws6","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.7.1.1","depends_on_id":"StockScreenClaude-3z5.7.1","type":"parent-child","created_at":"2026-02-28T01:16:14.622598+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.7.2","title":"XR2-WS6-T2 Implement debug artifact capture and selector reports","description":"Capture screenshots constrained HTML snippets and selector match reports on failures.","design":"Artifacts are required for diagnosing selector drift and navigation failures.","acceptance_criteria":"Failure artifacts are written to profile paths with deterministic naming and run linkage.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:14.888694+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:14.888694+08:00","labels":["artifacts","ws6","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.7.2","depends_on_id":"StockScreenClaude-3z5.7","type":"parent-child","created_at":"2026-02-28T01:16:14.889996+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.7.2","depends_on_id":"StockScreenClaude-3z5.7.1","type":"blocks","created_at":"2026-02-28T01:21:04.541684+08:00","created_by":"David Ten"}],"comments":[{"id":224,"issue_id":"StockScreenClaude-3z5.7.2","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:08Z"}]}
{"id":"StockScreenClaude-3z5.7.2.1","title":"XR2-WS6-T2.1 Enforce redaction and raw-html opt-in controls","description":"Apply redaction to logs/reports and gate full HTML capture behind explicit opt-in.","design":"Secret-safe diagnostics are mandatory for safe operation.","acceptance_criteria":"No credential-bearing or storage-state content is persisted in default debug artifacts.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:15.162817+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:15.162817+08:00","labels":["security","subtask","ws6","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.7.2.1","depends_on_id":"StockScreenClaude-3z5.7.2","type":"parent-child","created_at":"2026-02-28T01:16:15.164315+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.7.3","title":"XR2-WS6-T3 Implement structured debug logs and run counters","description":"Implement optional JSONL debug logging with counters for page loads scrolls seen/emitted and source outcomes.","design":"Consistent telemetry enables regression analysis without external telemetry services.","acceptance_criteria":"Debug logs are machine-parseable, redacted, and include run/source correlation fields.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:15.431482+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:15.431482+08:00","labels":["logging","observability","ws6","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.7.3","depends_on_id":"StockScreenClaude-3z5.7","type":"parent-child","created_at":"2026-02-28T01:16:15.432698+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.7.3","depends_on_id":"StockScreenClaude-3z5.7.1","type":"blocks","created_at":"2026-02-28T01:28:25.998742+08:00","created_by":"David Ten"}],"comments":[{"id":225,"issue_id":"StockScreenClaude-3z5.7.3","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:08Z"},{"id":232,"issue_id":"StockScreenClaude-3z5.7.3","author":"David Ten","text":"Planning refinement: changed dependency from WS6-T2 to WS6-T1. Log schema/counters can be implemented in parallel with artifact capture, reducing time-to-observability for debugging.","created_at":"2026-02-27T17:28:26Z"}]}
{"id":"StockScreenClaude-3z5.7.3.1","title":"XR2-WS6-T3.1 Define log event schema and compatibility policy","description":"Specify event schema and versioning expectations for local log consumers.","design":"Schema drift can break local automation; explicit policy reduces surprises.","acceptance_criteria":"Schema version field and backwards-compatibility notes are documented and tested.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:15.717195+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:15.717195+08:00","labels":["subtask","ws6","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.7.3.1","depends_on_id":"StockScreenClaude-3z5.7.3","type":"parent-child","created_at":"2026-02-28T01:16:15.718627+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.8","title":"XR2-WS7 Test Matrix Packaging and Release Hardening","description":"Build unit/snapshot/live-gated tests, package metadata, install smoke checks, and release readiness documentation.","design":"Without durable tests and packaging verification, selector and checkpoint regressions will silently leak into production workflows.","acceptance_criteria":"Comprehensive regression gates exist and release artifacts are reproducible with clear operator-facing setup instructions.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:03.37702+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:03.37702+08:00","labels":["release","testing","workstream","ws7","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.8","depends_on_id":"StockScreenClaude-3z5","type":"parent-child","created_at":"2026-02-28T01:16:03.379886+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.8","depends_on_id":"StockScreenClaude-3z5.4","type":"blocks","created_at":"2026-02-28T01:21:01.322698+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.8","depends_on_id":"StockScreenClaude-3z5.5","type":"blocks","created_at":"2026-02-28T01:21:01.520996+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.8","depends_on_id":"StockScreenClaude-3z5.6","type":"blocks","created_at":"2026-02-28T01:21:01.732795+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.8","depends_on_id":"StockScreenClaude-3z5.7","type":"blocks","created_at":"2026-02-28T01:21:01.934981+08:00","created_by":"David Ten"}],"comments":[{"id":204,"issue_id":"StockScreenClaude-3z5.8","author":"David Ten","text":"Intent: Prevent regressions and ensure package consumers can install/run reliably.\nFuture-self note: When deadlines compress, do not skip snapshot and unit coverage around extractor/checkpoint behavior.","created_at":"2026-02-27T17:16:04Z"}]}
{"id":"StockScreenClaude-3z5.8.1","title":"XR2-WS7-T1 Build unit tests for scheduler budgets checkpoints and brakes","description":"Implement unit tests for shutdown parsing budget resets checkpoint transitions and natural-brake stop logic.","design":"These deterministic tests catch the highest-impact logic regressions early.","acceptance_criteria":"Unit suite covers critical branch cases and runs quickly in local and CI loops.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:16.008605+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:16.008605+08:00","labels":["tests","unit","ws7","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.8.1","depends_on_id":"StockScreenClaude-3z5.8","type":"parent-child","created_at":"2026-02-28T01:16:16.009747+08:00","created_by":"David Ten"}],"comments":[{"id":226,"issue_id":"StockScreenClaude-3z5.8.1","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:09Z"}]}
{"id":"StockScreenClaude-3z5.8.1.1","title":"XR2-WS7-T1.1 Add deterministic time-control test utilities","description":"Create helper utilities for deterministic local-time and daily-boundary assertions.","design":"Time-sensitive tests must be stable across environments.","acceptance_criteria":"Time-control helpers are reused across scheduler and budget tests with no flakiness.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:16.262268+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:16.262268+08:00","labels":["subtask","tests","ws7","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.8.1.1","depends_on_id":"StockScreenClaude-3z5.8.1","type":"parent-child","created_at":"2026-02-28T01:16:16.263638+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.8.2","title":"XR2-WS7-T2 Build snapshot tests for extractor selector drift","description":"Create sanitized HTML snapshot fixtures covering extraction of ids handles times and text fields.","design":"Snapshot coverage catches UI drift before production breakage.","acceptance_criteria":"Snapshot tests detect selector regressions and provide readable diffs.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:16.510057+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:16.510057+08:00","labels":["snapshots","tests","ws7","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.8.2","depends_on_id":"StockScreenClaude-3z5.8","type":"parent-child","created_at":"2026-02-28T01:16:16.511166+08:00","created_by":"David Ten"}],"comments":[{"id":227,"issue_id":"StockScreenClaude-3z5.8.2","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:09Z"},{"id":233,"issue_id":"StockScreenClaude-3z5.8.2","author":"David Ten","text":"Planning refinement: removed sequential dependency on WS7-T1 so snapshot fixture hardening can run in parallel with unit test development.","created_at":"2026-02-27T17:28:26Z"}]}
{"id":"StockScreenClaude-3z5.8.2.1","title":"XR2-WS7-T2.1 Implement fixture sanitization pipeline","description":"Build fixture sanitizer to remove sensitive data while preserving DOM structure for parser tests.","design":"Sanitization allows sharing fixtures safely within repo history.","acceptance_criteria":"Fixtures contain no secrets/PII and remain representative for extractor behavior.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:16.759577+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:16.759577+08:00","labels":["subtask","tests","ws7","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.8.2.1","depends_on_id":"StockScreenClaude-3z5.8.2","type":"parent-child","created_at":"2026-02-28T01:16:16.760948+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.8.3","title":"XR2-WS7-T3 Finalize packaging install smoke and release docs","description":"Finalize pyproject metadata Playwright install guidance and release-readiness checklist for v2 milestones.","design":"Packaging/readme quality determines adoption and support burden.","acceptance_criteria":"Package installs cleanly and release checklist documents v2.0 v2.1 v2.2 acceptance gates.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:17.00698+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:17.00698+08:00","labels":["packaging","release","ws7","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.8.3","depends_on_id":"StockScreenClaude-3z5.8","type":"parent-child","created_at":"2026-02-28T01:16:17.008181+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.8.3","depends_on_id":"StockScreenClaude-3z5.8.2","type":"blocks","created_at":"2026-02-28T01:21:05.158269+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.8.3","depends_on_id":"StockScreenClaude-3z5.8.1","type":"blocks","created_at":"2026-02-28T01:28:26.657+08:00","created_by":"David Ten"}],"comments":[{"id":228,"issue_id":"StockScreenClaude-3z5.8.3","author":"David Ten","text":"Implementation note: Treat this node as a contract boundary, not a one-off code patch.\nReasoning: downstream tasks and parallel workstreams assume stable behavior here, so include tests/docs updates in the same PR whenever possible.\nFuture-self checklist: before closing, verify alignment with Section 20 workstream intent, update dependency edges if sequencing changed, and record any tradeoff made for speed vs resilience.","created_at":"2026-02-27T17:21:09Z"},{"id":234,"issue_id":"StockScreenClaude-3z5.8.3","author":"David Ten","text":"Planning refinement: release packaging/docs now depend on both unit and snapshot tracks to preserve quality gates while allowing earlier parallel progress.","created_at":"2026-02-27T17:28:27Z"}]}
{"id":"StockScreenClaude-3z5.8.3.1","title":"XR2-WS7-T3.1 Add release gate checklist and operator handoff notes","description":"Document final release gates rollback notes and operator runbook pointers.","design":"Explicit handoff material reduces operational ambiguity post-release.","acceptance_criteria":"Release notes template and operator handoff checklist are committed and reviewable.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:16:17.310297+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:16:17.310297+08:00","labels":["docs","subtask","ws7","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.8.3.1","depends_on_id":"StockScreenClaude-3z5.8.3","type":"parent-child","created_at":"2026-02-28T01:16:17.311752+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-3z5.9","title":"XR2-CP1 Deliver first user-visible value with end-to-end list read","description":"Run a vertical-slice milestone that proves a real user can login, read one list, and receive stable pretty/json outputs with new-only semantics.","design":"This checkpoint intentionally lands before full hardening to validate assumptions with real usage and reduce risk of late architectural correction.","acceptance_criteria":"auth login plus list read and new-only path work end-to-end on at least one real source with expected output formats and bounded runtime.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-28T01:29:34.762173+08:00","created_by":"David Ten","updated_at":"2026-02-28T01:29:34.762173+08:00","labels":["checkpoint","mvp","user-value","xui-reader-v2"],"dependencies":[{"issue_id":"StockScreenClaude-3z5.9","depends_on_id":"StockScreenClaude-3z5","type":"parent-child","created_at":"2026-02-28T01:29:34.764034+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.9","depends_on_id":"StockScreenClaude-3z5.1.2","type":"blocks","created_at":"2026-02-28T01:29:34.970264+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.9","depends_on_id":"StockScreenClaude-3z5.2.2","type":"blocks","created_at":"2026-02-28T01:29:35.159295+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.9","depends_on_id":"StockScreenClaude-3z5.3.3","type":"blocks","created_at":"2026-02-28T01:29:35.38096+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.9","depends_on_id":"StockScreenClaude-3z5.4.2","type":"blocks","created_at":"2026-02-28T01:29:35.573774+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-3z5.9","depends_on_id":"StockScreenClaude-3z5.5.2","type":"blocks","created_at":"2026-02-28T01:29:35.765876+08:00","created_by":"David Ten"}],"comments":[{"id":235,"issue_id":"StockScreenClaude-3z5.9","author":"David Ten","text":"Why this exists: users care about first successful value, not internal phase completion. This checkpoint creates an explicit moment to test real operator workflow early and tune ergonomics before deeper feature build-out.","created_at":"2026-02-27T17:29:35Z"}]}
{"id":"StockScreenClaude-42l","title":"Add reprocessing step to pipeline tasks and API","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-19T23:49:26.857868+08:00","created_by":"David Ten","updated_at":"2026-02-19T23:53:04.786068+08:00","closed_at":"2026-02-19T23:53:04.786068+08:00","close_reason":"Added reprocess_failed_themes task, updated run_full_pipeline to 5 steps, updated API layer with reprocessing_result and failed-count endpoint","dependencies":[{"issue_id":"StockScreenClaude-42l","depends_on_id":"StockScreenClaude-jvu","type":"blocks","created_at":"2026-02-19T23:49:32.811262+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-47f","title":"T5: Add structured universe columns to Scan model","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:49:03.557839+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:23.771622+08:00","closed_at":"2026-02-16T14:58:23.771622+08:00","close_reason":"Implemented in universe unification session","dependencies":[{"issue_id":"StockScreenClaude-47f","depends_on_id":"StockScreenClaude-eeh","type":"blocks","created_at":"2026-02-16T14:50:03.053308+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-4g6","title":"C2: Rewrite Celery run_bulk_scan task as thin wrapper","description":"## What\nRewrite the Celery task to be a thin wrapper that calls RunBulkScanUseCase.\n\n## Current State (backend/app/tasks/scan_tasks.py)\n~1120 lines of mixed Celery + business logic.\n\n## Target State\nThe task becomes ~30-50 lines:\n1. Open UoW (session)\n2. Create CancellationToken (checks Celery revoke state)\n3. Create ProgressSink (updates Celery task state for polling)\n4. Call RunBulkScanUseCase.execute(scan_id, correlation_id, cancellation_token)\n5. Return result summary\n\n## Files to Modify\n- backend/app/tasks/scan_tasks.py — Replace run_bulk_scan implementation\n\n## Files to Create\n- backend/app/interfaces/tasks/scan_tasks.py — New thin task (eventually replaces old one)\n- backend/app/infra/celery_progress_sink.py — ProgressSink adapter that updates Celery task meta\n- backend/app/infra/celery_cancellation_token.py — CancellationToken that checks task.is_revoked()\n\n## Migration Strategy\nUse strangler pattern: new task calls use case, old code stays until verified.\nCan use a feature flag (env var) to switch between old and new path during testing.\n\n## Acceptance Criteria\n- Task file contains NO business rules (only wiring + Celery state management)\n- Task is safe to retry without duplicating results\n- Progress polling still works for frontend\n- All existing scan functionality preserved\n\n## Depends On\n- C1 (RunBulkScanUseCase must exist)","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:02:19.171587+08:00","created_by":"David Ten","updated_at":"2026-02-17T10:27:03.820962+08:00","closed_at":"2026-02-17T10:27:03.820962+08:00","close_reason":"Feature flag flipped to True (use-case path is default). Added 17 unit tests for CeleryProgressSink and DbCancellationToken infra adapters, plus strangler gate verification. All 42 tests pass.","dependencies":[{"issue_id":"StockScreenClaude-4g6","depends_on_id":"StockScreenClaude-5pd","type":"blocks","created_at":"2026-02-17T00:08:10.65459+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-4q6","title":"Implement ExportScanResultsUseCase","description":"Extract export endpoint into clean architecture use case with full filter support","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-17T14:10:16.037992+08:00","created_by":"David Ten","updated_at":"2026-02-17T14:15:11.478403+08:00","closed_at":"2026-02-17T14:15:11.478403+08:00","close_reason":"Implemented ExportScanResultsUseCase with full FilterSpec support, 30 unit tests all passing, zero regressions in 55 existing tests"}
{"id":"StockScreenClaude-4yt","title":"Unify all price refresh triggers to use full stock universe","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-19T10:25:56.262732+08:00","created_by":"David Ten","updated_at":"2026-02-19T10:43:39.058488+08:00","closed_at":"2026-02-19T10:43:39.058488+08:00","close_reason":"Implemented full universe coverage for all refresh triggers with staleness-aware skipping"}
{"id":"StockScreenClaude-5gg","title":"SE-E2: Integrate Stage/MA/RS context analyzers into scanner flow","status":"closed","priority":1,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-22T12:56:58.378944+08:00","created_by":"David Ten","updated_at":"2026-02-22T13:19:27.130643+08:00","closed_at":"2026-02-22T13:19:27.130643+08:00","close_reason":"Implemented: 3 new context gates (stage, MA alignment, RS rating), 2 new params, 3 new payload fields, all tests green"}
{"id":"StockScreenClaude-5pd","title":"C1: Create RunBulkScanUseCase with progress, cancellation, checkpointing","description":"## What\nCreate the use case that contains all scan execution business logic, extracted from the current Celery task file.\n\n## Current State (backend/app/tasks/scan_tasks.py, ~1120 lines)\nThe run_bulk_scan Celery task currently handles:\n- Loading Scan record from DB\n- Resolving universe symbols\n- Updating scan status/progress in DB\n- Running batch orchestration (chunked)\n- Persisting scan results\n- Cleanup and retention policies\nAll mixed with Celery-specific state updates and error handling.\n\n## Files to Create\n- backend/app/use_cases/scanning/run_bulk_scan.py — RunBulkScanUseCase class\n\n## RunBulkScanUseCase.execute(scan_id, correlation_id, cancellation_token) should:\n1. Load Scan record via ScanRepository port\n2. Resolve universe symbols via UniverseRepository port\n3. Update scan status to 'running' via ScanRepository\n4. Emit ProgressEvents via ProgressSink port (append-only timeline)\n5. Process symbols in chunks:\n   a. Check cancellation_token between chunks\n   b. Save checkpoint after each chunk (for resumability)\n   c. Call orchestrator (domain) with pre-fetched data\n6. Persist results via ScanResultRepository port\n7. Update scan status to 'completed' with final stats\n8. Handle errors: update status to 'failed' with error details\n\n## Ports Required (add to domain/scanning/ports.py)\n- ScanRepository: create, get, update_status\n- ScanResultRepository: bulk_upsert, query_results\n- UniverseRepository: resolve_symbols\n- ProgressSink: emit(ProgressEvent)\n- CancellationToken: is_cancelled() -\u003e bool\n\n## Key Design Principle\nThe use case orchestrates the WORKFLOW but contains no IO code. All IO goes through ports. This means:\n- Unit-testable with fake repos (no DB, no Redis, no Celery)\n- Retry-safe: checkpointing ensures no duplicate work on resume\n- Celery-agnostic: could be called from CLI, API, or test\n\n## Acceptance Criteria\n- Use case handles full scan lifecycle (create → running → completed/failed)\n- Progress events emitted at meaningful milestones\n- Cancellation checked between chunks\n- Checkpoint save/restore prevents duplicate processing on retry\n- Zero Celery imports in this file\n- Unit test with fake repos covers happy path + cancellation + resume\n\n## Depends On\n- B3 (port-based orchestrator)\n- A3 (CreateScanUseCase pattern established)","status":"closed","priority":1,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:02:11.007226+08:00","created_by":"David Ten","updated_at":"2026-02-17T09:06:02.951259+08:00","closed_at":"2026-02-17T09:06:02.951259+08:00","close_reason":"Implemented RunBulkScanUseCase with ports, infra adapters, and 15 unit tests","dependencies":[{"issue_id":"StockScreenClaude-5pd","depends_on_id":"StockScreenClaude-7yl","type":"blocks","created_at":"2026-02-17T00:08:09.985096+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-5pd","depends_on_id":"StockScreenClaude-ban","type":"blocks","created_at":"2026-02-17T00:08:10.334731+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-5pe","title":"T12: Update retention cleanup to use universe_key","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:49:25.381418+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:24.08469+08:00","closed_at":"2026-02-16T14:58:24.08469+08:00","close_reason":"Implemented in universe unification session","dependencies":[{"issue_id":"StockScreenClaude-5pe","depends_on_id":"StockScreenClaude-47f","type":"blocks","created_at":"2026-02-16T14:50:32.705718+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-5pe","depends_on_id":"StockScreenClaude-bkd","type":"blocks","created_at":"2026-02-16T14:50:33.02816+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-5rl","title":"Add Smart Refresh Celery Task","description":"Add smart_refresh_cache(mode) task with SPY-first fetching and market cap prioritization. Supports auto (cached symbols) and full (entire universe) modes. Includes heartbeat updates for stuck detection.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-05T15:01:07.274244+08:00","created_by":"David Ten","updated_at":"2026-02-05T15:09:28.201251+08:00","closed_at":"2026-02-05T15:09:28.201251+08:00","close_reason":"Added smart_refresh_cache(mode) task with SPY-first fetching, market cap prioritization, and heartbeat updates"}
{"id":"StockScreenClaude-65k","title":"T5: Provider contract tests — retry, partial failure, rate limits","description":"## What\nWrite contract tests for the StockDataProvider adapter to verify it handles upstream failures correctly without flakiness.\n\n## Files to Create\n- backend/tests/unit/infra/test_stock_data_provider.py\n\n## Test Cases\n- Retry with backoff: provider retries transient failures with jittered backoff\n- allow_partial=True: returns data for successful symbols, marks failures (doesn't crash)\n- allow_partial=False: raises on any failure\n- Rate limit enforcement: verify throttle point limits request rate\n- Timeout handling: long-running requests don't block forever\n- Missing data: structured 'missing inputs' returned, not exceptions\n\n## Test Strategy\nUse stub/recorded responses (not live API calls) to ensure:\n- Tests are fast and deterministic\n- No rate limit consumption\n- Specific failure modes can be triggered reliably\n\n## Acceptance Criteria\n- All failure modes tested without hitting real APIs\n- Rate limit enforcement verified (timing-based or counter-based)\n- Partial failure semantics verified\n- Tests run in \u003c5 seconds\n\n## Depends On\n- B3 (StockDataProvider port and adapter must exist)","status":"closed","priority":3,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:06:09.361318+08:00","created_by":"David Ten","updated_at":"2026-02-17T17:22:06.52792+08:00","closed_at":"2026-02-17T17:22:06.52792+08:00","close_reason":"Implemented retry with backoff, allow_partial toggle, DataFetchError, and 24 contract tests. All 304 unit tests pass.","dependencies":[{"issue_id":"StockScreenClaude-65k","depends_on_id":"StockScreenClaude-7yl","type":"blocks","created_at":"2026-02-17T00:08:12.934603+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-6dx","title":"G4: Add feature-store-native endpoints (runs list, explain, compare)","description":"## What\nAdd new API endpoints that expose Feature Store capabilities not available in the legacy scan API. These are compelling features that justify the refactor.\n\n## Endpoints to Create\n\n### GET /api/v1/features/runs\n- List all feature runs with status, DQ summary, publish state\n- Useful for monitoring and admin dashboards\n- Shows: as_of_date, status, row_count, publish time, DQ warnings\n\n### GET /api/v1/scans/{scan_id}/explain/{symbol}\n- Detailed pass/fail breakdown for a specific stock\n- Per-screener criterion results\n- Composite score contribution from each screener\n- Rating threshold explanation\n- Uses ExplainStockUseCase (D6)\n\n### GET /api/v1/features/compare?run_a=...\u0026run_b=...\n- Compare two feature runs to find movers\n- Returns: symbols with biggest score/rating changes\n- Useful for tracking day-over-day changes\n\n## Files to Create\n- backend/app/use_cases/feature_store/compare_runs.py — CompareFeatureRunsUseCase\n- backend/app/interfaces/api/v1/features.py — New router for feature store endpoints\n\n## Files to Modify\n- backend/app/api/v1/scans.py — Add explain endpoint\n- backend/app/main.py — Register new features router\n\n## Acceptance Criteria\n- All three endpoints working with proper error handling\n- Runs list shows accurate status and DQ info\n- Compare shows meaningful movers (score deltas, rating changes)\n- Explain provides actionable per-criterion breakdown\n\n## Depends On\n- G2 (dual-source query established)","status":"closed","priority":3,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:05:31.174187+08:00","created_by":"David Ten","updated_at":"2026-02-18T23:06:15.633341+08:00","closed_at":"2026-02-18T23:06:15.633341+08:00","close_reason":"All 3 endpoints implemented: runs list, explain, compare. 35 unit tests, 387 existing tests pass.","dependencies":[{"issue_id":"StockScreenClaude-6dx","depends_on_id":"StockScreenClaude-78r","type":"blocks","created_at":"2026-02-17T00:08:11.510179+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-6i8","title":"Refactor CacheStatus Component","description":"Replace 3 price elements with single Cache chip. Handle 6 states with appropriate colors/icons. Add dropdown for Full Refresh. Implement dynamic polling and completion notifications.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-05T15:01:13.213356+08:00","created_by":"David Ten","updated_at":"2026-02-05T15:11:54.009022+08:00","closed_at":"2026-02-05T15:11:54.009022+08:00","close_reason":"Refactored CacheStatus to use unified cache health endpoint with 6 states, dropdown menu, dynamic polling, and completion notifications","dependencies":[{"issue_id":"StockScreenClaude-6i8","depends_on_id":"StockScreenClaude-0rg","type":"blocks","created_at":"2026-02-05T15:02:51.540535+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-6i8","depends_on_id":"StockScreenClaude-k92","type":"blocks","created_at":"2026-02-05T15:02:51.757012+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-6i8","depends_on_id":"StockScreenClaude-c6b","type":"blocks","created_at":"2026-02-05T15:02:51.96787+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-6of","title":"EPIC-G: Feature Store Switch — Bind Scans, Dual-Source Query, New Endpoints","description":"Switch scan results endpoints to read from the Feature Store instead of computing per-request. Adds Scan.feature_run_id binding, dual-source query logic (feature store when bound, legacy fallback), migrates ancillary endpoints, and adds new feature-store-native endpoints (runs list, explain, compare). Corresponds to Phase G of the v3 architecture plan.","status":"closed","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-16T23:59:08.757528+08:00","created_by":"David Ten","updated_at":"2026-02-19T12:05:34.716612+08:00","closed_at":"2026-02-19T12:05:34.716612+08:00","close_reason":"All deliverables complete: Scan.feature_run_id FK, dual-source routing in 6 use cases, /features/runs and /features/compare endpoints"}
{"id":"StockScreenClaude-6pr","title":"Add per-symbol delay to fetch_batch_data()","description":"Add configurable delay_per_ticker (default 0.2s) between ticker.history() calls in fetch_batch_data()","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T08:11:49.009185+08:00","created_by":"David Ten","updated_at":"2026-02-19T08:14:05.142684+08:00","closed_at":"2026-02-19T08:14:05.142684+08:00","close_reason":"Added delay_per_ticker param to fetch_batch_data(); wired into _fetch_with_backoff and warm_price_cache callers"}
{"id":"StockScreenClaude-6re","title":"Fix silent LLM failure masking in extract_from_content()","status":"closed","priority":1,"issue_type":"bug","owner":"davidten7@gmail.com","created_at":"2026-02-19T23:49:24.38321+08:00","created_by":"David Ten","updated_at":"2026-02-19T23:49:53.234688+08:00","closed_at":"2026-02-19T23:49:53.234688+08:00","close_reason":"Re-raised non-JSON exceptions in extract_from_content() so process_batch() error handler properly sets extraction_error"}
{"id":"StockScreenClaude-6u7","title":"Add rate-limit backoff to fetch_batch_fundamentals()","description":"Track rate-limit failures per batch. If \u003e50% have rate-limit errors, apply exponential backoff.","status":"closed","priority":3,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T08:11:53.708937+08:00","created_by":"David Ten","updated_at":"2026-02-19T08:15:33.410828+08:00","closed_at":"2026-02-19T08:15:33.410828+08:00","close_reason":"Added batch-level rate limit detection and exponential backoff (60s-480s) to fetch_batch_fundamentals()"}
{"id":"StockScreenClaude-74o","title":"B2: Define domain types — ScanConfig, ScreenerOutput, ScanResultItem","description":"## What\nCreate domain-layer data types that represent scanning concepts independent of DB schema or API format.\n\n## Files to Create\n- backend/app/domain/scanning/models.py containing:\n\n  @dataclass ScanConfig:\n    screeners: list[ScreenerName]\n    composite_method: CompositeMethod  # enum: weighted_average, maximum, minimum\n    criteria: dict  # screener-specific criteria\n    universe: UniverseDefinition\n    weights: dict[ScreenerName, float] | None\n\n  @dataclass ScreenerOutput:\n    screener: ScreenerName\n    score: float\n    passes: bool\n    rating: int\n    breakdown: dict  # per-criterion pass/fail details\n    details: dict  # additional data (e.g., RS rating value)\n\n  @dataclass ScanResultItemDomain:\n    symbol: str\n    composite_score: float\n    overall_rating: int\n    screener_outputs: dict[ScreenerName, ScreenerOutput]\n    passes_count: int\n    total_screeners: int\n\n  class ScreenerName(str, Enum): minervini, canslim, ipo, volume_breakthrough, custom\n\n  class CompositeMethod(str, Enum): weighted_average, maximum, minimum\n\n- backend/app/domain/scanning/filter_spec.py:\n  @dataclass FilterSpec — pure filter representation (field, op, value)\n  @dataclass SortSpec — (field, direction)\n  @dataclass PagingSpec — (offset, limit)\n\n## Why\nDomain types decouple business logic from SQLAlchemy models and Pydantic schemas. The same ScanResultItemDomain can be produced by online scan OR feature store query — the consumer doesn't care about the source.\n\n## Acceptance Criteria\n- All types are pure dataclasses/enums with no IO imports\n- Types pass boundary test (domain-only imports)\n- Types can represent all current scan result fields\n\n## Depends On\n- A2 (for integration with wiring), A1 implicitly","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:01:33.159963+08:00","created_by":"David Ten","updated_at":"2026-02-17T07:18:53.866718+08:00","closed_at":"2026-02-17T07:18:53.866718+08:00","close_reason":"Created models.py (4 enums, 5 dataclasses) and filter_spec.py (2 enums, 4 filter types, 4 spec types). 57 boundary tests all passing.","dependencies":[{"issue_id":"StockScreenClaude-74o","depends_on_id":"StockScreenClaude-7lw","type":"blocks","created_at":"2026-02-17T00:08:10.659086+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-78r","title":"G2: Update GetScanResultsUseCase for dual-source query (feature store + legacy)","description":"## What\nUpdate GetScanResultsUseCase to read from Feature Store when the scan is bound to a feature run, falling back to legacy scan_results for unbound scans.\n\n## Files to Modify\n- backend/app/use_cases/scanning/get_scan_results.py — Add dual-source logic:\n\n  def execute(scan_id, filter_spec, sort_spec, paging_spec):\n    scan = scan_repo.get(scan_id)\n    if scan.feature_run_id:\n      # Query feature store\n      return feature_store_repo.query_run(scan.feature_run_id, filter_spec, sort_spec, paging_spec)\n    else:\n      # Legacy path: query scan_results table\n      return scan_result_repo.query_results(scan_id, filter_spec, sort_spec, paging_spec)\n\n## Files to Create/Modify\n- backend/app/infra/query/feature_store_query_sqlalchemy.py — Query builder for stock_feature_daily table\n  - Must support same FilterSpec fields as legacy query builder\n  - JSON extraction for details_json fields\n\n## Key Consideration\nBoth paths must return the same domain type (Page[ScanResultItemDomain]) so the router doesn't know or care about the source. This is the Liskov Substitution Principle in action.\n\n## Acceptance Criteria\n- Bound scans query feature store\n- Unbound scans query legacy scan_results\n- Same response format regardless of source\n- No breaking API changes\n- Performance: feature store queries should be faster (pre-indexed, no JSON parsing in hot path)\n\n## Depends On\n- G1 (Scan.feature_run_id must exist)\n- D1 (GetScanResultsUseCase must exist)\n- E3 (FeatureStoreRepository must exist)","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:04:41.289254+08:00","created_by":"David Ten","updated_at":"2026-02-18T12:30:20.200853+08:00","closed_at":"2026-02-18T12:30:20.200853+08:00","close_reason":"All 6 acceptance criteria met. Implemented dual-source query routing in GetScanResultsUseCase with 16 unit + 14 integration tests passing. Commit 5a1c5b57.","dependencies":[{"issue_id":"StockScreenClaude-78r","depends_on_id":"StockScreenClaude-ile","type":"blocks","created_at":"2026-02-17T00:08:10.328863+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-78r","depends_on_id":"StockScreenClaude-iai","type":"blocks","created_at":"2026-02-17T00:08:10.65599+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-78r","depends_on_id":"StockScreenClaude-rwf","type":"blocks","created_at":"2026-02-17T00:08:10.945673+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-7lw","title":"A2: Add wiring/bootstrap.py dependency injection graph","description":"## What\nCreate the dependency injection bootstrap module that wires together repositories, providers, and use cases. This is the single place where concrete implementations are bound to abstract ports.\n\n## Files to Create\n- backend/app/wiring/bootstrap.py\n\n## Implementation Details\nbootstrap.py should provide:\n- get_uow() -\u003e UnitOfWork factory (wraps SessionLocal)\n- get_scan_repo() -\u003e ScanRepository (SQLAlchemy impl)\n- get_scan_result_repo() -\u003e ScanResultRepository\n- get_universe_repo() -\u003e UniverseRepository\n- get_stock_data_provider() -\u003e StockDataProvider (DataPreparationLayer adapter)\n- get_create_scan_use_case() -\u003e CreateScanUseCase (wired with repos)\n\nUse FastAPI's Depends() integration pattern so routers can inject use cases.\n\n## Also Create\n- backend/app/infra/db/uow.py — UnitOfWork class wrapping SQLAlchemy session lifecycle\n\n## Why\nCentralizing wiring prevents each module from importing concrete implementations directly. This is what makes the port/adapter pattern actually work — you swap implementations in ONE place.\n\n## Acceptance Criteria\n- bootstrap.py can instantiate all registered use cases\n- UnitOfWork properly manages session lifecycle (commit/rollback)\n- FastAPI Depends() integration works for router injection\n- No changes to existing behavior\n\n## Depends On\n- A1 (package structure must exist)","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T23:59:53.417027+08:00","created_by":"David Ten","updated_at":"2026-02-17T06:33:19.067016+08:00","closed_at":"2026-02-17T06:33:19.067016+08:00","close_reason":"Bootstrap module, UoW, ports, 3 repos, 1 provider adapter all created. Boundary tests pass. FastAPI Depends() pattern verified.","dependencies":[{"issue_id":"StockScreenClaude-7lw","depends_on_id":"StockScreenClaude-7tx","type":"blocks","created_at":"2026-02-17T00:08:09.676831+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-7lw","depends_on_id":"StockScreenClaude-nrv","type":"blocks","created_at":"2026-02-17T17:37:22.137862+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-7o7","title":"SE-E7: Invalidation flag plumbing and operational checks","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-22T14:29:45.379078+08:00","created_by":"David Ten","updated_at":"2026-02-22T14:39:58.546067+08:00","closed_at":"2026-02-22T14:39:58.546067+08:00","close_reason":"All 8 steps implemented: usd unit, 4 params+specs, _compute_context plumbing, operational_flags.py, scanner wiring, frontend display+severity, fixtures, 84 tests passing"}
{"id":"StockScreenClaude-7t6","title":"D2: Create GetFilterOptionsUseCase","description":"## What\nExtract filter options endpoint logic into a use case.\n\n## Current State\nThe filter-options endpoint in scans.py queries distinct values from scan_results for dropdown population (sectors, industries, screener names, etc.).\n\n## Files to Create\n- backend/app/use_cases/scanning/get_filter_options.py — GetFilterOptionsUseCase\n  - Input: scan_id\n  - Output: FilterOptions dataclass (sectors, industries, exchanges, etc.)\n  - Uses ScanResultRepository port\n\n## Acceptance Criteria\n- Returns same filter option values as current endpoint\n- Router is thin wrapper\n- Works with both legacy scan_results and (future) feature store\n\n## Depends On\n- D1 (establishes query patterns and ScanResultRepository)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:02:34.050336+08:00","created_by":"David Ten","updated_at":"2026-02-17T11:57:07.311386+08:00","closed_at":"2026-02-17T11:57:07.311386+08:00","close_reason":"Implemented GetFilterOptionsUseCase following D1 patterns: domain FilterOptions model, port abstract method, SqlScanResultRepository adapter, use case, bootstrap wiring, thin router endpoint. Updated all test fakes to satisfy new abstract method. 115 tests pass.","dependencies":[{"issue_id":"StockScreenClaude-7t6","depends_on_id":"StockScreenClaude-iai","type":"blocks","created_at":"2026-02-17T00:08:09.763661+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-7tb","title":"D6: Create ExplainStockUseCase (new feature — pass/fail breakdown)","description":"## What\nNEW FEATURE: Create a use case that explains why a stock passed or failed each screener, with per-criterion breakdown.\n\n## Design\n- backend/app/use_cases/scanning/explain_stock.py — ExplainStockUseCase\n  - Input: scan_id, symbol\n  - Output: StockExplanation dataclass containing:\n    - Per-screener pass/fail with individual criterion results\n    - Composite score breakdown (which screeners contributed what)\n    - Rating explanation (threshold that was met/missed)\n    - Key metrics that drove the result\n\n## Domain Types to Add\n- backend/app/domain/scanning/models.py — Add StockExplanation, CriterionResult dataclasses\n\n## Data Source\n- Legacy mode: reads from ScanResult.details JSON (already contains per-screener breakdown)\n- Feature store mode (future): reads from StockFeatureDaily.details_json\n\n## Why This Feature\nUsers currently see a composite score but can't understand WHY a stock scored a certain way. This 'explain' feature builds trust and helps users learn the screening methodology.\n\n## Acceptance Criteria\n- Returns per-screener pass/fail with criteria details\n- Works with existing scan results (legacy mode)\n- Designed to also work with feature store (future G-series)\n- Has unit test with fake repo\n\n## Depends On\n- D1 (establishes use case and repository patterns)","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:02:52.912574+08:00","created_by":"David Ten","updated_at":"2026-02-17T14:54:26.559257+08:00","closed_at":"2026-02-17T14:54:26.559257+08:00","close_reason":"Implemented ExplainStockUseCase with domain models and 16 unit tests, all passing","dependencies":[{"issue_id":"StockScreenClaude-7tb","depends_on_id":"StockScreenClaude-iai","type":"blocks","created_at":"2026-02-17T00:08:11.278262+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-7tx","title":"A1: Create layered architecture package structure + boundary checks","description":"ROOT TASK — no dependencies, start here.\n\n## What\nCreate the new package structure for the layered architecture and add enforceable import boundary checks.\n\n## Files to Create\n- backend/app/domain/__init__.py\n- backend/app/domain/common/__init__.py, errors.py, types.py\n- backend/app/domain/scanning/__init__.py\n- backend/app/domain/feature_store/__init__.py\n- backend/app/use_cases/__init__.py\n- backend/app/use_cases/scanning/__init__.py\n- backend/app/use_cases/feature_store/__init__.py\n- backend/app/infra/__init__.py\n- backend/app/infra/db/__init__.py\n- backend/app/infra/db/repositories/__init__.py\n- backend/app/infra/cache/__init__.py\n- backend/app/infra/providers/__init__.py\n- backend/app/infra/query/__init__.py\n- backend/app/interfaces/__init__.py\n- backend/app/interfaces/api/__init__.py\n- backend/app/interfaces/tasks/__init__.py\n- backend/app/wiring/__init__.py\n\n## Boundary Enforcement\nAdd tests/unit/test_layer_boundaries.py that checks:\n- domain/ imports ONLY domain/ and stdlib\n- use_cases/ imports domain/ + stdlib only (no infra/interfaces)\n- Fail on violation so CI catches drift\n\n## Acceptance Criteria\n- All packages importable with no errors\n- Boundary test passes (green)\n- No behavior change to existing application\n- Existing tests still pass","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T23:59:44.344475+08:00","created_by":"David Ten","updated_at":"2026-02-17T06:27:56.12475+08:00","closed_at":"2026-02-17T06:27:56.12475+08:00","close_reason":"All 17 packages created, boundary test passes (7/7), bug in AST checker fixed during review","dependencies":[{"issue_id":"StockScreenClaude-7tx","depends_on_id":"StockScreenClaude-nrv","type":"blocks","created_at":"2026-02-17T17:37:21.749901+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-7yl","title":"B3: Refactor orchestrator to depend on ports (StockDataProvider, screener registry)","description":"## What\nRefactor ScanOrchestrator so it depends on abstract ports (Protocols) instead of directly importing IO services. The orchestrator becomes a domain service that can be unit-tested with fake providers.\n\n## Current State (backend/app/scanners/scan_orchestrator.py, ~501 lines)\n- Constructor imports and instantiates DataPreparationLayer directly\n- Calls data prep methods that hit Redis cache + yfinance\n- Mixes pure scoring (composite/rating) with IO coordination (data fetch)\n\n## Target State\nOrchestrator constructor accepts:\n- stock_data_provider: StockDataProvider (port/Protocol)\n- screener_registry: dict[ScreenerName, BaseStockScreener]\n- composite_scorer: CompositeScorer (from B1)\n- rating_calculator: RatingCalculator (from B1)\n\n## Files to Modify\n- backend/app/scanners/scan_orchestrator.py — Accept ports via constructor injection\n\n## Files to Create/Update\n- backend/app/domain/scanning/ports.py — Add StockDataProvider Protocol:\n  - prepare_bulk(symbols, requirements, as_of_date=None) -\u003e dict[str, StockData]\n- backend/app/infra/providers/market_data_yfinance.py — Adapter wrapping DataPreparationLayer implementing StockDataProvider\n\n## Key Design Decision\nThe orchestrator itself can live in domain/ (if it only uses ports) or use_cases/ (if it needs session management). Recommend keeping it in domain/ as a domain service, with the use case handling session/transaction boundaries.\n\n## Acceptance Criteria\n- Orchestrator has no direct imports of cache/yfinance/Redis\n- Unit test with fake StockDataProvider produces correct ScanResultItemDomain list\n- Existing scan flow still works (wiring provides real implementations)\n- Boundary test passes\n\n## Depends On\n- B2 (domain types must exist)\n- B1 implicitly (composite/rating extracted)","status":"closed","priority":1,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:00:35.424448+08:00","created_by":"David Ten","updated_at":"2026-02-17T08:50:04.415769+08:00","closed_at":"2026-02-17T08:50:04.415769+08:00","close_reason":"Orchestrator fully depends on ports (StockDataProvider, ScreenerRegistry). Fixed 5 broken callers that used ScanOrchestrator() with no args to use get_scan_orchestrator() from wiring bootstrap. All 78 unit tests pass.","dependencies":[{"issue_id":"StockScreenClaude-7yl","depends_on_id":"StockScreenClaude-74o","type":"blocks","created_at":"2026-02-17T00:08:09.675755+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-8be","title":"B3: Refactor ScanOrchestrator to depend on ports","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-17T08:17:03.848471+08:00","created_by":"David Ten","updated_at":"2026-02-17T08:42:18.863182+08:00","closed_at":"2026-02-17T08:42:18.863182+08:00","close_reason":"Refactored ScanOrchestrator to use constructor-injected StockDataProvider port and ScreenerRegistry. Delegated scoring to domain functions. Added get_scan_orchestrator() factory. All 102 tests pass."}
{"id":"StockScreenClaude-8eu","title":"E2: Create Feature Store domain types — FeatureRunDomain, PublishPolicy, DQ","description":"## What\nCreate domain-layer types for the Feature Store that represent run lifecycle, publish policies, and data quality concepts.\n\n## Files to Create\n- backend/app/domain/feature_store/models.py containing:\n\n  class RunStatus(str, Enum): running, completed, failed, quarantined, published\n  class RunType(str, Enum): daily_snapshot, backfill, manual\n\n  @dataclass FeatureRunDomain:\n    id: int | None\n    as_of_date: date\n    run_type: RunType\n    status: RunStatus\n    correlation_id: str\n    code_version: str\n    universe_hash: str\n    input_hash: str\n    stats: RunStats | None\n    warnings: list[str]\n\n  @dataclass RunStats:\n    total_symbols: int\n    processed_symbols: int\n    failed_symbols: int\n    duration_seconds: float\n\n  @dataclass SnapshotRef:\n    run_id: int\n    as_of_date: date\n    status: RunStatus\n\n- backend/app/domain/feature_store/quality.py — Pure DQ check functions:\n  - check_row_count(expected, actual, threshold=0.9) -\u003e DQResult\n  - check_null_rate(column_nulls, total, max_rate=0.05) -\u003e DQResult\n  - check_score_distribution(scores, expected_mean_range) -\u003e DQResult\n  - is_publishable(dq_results: list[DQResult]) -\u003e bool\n\n  @dataclass DQResult:\n    check_name: str\n    passed: bool\n    actual_value: float\n    threshold: float\n    message: str\n\n## Why\nDQ checks as pure domain functions means they can be unit-tested trivially and reused across different run types (daily, backfill, manual).\n\n## Acceptance Criteria\n- All types are pure dataclasses with no IO imports\n- DQ functions are pure (input → output, no side effects)\n- Boundary test passes (domain-only imports)\n\n## Depends On\n- E1 (schema context needed, though types are independent)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:03:48.530569+08:00","created_by":"David Ten","updated_at":"2026-02-17T22:14:15.806945+08:00","closed_at":"2026-02-17T22:14:15.806945+08:00","close_reason":"All domain types, DQ checks, publish policy, and tests already implemented. 87/87 tests pass. Boundary test confirms no IO imports.","dependencies":[{"issue_id":"StockScreenClaude-8eu","depends_on_id":"StockScreenClaude-9m7","type":"blocks","created_at":"2026-02-17T00:08:09.671305+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-8iy","title":"Query performance guardrails","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-18T13:51:58.596533+08:00","created_by":"David Ten","updated_at":"2026-02-18T13:55:37.994889+08:00","closed_at":"2026-02-18T13:55:37.994889+08:00","close_reason":"21 perf tests passing: 12 query count, 3 invariance, 6 timing"}
{"id":"StockScreenClaude-8ms","title":"Unify rate limiting into Redis-backed distributed limiter","status":"closed","priority":1,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-16T11:59:13.749947+08:00","created_by":"David Ten","updated_at":"2026-02-16T12:05:36.478392+08:00","closed_at":"2026-02-16T12:05:36.478392+08:00","close_reason":"Implemented Redis-backed distributed rate limiter with Lua script, fallback, recovery, and timeout. 13 files modified (1 new, 12 updated). 11 unit tests pass."}
{"id":"StockScreenClaude-8so","title":"SE-E9: Feature flag + runtime observability for Setup Engine","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-21T06:42:25.484971+08:00","created_by":"David Ten","updated_at":"2026-02-21T06:45:43.782505+08:00","closed_at":"2026-02-21T06:45:43.782505+08:00","close_reason":"Feature flag, per-detector timing, scanner-level timing, and score distribution telemetry all implemented with tests"}
{"id":"StockScreenClaude-9cs","title":"Universe Unification — Single typed concept across API, DB, and business logic","status":"closed","priority":1,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:48:26.272075+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:30.138928+08:00","closed_at":"2026-02-16T14:58:30.138928+08:00","close_reason":"All 17 tasks implemented, 68 tests passing"}
{"id":"StockScreenClaude-9cz","title":"SE-E1: Implement and register SetupEngineScanner","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-20T20:40:24.093765+08:00","created_by":"David Ten","updated_at":"2026-02-20T20:46:21.553549+08:00","closed_at":"2026-02-20T20:46:21.553549+08:00","close_reason":"SetupEngineScanner implemented and registered with 20/20 tests passing, no regressions"}
{"id":"StockScreenClaude-9in","title":"T16: End-to-end verification of all universe types","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:49:41.861706+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:29.82632+08:00","closed_at":"2026-02-16T14:58:29.82632+08:00","close_reason":"E2E verification - requires running server, manual testing needed","dependencies":[{"issue_id":"StockScreenClaude-9in","depends_on_id":"StockScreenClaude-bkd","type":"blocks","created_at":"2026-02-16T14:50:47.100837+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-9in","depends_on_id":"StockScreenClaude-5pe","type":"blocks","created_at":"2026-02-16T14:50:47.384978+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-9in","depends_on_id":"StockScreenClaude-9zn","type":"blocks","created_at":"2026-02-16T14:50:47.683049+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-9in","depends_on_id":"StockScreenClaude-17g","type":"blocks","created_at":"2026-02-16T14:50:47.984589+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-9in","depends_on_id":"StockScreenClaude-3wq","type":"blocks","created_at":"2026-02-16T14:50:48.288328+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-9j1","title":"G2: Dual-source query for GetScanResultsUseCase","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-18T11:34:20.4136+08:00","created_by":"David Ten","updated_at":"2026-02-18T11:39:02.276763+08:00","closed_at":"2026-02-18T11:39:02.276763+08:00","close_reason":"Implemented dual-source routing in GetScanResultsUseCase with full test coverage"}
{"id":"StockScreenClaude-9m7","title":"E1: Create Feature Store SQLAlchemy models + migration","description":"## What\nCreate the database schema for the Feature Store — the core persistence layer for pre-computed screening results.\n\n## Tables to Create (see v3 plan Appendix A)\n\n### feature_runs\n- id (Integer PK, autoincrement)\n- as_of_date (Date, indexed)\n- run_type (Text) — daily_snapshot / backfill / manual\n- status (Text) — running / completed / failed / quarantined / published\n- created_at, completed_at, published_at (DateTime)\n- code_version (Text) — git SHA or app version\n- universe_hash (Text) — hash of resolved symbol list for reproducibility\n- input_hash (Text) — hash of config/criteria for cache-busting\n- correlation_id (Text, indexed) — traces across API→Celery→DB\n- stats_json (JSON) — row counts, timing, coverage stats\n- warnings_json (JSON) — DQ warnings, partial failures\n\n### feature_run_universe_symbols\n- run_id (FK → feature_runs.id, indexed)\n- symbol (Text, indexed)\n- PRIMARY KEY (run_id, symbol)\n\n### stock_feature_daily\n- run_id (FK → feature_runs.id, indexed)\n- symbol (Text, indexed)\n- as_of_date (Date, indexed) — denormalized for query convenience\n- composite_score (Real, indexed)\n- overall_rating (Integer, indexed)\n- passes_count (Integer)\n- details_json (JSON) — per-screener breakdown\n- PRIMARY KEY (run_id, symbol)\n\n### feature_run_pointers\n- key (Text PK) — e.g. 'latest_published'\n- run_id (FK → feature_runs.id)\n- updated_at (DateTime)\n\n## Indexes (minimum for query-per-request)\n- stock_feature_daily(run_id, composite_score DESC)\n- stock_feature_daily(run_id, overall_rating DESC)\n- stock_feature_daily(run_id, symbol)\n\n## Files to Create\n- backend/app/infra/db/models/feature_store.py — SQLAlchemy model classes\n- backend/migrations/add_feature_store_tables.py — Migration script\n\n## Acceptance Criteria\n- All tables created successfully on fresh DB\n- Migration runs cleanly on existing production DB\n- Foreign key constraints enforced\n- Indexes verified with EXPLAIN on common queries\n\n## Depends On\n- A2 (infra/db structure must exist)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:03:37.471434+08:00","created_by":"David Ten","updated_at":"2026-02-17T18:25:08.386591+08:00","closed_at":"2026-02-17T18:25:08.386591+08:00","close_reason":"Created 4 Feature Store tables (feature_runs, feature_run_universe_symbols, stock_feature_daily, feature_run_pointers) with SQLAlchemy models, idempotent migration, FK pragma enforcement, and all verification checks passing.","dependencies":[{"issue_id":"StockScreenClaude-9m7","depends_on_id":"StockScreenClaude-7lw","type":"blocks","created_at":"2026-02-17T00:08:11.214284+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-9tw","title":"SE-F3: Build Setup Engine Explain Drawer","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-21T12:30:03.502076+08:00","created_by":"David Ten","updated_at":"2026-02-21T13:09:41.777378+08:00","closed_at":"2026-02-21T13:09:41.777378+08:00","close_reason":"All 4 phases implemented: backend expose (9 new SE fields in scan_result_repo, feature_store_repo, scanning.py), sidebar summary (StockMetricsSidebar), new SetupEngineDrawer component, wired into ChartViewerModal with Escape guard and D shortcut. Code review fixes applied."}
{"id":"StockScreenClaude-9u7","title":"SE-F2: Add Setup Engine columns and filter controls","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-21T11:38:54.373532+08:00","created_by":"David Ten","updated_at":"2026-02-21T11:52:18.882837+08:00","closed_at":"2026-02-21T11:52:18.882837+08:00","close_reason":"Implemented SE-F2: extracted SE fields to extended_fields, added to schema/filters, built frontend columns and filter controls"}
{"id":"StockScreenClaude-9zn","title":"T8: Wire migration into app startup and remove destructive cleanup","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:49:13.421196+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:23.90261+08:00","closed_at":"2026-02-16T14:58:23.90261+08:00","close_reason":"Implemented in universe unification session","dependencies":[{"issue_id":"StockScreenClaude-9zn","depends_on_id":"StockScreenClaude-26z","type":"blocks","created_at":"2026-02-16T14:50:15.528174+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-a4x","title":"Add Stuck Task Detection and Force Cancel","description":"Add heartbeat tracking to DataFetchLock with update_heartbeat(), get_minutes_since_heartbeat(), and force_release(). Add POST /v1/cache/force-cancel endpoint.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-05T15:01:10.404607+08:00","created_by":"David Ten","updated_at":"2026-02-05T15:09:27.955686+08:00","closed_at":"2026-02-05T15:09:27.955686+08:00","close_reason":"Added get_current_task() method with heartbeat data to DataFetchLock"}
{"id":"StockScreenClaude-aam","title":"EPIC-E: Feature Store Schema — Models, Domain Types, Repositories","description":"Implement the Feature Store database schema and repository layer. Includes SQLAlchemy models for FeatureRun, StockFeatureDaily, FeatureRunUniverseSymbols, and FeatureRunPointers. Also includes domain types (FeatureRunDomain, PublishPolicy, DQ types) and repository implementations with atomic publish semantics. Corresponds to Phase E of the v3 architecture plan + Appendix A.","status":"closed","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-16T23:58:56.050999+08:00","created_by":"David Ten","updated_at":"2026-02-19T11:53:39.97485+08:00","closed_at":"2026-02-19T11:53:39.97485+08:00","close_reason":"All deliverables implemented: 4 SQLAlchemy models, domain types with state machine, 2 repository implementations with atomic publish semantics, 84 unit tests passing"}
{"id":"StockScreenClaude-ad9","title":"Switch beat schedule to smart_refresh_cache","description":"Replace daily_cache_warmup with smart_refresh_cache(mode=full) in beat schedule","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T08:11:46.075444+08:00","created_by":"David Ten","updated_at":"2026-02-19T08:13:08.922958+08:00","closed_at":"2026-02-19T08:13:08.922958+08:00","close_reason":"Replaced daily_cache_warmup with smart_refresh_cache(mode=full) in beat schedule; added task route"}
{"id":"StockScreenClaude-aef","title":"F3: Implement DQ checks + quarantine semantics for feature runs","description":"## What\nImplement the data quality validation pipeline that gates publishing of feature runs. Bad data should be quarantined, not published.\n\n## Components\n\n### Already Created (E2)\n- domain/feature_store/quality.py — Pure DQ check functions\n\n### To Create\n- backend/app/use_cases/feature_store/publish_run.py — PublishFeatureRunUseCase\n  - Input: run_id, dq_overrides (optional, for manual override)\n  - Logic:\n    1. Load run from FeatureRunRepository\n    2. Load snapshot stats (row count, null rates, score distribution)\n    3. Run DQ checks (domain functions)\n    4. If all pass → publish_atomically(run_id)\n    5. If any fail → mark_quarantined(run_id, dq_report)\n    6. Return publish result with DQ report\n\n### DQ Checks to Implement\n1. Row count check: actual rows \u003e= 90% of universe size\n2. Null rate check: composite_score null rate \u003c 5%\n3. Score distribution: mean composite score within expected range\n4. Rating distribution: at least some stocks in each rating bucket (sanity)\n5. Symbol coverage: check no unexpected symbols missing vs universe\n\n## Quarantine Behavior\n- Quarantined runs are NOT published (latest pointer unchanged)\n- Quarantined runs are kept in DB for inspection/debugging\n- Admin can manually publish a quarantined run via override flag\n- DQ report stored in warnings_json for visibility\n\n## Acceptance Criteria\n- DQ checks run automatically during snapshot build (F1 calls this)\n- Quarantined runs visible but not served to API consumers\n- Manual publish override works for admin use cases\n- Unit tests cover each DQ check independently\n\n## Depends On\n- F1 (called during snapshot build)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:04:30.088405+08:00","created_by":"David Ten","updated_at":"2026-02-18T08:27:36.835992+08:00","closed_at":"2026-02-18T08:27:36.835992+08:00","close_reason":"Implemented PublishFeatureRunUseCase with 5 DQ checks, DQThresholds/DQInputs value objects, QUARANTINED→PUBLISHED state transition, force-publish semantics. All 243 unit tests pass.","dependencies":[{"issue_id":"StockScreenClaude-aef","depends_on_id":"StockScreenClaude-0ch","type":"blocks","created_at":"2026-02-17T00:08:11.470855+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-b35","title":"SE-E8: Historical backfill for setup_engine in feature store","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-22T14:55:46.545978+08:00","created_by":"David Ten","updated_at":"2026-02-22T14:58:42.43164+08:00","closed_at":"2026-02-22T14:58:42.43164+08:00","close_reason":"Backfill script and 23 unit tests implemented, all passing"}
{"id":"StockScreenClaude-ban","title":"A3: Refactor POST /scans to use CreateScanUseCase","description":"## What\nRefactor the POST /api/v1/scans endpoint to use CreateScanUseCase, proving the layered architecture works end-to-end.\n\n## Current State (backend/app/api/v1/scans.py)\nThe create_scan() router function (~100 lines) currently:\n1. Parses request body (universe definition, screener config)\n2. Resolves universe symbols via universe_resolver\n3. Creates Scan DB record directly\n4. Dispatches Celery task\nAll in one function — mixing transport, business logic, and IO.\n\n## Target State\nRouter create_scan() becomes:\n1. Parse/validate request (FastAPI layer)\n2. Call CreateScanUseCase.execute(config) via Depends()\n3. Return response\n\n## Files to Create\n- backend/app/use_cases/scanning/create_scan.py — CreateScanUseCase class\n- backend/app/domain/scanning/ports.py — ScanRepository, UniverseRepository protocols (initial)\n\n## Files to Modify\n- backend/app/api/v1/scans.py — Slim down create_scan to call use case\n\n## Additional Requirements\n- Add idempotency_key support: repeated POST with same key returns existing scan\n- Celery task dispatch only after DB commit (use on_commit hook or outbox pattern)\n- CreateScanUseCase should be unit-testable with fake repos\n\n## Acceptance Criteria\n- Same API input/output (no breaking changes)\n- Router function is \u003c20 lines\n- Unit test for CreateScanUseCase with fake repos\n- Idempotent: same idempotency_key returns same scan_id\n\n## Depends On\n- A2 (wiring/bootstrap must exist)","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:00:02.527129+08:00","created_by":"David Ten","updated_at":"2026-02-17T06:49:09.381705+08:00","closed_at":"2026-02-17T06:49:09.381705+08:00","close_reason":"Refactored POST /scans to use CreateScanUseCase. Router is ~20 lines, use case is unit-testable with fake repos, idempotency_key support added, all 31 tests pass, layer boundaries enforced.","dependencies":[{"issue_id":"StockScreenClaude-ban","depends_on_id":"StockScreenClaude-7lw","type":"blocks","created_at":"2026-02-17T00:08:10.269652+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ban","depends_on_id":"StockScreenClaude-nrv","type":"blocks","created_at":"2026-02-17T17:37:23.441583+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-big","title":"Backend integration tests for Scanner→Persistence→Query path (SE-G3)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-22T15:31:06.875143+08:00","created_by":"David Ten","updated_at":"2026-02-22T15:34:11.767843+08:00","closed_at":"2026-02-22T15:34:11.767843+08:00","close_reason":"All 20 integration tests pass, covering SE filters/sorts/domain-mapping through real Python query builders"}
{"id":"StockScreenClaude-bkd","title":"T10: Update create_scan() to use resolver and persist structured fields","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:49:19.474992+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:23.998429+08:00","closed_at":"2026-02-16T14:58:23.998429+08:00","close_reason":"Implemented in universe unification session","dependencies":[{"issue_id":"StockScreenClaude-bkd","depends_on_id":"StockScreenClaude-z91","type":"blocks","created_at":"2026-02-16T14:50:22.96403+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bkd","depends_on_id":"StockScreenClaude-47f","type":"blocks","created_at":"2026-02-16T14:50:23.252435+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bkd","depends_on_id":"StockScreenClaude-cne","type":"blocks","created_at":"2026-02-16T14:50:23.541123+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bkd","depends_on_id":"StockScreenClaude-eh1","type":"blocks","created_at":"2026-02-16T14:50:23.949639+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-blm","title":"SE-H4: Formula Dictionary and Operator Runbook","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-22T22:35:52.657451+08:00","created_by":"David Ten","updated_at":"2026-02-22T22:42:39.058261+08:00","closed_at":"2026-02-22T22:42:39.058261+08:00","close_reason":"SE-H4 document written and verified: 30 fields documented, all cross-refs valid"}
{"id":"StockScreenClaude-bue","title":"Improve _fetch_with_backoff() rate-limit detection","description":"Per-symbol rate limit errors are swallowed by fetch_batch_data() and never trigger backoff. Check result failure rate and retry.","status":"closed","priority":1,"issue_type":"bug","owner":"davidten7@gmail.com","created_at":"2026-02-19T08:11:47.557845+08:00","created_by":"David Ten","updated_at":"2026-02-19T08:12:41.706934+08:00","closed_at":"2026-02-19T08:12:41.706934+08:00","close_reason":"Added per-symbol rate limit detection in _fetch_with_backoff() - checks result failure rate and retries with backoff"}
{"id":"StockScreenClaude-bv9","title":"THEME-ROOT Theme Identity and Lifecycle Reliability Program","description":"Program to make theme extraction deterministic, deduplicated, lifecycle-aware, and operationally safe at scale.","design":"Scope covers pipeline correctness, identity schema, matching engine, embedding/consolidation hardening, lifecycle semantics, API/UI contracts, backfill, and rollout governance.","acceptance_criteria":"All child epics delivered; dependency graph closed; rollout gates and runbooks completed with measurable quality/performance improvements.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:23:40.225816+08:00","created_by":"David Ten","updated_at":"2026-02-24T01:23:40.225816+08:00","labels":["reliability","theme-identity-v1","theme-platform"],"comments":[{"id":100,"issue_id":"StockScreenClaude-bv9","author":"David Ten","text":"Intent: eliminate theme explosion while preserving true novelty detection and historical continuity. Non-goal: perfect ontology in v1; focus is deterministic identity + operational trust.","created_at":"2026-02-23T17:23:50Z"},{"id":118,"issue_id":"StockScreenClaude-bv9","author":"David Ten","text":"Dependency overlay is intentionally front-loaded on correctness (E1/E2/E3). Cleanup (E7) is blocked until identity+matcher+lifecycle are stable to prevent re-fragmentation.","created_at":"2026-02-23T17:27:23Z"},{"id":119,"issue_id":"StockScreenClaude-bv9","author":"David Ten","text":"Program design notes: sequencing prioritizes data correctness before scale/perf and before analyst UX. This minimizes rework and prevents cleanup waves from being invalidated by upstream identity bugs. Exit criteria are operational: stable new-cluster rate, measurable duplicate reduction, bounded extraction latency, and clear rollbackability.","created_at":"2026-02-23T17:30:27Z"},{"id":120,"issue_id":"StockScreenClaude-bv9","author":"David Ten","text":"Governance guidance: all threshold/policy changes should be versioned and attributable, with before/after metric snapshots. Prefer shadow-mode comparisons before enabling auto-merge behavior in production.","created_at":"2026-02-23T17:30:28Z"}]}
{"id":"StockScreenClaude-bv9.1","title":"E1 Pipeline-scoped processing state and extraction correctness foundation","description":"Replace global content processing semantics with pipeline-scoped state to prevent cross-pipeline starvation and data skew.","design":"Introduce content_item_pipeline_state model, migrate extraction/reprocess flows, preserve backward compatibility while deprecating global flags.","acceptance_criteria":"Technical/fundamental processing are independently correct and observable; no cross-pipeline interference.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:53.44469+08:00","created_by":"David Ten","updated_at":"2026-02-24T09:01:39.255416+08:00","closed_at":"2026-02-24T09:01:39.255416+08:00","close_reason":"All E1 child tasks complete; ADR/migration/backfill/observability tests and runbook linked in closing comment.","labels":["backend","pipeline-correctness","theme-identity-v1"],"dependencies":[{"issue_id":"StockScreenClaude-bv9.1","depends_on_id":"StockScreenClaude-bv9","type":"parent-child","created_at":"2026-02-24T01:26:53.44608+08:00","created_by":"David Ten"}],"comments":[{"id":101,"issue_id":"StockScreenClaude-bv9.1","author":"David Ten","text":"Why first: without pipeline correctness, dedupe metrics and lifecycle promotion logic are systematically biased.","created_at":"2026-02-23T17:26:53Z"},{"id":121,"issue_id":"StockScreenClaude-bv9.1","author":"David Ten","text":"Implementation guardrails: enforce explicit status transitions (pending-\u003ein_progress-\u003eprocessed/failed_retryable/failed_terminal) and keep transitions idempotent under worker retries. State updates and mention writes should be transactionally coherent to avoid phantom processed states.","created_at":"2026-02-23T17:30:28Z"},{"id":193,"issue_id":"StockScreenClaude-bv9.1","author":"David Ten","text":"Closure evidence for E1 (`StockScreenClaude-bv9.1`) is consolidated below.\n\nTest/report links:\n- ADR contract: docs/theme_identity/adr_e1_pipeline_scoped_processing_state_v1.md\n- Machine-check invariants: docs/theme_identity/adr_e1_pipeline_scoped_processing_state_v1.invariants.json\n- Migration verification runbook: docs/theme_identity/e1_t2_pipeline_state_migration_runbook.md\n- Verification script: backend/scripts/verify_theme_pipeline_state_migration.py\n- Backfill/reconciliation script: backend/scripts/backfill_theme_pipeline_state.py\n- Backfill drift report helper/service: backend/app/services/theme_pipeline_state_backfill_service.py\n\nCoverage links (unit/integration behavior checks):\n- backend/tests/unit/test_theme_pipeline_processing_adr.py\n- backend/tests/unit/test_theme_pipeline_state_migration.py\n- backend/tests/unit/test_theme_pipeline_state_service.py\n- backend/tests/unit/test_theme_pipeline_state_backfill.py\n- backend/tests/unit/test_theme_reprocessing.py\n\nAll E1 child tasks (E1-T1..E1-T6) are closed and acceptance evidence is linked above.\n","created_at":"2026-02-24T01:01:28Z"}]}
{"id":"StockScreenClaude-bv9.1.1","title":"E1-T1 Define processing invariants and migration contract ADR","description":"Write explicit invariants for per-pipeline processing status, retries, and failure semantics.","design":"ADR includes compatibility strategy for existing ContentItem flags and staged cutover plan.","acceptance_criteria":"ADR approved and referenced by all E1 implementation tasks.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:53.857618+08:00","created_by":"David Ten","updated_at":"2026-02-24T06:50:58.614449+08:00","closed_at":"2026-02-24T06:50:58.614449+08:00","close_reason":"ADR defined and referenced by all E1 implementation tasks","dependencies":[{"issue_id":"StockScreenClaude-bv9.1.1","depends_on_id":"StockScreenClaude-bv9.1","type":"parent-child","created_at":"2026-02-24T01:26:53.85874+08:00","created_by":"David Ten"}],"comments":[{"id":102,"issue_id":"StockScreenClaude-bv9.1.1","author":"David Ten","text":"This ADR prevents ad-hoc behavior drift across extraction, reprocessing, and API reporting.","created_at":"2026-02-23T17:26:54Z"},{"id":129,"issue_id":"StockScreenClaude-bv9.1.1","author":"David Ten","text":"Background: historical ambiguity around global processed flags created non-deterministic behavior across pipelines. This ADR should lock terminology, allowed states, retry semantics, and migration cutover phases so implementation choices remain consistent across teams.","created_at":"2026-02-23T17:30:43Z"},{"id":189,"issue_id":"StockScreenClaude-bv9.1.1","author":"David Ten","text":"Delivered ADR artifacts: docs/theme_identity/adr_e1_pipeline_scoped_processing_state_v1.md and docs/theme_identity/adr_e1_pipeline_scoped_processing_state_v1.invariants.json. Added machine-check test backend/tests/unit/test_theme_pipeline_processing_adr.py and linked ADR in comments on E1-T2..E1-T6. Acceptance criteria satisfied.","created_at":"2026-02-23T22:50:58Z"}]}
{"id":"StockScreenClaude-bv9.1.2","title":"E1-T2 Add content_item_pipeline_state schema and startup idempotent migration","description":"Create pipeline-scoped processing-state table with status, attempts, error_code, error_message, timestamps, and uniqueness on content_item+pipeline.","design":"SQLite-safe idempotent migration integrated with startup migration pattern used by backend.","acceptance_criteria":"Schema exists, migration reruns cleanly, and indexes support extraction/reprocessing queries.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:54.285941+08:00","created_by":"David Ten","updated_at":"2026-02-24T06:58:15.474435+08:00","closed_at":"2026-02-24T06:58:15.474435+08:00","close_reason":"Pipeline-state schema and startup migration complete with verification","dependencies":[{"issue_id":"StockScreenClaude-bv9.1.2","depends_on_id":"StockScreenClaude-bv9.1","type":"parent-child","created_at":"2026-02-24T01:26:54.287021+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.1.2","depends_on_id":"StockScreenClaude-bv9.1.1","type":"blocks","created_at":"2026-02-24T01:27:14.157954+08:00","created_by":"David Ten"}],"comments":[{"id":103,"issue_id":"StockScreenClaude-bv9.1.2","author":"David Ten","text":"Critical columns: status lifecycle, retry metadata, and audit timestamps for failure diagnostics.","created_at":"2026-02-23T17:26:54Z"},{"id":130,"issue_id":"StockScreenClaude-bv9.1.2","author":"David Ten","text":"Rationale: schema must support observability and recovery, not just binary processed/unprocessed. Ensure uniqueness on (content_item_id,pipeline), indexed selection of retryable rows, and timestamp granularity sufficient for SLA and backoff logic.","created_at":"2026-02-23T17:30:43Z"},{"id":184,"issue_id":"StockScreenClaude-bv9.1.2","author":"David Ten","text":"Normative reference for implementation: docs/theme_identity/adr_e1_pipeline_scoped_processing_state_v1.md (E1 pipeline-scoped processing-state migration contract).","created_at":"2026-02-23T22:50:51Z"},{"id":192,"issue_id":"StockScreenClaude-bv9.1.2","author":"David Ten","text":"E1-T2 complete: schema migration + startup integration + validation tooling delivered. Tests: backend/tests/unit/test_theme_pipeline_state_migration.py and backend/tests/unit/test_theme_pipeline_processing_adr.py.","created_at":"2026-02-23T22:58:15Z"}]}
{"id":"StockScreenClaude-bv9.1.2.1","title":"E1-T2a Implement table DDL, constraints, and indexes","description":"Implement schema details and query-supporting indexes.","design":"Optimize for selecting unprocessed/retryable rows by pipeline and recency.","acceptance_criteria":"Migration produces expected schema with validated indexes.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:54.711632+08:00","created_by":"David Ten","updated_at":"2026-02-24T06:58:14.671979+08:00","closed_at":"2026-02-24T06:58:14.671979+08:00","close_reason":"DDL/constraints/indexes implemented and validated","dependencies":[{"issue_id":"StockScreenClaude-bv9.1.2.1","depends_on_id":"StockScreenClaude-bv9.1.2","type":"parent-child","created_at":"2026-02-24T01:26:54.712675+08:00","created_by":"David Ten"}],"comments":[{"id":131,"issue_id":"StockScreenClaude-bv9.1.2.1","author":"David Ten","text":"DDL considerations: include CHECK constraints or enum discipline for status values; favor covering indexes for scheduler hot paths. Validate query plans for unprocessed-by-pipeline scans to prevent full table scans at scale.","created_at":"2026-02-23T17:30:43Z"},{"id":190,"issue_id":"StockScreenClaude-bv9.1.2.1","author":"David Ten","text":"Delivered: idempotent migration module backend/app/db_migrations/theme_pipeline_state_migration.py with DDL, CHECK constraints, unique key enforcement, and scheduler-oriented indexes; wired startup execution in backend/app/main.py; added ORM mapping ContentItemPipelineState in backend/app/models/theme.py.","created_at":"2026-02-23T22:58:14Z"}]}
{"id":"StockScreenClaude-bv9.1.2.2","title":"E1-T2b Add migration verification checks and rollback notes","description":"Add automated verification query checks post-migration and rollback operator notes.","design":"Include row-count sanity checks and failure handling guidance.","acceptance_criteria":"Migration verification documented and executable by operator.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:54.946215+08:00","created_by":"David Ten","updated_at":"2026-02-24T06:58:15.080162+08:00","closed_at":"2026-02-24T06:58:15.080162+08:00","close_reason":"Verification checks and rollback notes documented/executable","dependencies":[{"issue_id":"StockScreenClaude-bv9.1.2.2","depends_on_id":"StockScreenClaude-bv9.1.2","type":"parent-child","created_at":"2026-02-24T01:26:54.94739+08:00","created_by":"David Ten"}],"comments":[{"id":132,"issue_id":"StockScreenClaude-bv9.1.2.2","author":"David Ten","text":"Operator notes should include: pre-migration backup expectation, post-migration verification SQL, and rollback triggers. Keep verification idempotent so it can run in CI and during incident response.","created_at":"2026-02-23T17:30:43Z"},{"id":191,"issue_id":"StockScreenClaude-bv9.1.2.2","author":"David Ten","text":"Delivered: executable verification path via backend/scripts/verify_theme_pipeline_state_migration.py (supports --apply-migration), verification helper function, and operator runbook docs/theme_identity/e1_t2_pipeline_state_migration_runbook.md with prechecks, SQL validation, and rollback triggers/guidance.","created_at":"2026-02-23T22:58:14Z"}]}
{"id":"StockScreenClaude-bv9.1.3","title":"E1-T3 Refactor extraction/reprocess flows to use pipeline state table","description":"Read/write pipeline processing status from new table in extraction and retry paths.","design":"Preserve existing task APIs but route internal eligibility and transitions through pipeline state.","acceptance_criteria":"Pipeline runs process independent workloads correctly and retries target correct pipeline.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:55.171275+08:00","created_by":"David Ten","updated_at":"2026-02-24T07:11:12.430483+08:00","closed_at":"2026-02-24T07:11:12.430483+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.1.3","depends_on_id":"StockScreenClaude-bv9.1","type":"parent-child","created_at":"2026-02-24T01:26:55.172326+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.1.3","depends_on_id":"StockScreenClaude-bv9.1.2","type":"blocks","created_at":"2026-02-24T01:27:14.335616+08:00","created_by":"David Ten"}],"comments":[{"id":104,"issue_id":"StockScreenClaude-bv9.1.3","author":"David Ten","text":"This is the behavioral core of E1; it must be transactionally consistent and idempotent.","created_at":"2026-02-23T17:26:55Z"},{"id":133,"issue_id":"StockScreenClaude-bv9.1.3","author":"David Ten","text":"This refactor is the correctness hinge. Enforce transactional updates where extraction outputs, mention writes, and pipeline-state transitions commit atomically; otherwise retries will create duplicate or missing mentions.","created_at":"2026-02-23T17:30:43Z"},{"id":185,"issue_id":"StockScreenClaude-bv9.1.3","author":"David Ten","text":"Normative reference for implementation: docs/theme_identity/adr_e1_pipeline_scoped_processing_state_v1.md (E1 pipeline-scoped processing-state migration contract).","created_at":"2026-02-23T22:50:51Z"}]}
{"id":"StockScreenClaude-bv9.1.4","title":"E1-T4 Backfill initial pipeline-state rows from existing data","description":"Populate state table from historical content + mention/error signals.","design":"Use conservative inference and mark ambiguous cases for retry reconciliation.","acceptance_criteria":"Backfill report produced with counts by pipeline/status and drift thresholds.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:55.562455+08:00","created_by":"David Ten","updated_at":"2026-02-24T08:51:57.696941+08:00","closed_at":"2026-02-24T08:51:57.696941+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.1.4","depends_on_id":"StockScreenClaude-bv9.1","type":"parent-child","created_at":"2026-02-24T01:26:55.563619+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.1.4","depends_on_id":"StockScreenClaude-bv9.1.3","type":"blocks","created_at":"2026-02-24T01:27:14.511285+08:00","created_by":"David Ten"}],"comments":[{"id":105,"issue_id":"StockScreenClaude-bv9.1.4","author":"David Ten","text":"Backfill quality directly affects near-term extraction throughput and duplicate creation rates.","created_at":"2026-02-23T17:26:55Z"},{"id":134,"issue_id":"StockScreenClaude-bv9.1.4","author":"David Ten","text":"Backfill policy should favor conservative correctness over aggressive inference. Ambiguous historical rows should be marked retryable with explicit reason codes so they are recoverable through normal processing.","created_at":"2026-02-23T17:30:44Z"},{"id":186,"issue_id":"StockScreenClaude-bv9.1.4","author":"David Ten","text":"Normative reference for implementation: docs/theme_identity/adr_e1_pipeline_scoped_processing_state_v1.md (E1 pipeline-scoped processing-state migration contract).","created_at":"2026-02-23T22:50:51Z"}]}
{"id":"StockScreenClaude-bv9.1.4.1","title":"E1-T4a Build one-shot backfill task with checkpointing","description":"Implement resumable backfill execution.","design":"Chunked commits + progress checkpoints for safe interruption/restart.","acceptance_criteria":"Backfill can resume without duplicate state rows.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:55.96747+08:00","created_by":"David Ten","updated_at":"2026-02-24T07:29:19.833628+08:00","closed_at":"2026-02-24T07:29:19.833628+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.1.4.1","depends_on_id":"StockScreenClaude-bv9.1.4","type":"parent-child","created_at":"2026-02-24T01:26:55.968782+08:00","created_by":"David Ten"}],"comments":[{"id":135,"issue_id":"StockScreenClaude-bv9.1.4.1","author":"David Ten","text":"Checkpointing guidance: persist cursor + batch summary (rows read, rows written, conflicts) every chunk. Resume logic must be idempotent and should tolerate partial-batch interruption without double writes.","created_at":"2026-02-23T17:30:44Z"}]}
{"id":"StockScreenClaude-bv9.1.5","title":"E1-T5 Update source pipeline-change handling to preserve per-pipeline state integrity","description":"When source pipeline assignments change, update state transitions safely without destructive reassignment shortcuts.","design":"Avoid collapsing historical pipeline distinctions unless explicitly requested policy allows it.","acceptance_criteria":"Pipeline reassignment no longer causes hidden mention/process-state corruption.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:56.188564+08:00","created_by":"David Ten","updated_at":"2026-02-24T07:29:25.297301+08:00","closed_at":"2026-02-24T07:29:25.297301+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.1.5","depends_on_id":"StockScreenClaude-bv9.1","type":"parent-child","created_at":"2026-02-24T01:26:56.189631+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.1.5","depends_on_id":"StockScreenClaude-bv9.1.3","type":"blocks","created_at":"2026-02-24T01:27:14.741563+08:00","created_by":"David Ten"}],"comments":[{"id":136,"issue_id":"StockScreenClaude-bv9.1.5","author":"David Ten","text":"Pipeline reassignment is a common source of silent corruption. Preserve provenance and avoid destructive rewrites that collapse technical/fundamental history unless policy explicitly authorizes migration semantics.","created_at":"2026-02-23T17:30:44Z"},{"id":187,"issue_id":"StockScreenClaude-bv9.1.5","author":"David Ten","text":"Normative reference for implementation: docs/theme_identity/adr_e1_pipeline_scoped_processing_state_v1.md (E1 pipeline-scoped processing-state migration contract).","created_at":"2026-02-23T22:50:52Z"}]}
{"id":"StockScreenClaude-bv9.1.6","title":"E1-T6 Add observability for pipeline-state health and silent-failure drift","description":"Expose counts/ratios for pending, retryable, parse-error, and processed-without-mentions by pipeline.","design":"Instrument extraction pipeline dashboards and operational alerts.","acceptance_criteria":"Operators can detect and triage pipeline extraction anomalies quickly.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:56.416299+08:00","created_by":"David Ten","updated_at":"2026-02-24T07:29:25.232167+08:00","closed_at":"2026-02-24T07:29:25.232167+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.1.6","depends_on_id":"StockScreenClaude-bv9.1","type":"parent-child","created_at":"2026-02-24T01:26:56.417387+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.1.6","depends_on_id":"StockScreenClaude-bv9.1.3","type":"blocks","created_at":"2026-02-24T01:27:14.997176+08:00","created_by":"David Ten"}],"comments":[{"id":137,"issue_id":"StockScreenClaude-bv9.1.6","author":"David Ten","text":"Metrics to include: pending age percentiles, retry queue growth, parse-failure rate, and processed-without-mentions ratio by pipeline. Alerting should prefer trend deviations over noisy absolute thresholds.","created_at":"2026-02-23T17:30:44Z"},{"id":188,"issue_id":"StockScreenClaude-bv9.1.6","author":"David Ten","text":"Normative reference for implementation: docs/theme_identity/adr_e1_pipeline_scoped_processing_state_v1.md (E1 pipeline-scoped processing-state migration contract).","created_at":"2026-02-23T22:50:52Z"}]}
{"id":"StockScreenClaude-bv9.2","title":"E2 Canonical identity keys normalization and alias data model","description":"Decouple machine identity from display naming and replace JSON alias handling with indexed alias records.","design":"Introduce canonical_key + display_name model and theme_aliases table with provenance and confidence metadata.","acceptance_criteria":"Identity and alias lookups are deterministic, indexed, and migration-safe.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:56.644589+08:00","created_by":"David Ten","updated_at":"2026-02-24T12:55:31.753328+08:00","closed_at":"2026-02-24T12:55:31.753328+08:00","close_reason":"Completed","labels":["backend","identity-model","theme-identity-v1"],"dependencies":[{"issue_id":"StockScreenClaude-bv9.2","depends_on_id":"StockScreenClaude-bv9","type":"parent-child","created_at":"2026-02-24T01:26:56.646476+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.2","depends_on_id":"StockScreenClaude-bv9.1","type":"blocks","created_at":"2026-02-24T01:27:11.017998+08:00","created_by":"David Ten"}],"comments":[{"id":106,"issue_id":"StockScreenClaude-bv9.2","author":"David Ten","text":"Primary outcome: identity stability independent of LLM phrasing variance.","created_at":"2026-02-23T17:26:56Z"},{"id":122,"issue_id":"StockScreenClaude-bv9.2","author":"David Ten","text":"Identity model guidance: canonical_key is a machine identity primitive, not a UX string. display_name may evolve via curation without breaking joins, historical metrics, or API references.","created_at":"2026-02-23T17:30:28Z"}]}
{"id":"StockScreenClaude-bv9.2.1","title":"E2-T1 Define canonical key spec and normalization policy","description":"Specify deterministic key generation rules including acronyms, numeric tokens, punctuation normalization, and stopword policy.","design":"Key format must be stable across providers and model outputs.","acceptance_criteria":"Policy doc approved with representative corpus examples and edge-case outcomes.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:57.040733+08:00","created_by":"David Ten","updated_at":"2026-02-24T09:24:54.619143+08:00","closed_at":"2026-02-24T09:24:54.619143+08:00","close_reason":"Canonical key normalization ADR + representative edge-case corpus + machine-check tests delivered.","dependencies":[{"issue_id":"StockScreenClaude-bv9.2.1","depends_on_id":"StockScreenClaude-bv9.2","type":"parent-child","created_at":"2026-02-24T01:26:57.041774+08:00","created_by":"David Ten"}],"comments":[{"id":138,"issue_id":"StockScreenClaude-bv9.2.1","author":"David Ten","text":"Spec depth matters here: define deterministic tokenization, Unicode normalization policy, acronym handling, numeric normalization, and stopword treatment with examples. Any unspecified edge case becomes future identity drift.","created_at":"2026-02-23T17:30:54Z"},{"id":194,"issue_id":"StockScreenClaude-bv9.2.1","author":"David Ten","text":"Delivered canonical key policy artifacts for E2-T1 with deterministic rules and edge-case corpus.\n\nPolicy + corpus:\n- docs/theme_identity/adr_e2_canonical_key_normalization_v1.md\n- docs/theme_identity/adr_e2_canonical_key_normalization_v1.corpus.json\n\nMachine-check test:\n- backend/tests/unit/test_theme_canonical_key_policy_adr.py\n\nValidation run:\n- cd backend \u0026\u0026 source venv/bin/activate \u0026\u0026 pytest tests/unit/test_theme_canonical_key_policy_adr.py -q\n- Result: 4 passed\n\nCoverage includes deterministic tokenization order, Unicode normalization policy, acronym handling, numeric token policy, punctuation/separator handling, stopword/protected-token rules, overflow/fallback behavior, and representative corpus outcomes (including edge cases).\n","created_at":"2026-02-24T01:24:44Z"}]}
{"id":"StockScreenClaude-bv9.2.2","title":"E2-T2 Implement normalization library with exhaustive unit tests","description":"Build key generator and display formatter utilities used across extraction and merge paths.","design":"Separate machine key generation from UI-friendly display casing.","acceptance_criteria":"Unit tests cover acronym/numeric/hyphen and adversarial cases with stable expected outputs.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:57.274581+08:00","created_by":"David Ten","updated_at":"2026-02-24T09:50:38.337416+08:00","closed_at":"2026-02-24T09:50:38.337416+08:00","close_reason":"Normalization library + exhaustive corpus-backed tests delivered and integrated into extraction/merge paths.","dependencies":[{"issue_id":"StockScreenClaude-bv9.2.2","depends_on_id":"StockScreenClaude-bv9.2","type":"parent-child","created_at":"2026-02-24T01:26:57.275751+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.2.2","depends_on_id":"StockScreenClaude-bv9.2.1","type":"blocks","created_at":"2026-02-24T01:27:15.232785+08:00","created_by":"David Ten"}],"comments":[{"id":139,"issue_id":"StockScreenClaude-bv9.2.2","author":"David Ten","text":"Testing should include adversarial near-collisions and regression snapshots to protect key stability over time. Treat key generation as a compatibility surface; changes require versioning and migration strategy.","created_at":"2026-02-23T17:30:55Z"},{"id":195,"issue_id":"StockScreenClaude-bv9.2.2","author":"David Ten","text":"Delivered E2-T2 normalization library and wired it into extraction/merge paths.\n\nImplementation:\n- backend/app/services/theme_identity_normalization.py\n  - canonical_theme_key(raw_theme)\n  - display_theme_name(raw_theme)\n  - deterministic tokenization, unicode normalization, acronym handling, numeric normalization, separator handling, stopword/protected token behavior, overflow hash suffix handling.\n- backend/app/services/theme_extraction_service.py\n  - _normalize_theme now routes through canonical key + display formatter utilities, with legacy canonical-name compatibility mappings.\n- backend/app/services/theme_merging_service.py\n  - normalize LLM suggested canonical names through the shared display formatter before persisting suggestions.\n\nPolicy/corpus hardening (from review feedback during implementation):\n- docs/theme_identity/adr_e2_canonical_key_normalization_v1.md\n- docs/theme_identity/adr_e2_canonical_key_normalization_v1.corpus.json\n- backend/tests/unit/test_theme_canonical_key_policy_adr.py\n\nTests:\n- backend/tests/unit/test_theme_identity_normalization.py\n- backend/tests/unit/test_theme_canonical_key_policy_adr.py\n\nValidation run:\n- cd backend \u0026\u0026 source venv/bin/activate \u0026\u0026 pytest tests/unit/test_theme_identity_normalization.py tests/unit/test_theme_canonical_key_policy_adr.py -q\n- Result: 11 passed\n\nAcceptance criteria coverage:\n- Acronym/numeric/hyphen/adversarial and near-collision examples are enforced via corpus-backed tests.\n- Machine key generation is separated from UI-friendly display formatting and now shared in extraction + merge suggestion flows.\n","created_at":"2026-02-24T01:50:27Z"}]}
{"id":"StockScreenClaude-bv9.2.3","title":"E2-T3 Migrate theme_clusters to canonical_key plus display_name and composite uniqueness","description":"Add canonical_key and display_name, enforce unique(pipeline, canonical_key), remove global name uniqueness behavior.","design":"SQLite-safe table rebuild migration with data copy and integrity checks.","acceptance_criteria":"Schema aligns with pipeline-scoped identity model without uniqueness conflicts.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:57.510778+08:00","created_by":"David Ten","updated_at":"2026-02-24T10:55:08.78168+08:00","closed_at":"2026-02-24T10:55:08.78168+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.2.3","depends_on_id":"StockScreenClaude-bv9.2","type":"parent-child","created_at":"2026-02-24T01:26:57.512683+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.2.3","depends_on_id":"StockScreenClaude-bv9.2.2","type":"blocks","created_at":"2026-02-24T01:27:15.446848+08:00","created_by":"David Ten"}],"comments":[{"id":107,"issue_id":"StockScreenClaude-bv9.2.3","author":"David Ten","text":"This resolves the current code/schema mismatch where lookup is pipeline-scoped but uniqueness is global.","created_at":"2026-02-23T17:26:57Z"},{"id":140,"issue_id":"StockScreenClaude-bv9.2.3","author":"David Ten","text":"Migration must resolve current mismatch between lookup semantics and uniqueness constraints. Add integrity checks for duplicate canonical_key per pipeline before enforcing unique indexes to avoid migration-time surprises.","created_at":"2026-02-23T17:30:55Z"}]}
{"id":"StockScreenClaude-bv9.2.4","title":"E2-T4 Add theme_aliases table and repository operations","description":"Create indexed alias records with alias_key, source, confidence, and seen counts.","design":"Support exact alias matching and alias quality analytics.","acceptance_criteria":"Alias CRUD/query paths support extraction-time matching with index-backed lookups.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:57.9273+08:00","created_by":"David Ten","updated_at":"2026-02-24T11:45:50.166728+08:00","closed_at":"2026-02-24T11:45:50.166728+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.2.4","depends_on_id":"StockScreenClaude-bv9.2","type":"parent-child","created_at":"2026-02-24T01:26:57.928409+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.2.4","depends_on_id":"StockScreenClaude-bv9.2.3","type":"blocks","created_at":"2026-02-24T01:27:15.663827+08:00","created_by":"David Ten"}],"comments":[{"id":141,"issue_id":"StockScreenClaude-bv9.2.4","author":"David Ten","text":"Alias rows should encode provenance (source, first_seen, last_seen) and quality signals (confidence, evidence_count). This enables future trust weighting and safer automated matching decisions.","created_at":"2026-02-23T17:30:55Z"}]}
{"id":"StockScreenClaude-bv9.2.5","title":"E2-T5 Backfill canonical keys and alias records for existing themes","description":"Generate keys and alias rows for historical clusters and mentions.","design":"Detect and report collisions for review instead of silent overwrite.","acceptance_criteria":"Backfill report includes collision inventory and remediation actions.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:58.157908+08:00","created_by":"David Ten","updated_at":"2026-02-24T12:20:55.810932+08:00","closed_at":"2026-02-24T12:20:55.810932+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.2.5","depends_on_id":"StockScreenClaude-bv9.2","type":"parent-child","created_at":"2026-02-24T01:26:58.158972+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.2.5","depends_on_id":"StockScreenClaude-bv9.2.4","type":"blocks","created_at":"2026-02-24T01:27:15.892175+08:00","created_by":"David Ten"}],"comments":[{"id":108,"issue_id":"StockScreenClaude-bv9.2.5","author":"David Ten","text":"Collision handling strategy must be explicit to avoid irreversible identity corruption.","created_at":"2026-02-23T17:26:58Z"},{"id":142,"issue_id":"StockScreenClaude-bv9.2.5","author":"David Ten","text":"Backfill collision handling should be explicit and reversible: log conflicting clusters, assign review buckets, and avoid silent winner-takes-all rewrites. Preserve traceability from old identifiers to canonical identities.","created_at":"2026-02-23T17:30:55Z"}]}
{"id":"StockScreenClaude-bv9.2.6","title":"E2-T6 Add identity integrity checks and invariant tests in CI","description":"Add checks for uniqueness, alias-key integrity, and forbidden null/invalid transitions.","design":"Fail fast in CI if invariant regressions appear.","acceptance_criteria":"Invariant test suite enforced in CI quality gates.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:58.543957+08:00","created_by":"David Ten","updated_at":"2026-02-24T12:40:17.203727+08:00","closed_at":"2026-02-24T12:40:17.203727+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.2.6","depends_on_id":"StockScreenClaude-bv9.2","type":"parent-child","created_at":"2026-02-24T01:26:58.545074+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.2.6","depends_on_id":"StockScreenClaude-bv9.2.5","type":"blocks","created_at":"2026-02-24T01:27:16.103497+08:00","created_by":"David Ten"}],"comments":[{"id":143,"issue_id":"StockScreenClaude-bv9.2.6","author":"David Ten","text":"Invariant suite should enforce identity consistency at multiple layers: DB constraints, repository behavior, and API contracts. Fast-failing CI here prevents expensive downstream cleanup campaigns.","created_at":"2026-02-23T17:30:55Z"}]}
{"id":"StockScreenClaude-bv9.3","title":"E3 Scored match-before-create decision engine and extraction reliability semantics","description":"Replace exact-match-or-create with an auditable multi-stage matching decision engine and explicit failure handling.","design":"Decision stages: exact key, alias key, fuzzy lexical, embedding similarity; all emit method/score telemetry.","acceptance_criteria":"New-theme creation rate drops materially while preserving true novelty detection and retry correctness.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:58.769674+08:00","created_by":"David Ten","updated_at":"2026-02-24T17:48:03.198399+08:00","closed_at":"2026-02-24T17:48:03.198399+08:00","close_reason":"Completed: E3 matcher delivered; post-restart ingestion verification shows new theme creation rate drop from 86.92% (226/260 on 2026-02-23) to 67.07% (167/249 on 2026-02-24), with extraction correctness and telemetry in place.","labels":["matching","reliability","theme-identity-v1"],"dependencies":[{"issue_id":"StockScreenClaude-bv9.3","depends_on_id":"StockScreenClaude-bv9","type":"parent-child","created_at":"2026-02-24T01:26:58.771022+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.3","depends_on_id":"StockScreenClaude-bv9.2","type":"blocks","created_at":"2026-02-24T01:27:11.201649+08:00","created_by":"David Ten"}],"comments":[{"id":109,"issue_id":"StockScreenClaude-bv9.3","author":"David Ten","text":"Core principle: every cluster assignment must be explainable and threshold-governed.","created_at":"2026-02-23T17:26:58Z"},{"id":123,"issue_id":"StockScreenClaude-bv9.3","author":"David Ten","text":"Matcher policy intent: optimize for precision-first attachment in early rollout, then tune recall with telemetry. Every assignment should be debuggable from persisted method+score+threshold-version evidence.","created_at":"2026-02-23T17:30:28Z"}]}
{"id":"StockScreenClaude-bv9.3.1","title":"E3-T1 Define MatchDecision interface and threshold configuration model","description":"Create typed decision object capturing chosen cluster, score, method, threshold version, and fallback reason.","design":"Support per-pipeline and per-source-type threshold overrides.","acceptance_criteria":"Decision object is used by extraction path and persisted for observability.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:59.183793+08:00","created_by":"David Ten","updated_at":"2026-02-24T13:01:34.3506+08:00","closed_at":"2026-02-24T13:01:34.3506+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.3.1","depends_on_id":"StockScreenClaude-bv9.3","type":"parent-child","created_at":"2026-02-24T01:26:59.184872+08:00","created_by":"David Ten"}],"comments":[{"id":144,"issue_id":"StockScreenClaude-bv9.3.1","author":"David Ten","text":"Decision object should capture not only selected match but also rejected-stage context (e.g., best alternative and margin). That enables offline threshold tuning and post-incident explainability.","created_at":"2026-02-23T17:31:05Z"}]}
{"id":"StockScreenClaude-bv9.3.2","title":"E3-T2 Implement Stage A exact canonical-key matching","description":"Match by pipeline + canonical_key with fast indexed lookup.","design":"Keep as low-latency first gate.","acceptance_criteria":"Exact-key matches route correctly with near-zero overhead.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:59.411486+08:00","created_by":"David Ten","updated_at":"2026-02-24T13:29:38.934037+08:00","closed_at":"2026-02-24T13:29:38.934037+08:00","close_reason":"Implemented Stage A canonical-key exact matching as first gate","dependencies":[{"issue_id":"StockScreenClaude-bv9.3.2","depends_on_id":"StockScreenClaude-bv9.3","type":"parent-child","created_at":"2026-02-24T01:26:59.412657+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.3.2","depends_on_id":"StockScreenClaude-bv9.3.1","type":"blocks","created_at":"2026-02-24T01:27:16.339178+08:00","created_by":"David Ten"}],"comments":[{"id":145,"issue_id":"StockScreenClaude-bv9.3.2","author":"David Ten","text":"Stage A is latency-critical and should remain deterministic/index-only. Use this as a hard short-circuit path before any fuzzy or embedding work to protect throughput under load.","created_at":"2026-02-23T17:31:06Z"}]}
{"id":"StockScreenClaude-bv9.3.3","title":"E3-T3 Implement Stage B alias-key exact matching","description":"Use alias table lookup before creating new cluster.","design":"Increment seen_count and alias confidence evidence upon usage.","acceptance_criteria":"Alias matches reduce unnecessary new cluster creation and update alias telemetry.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:59.640766+08:00","created_by":"David Ten","updated_at":"2026-02-24T13:44:05.007653+08:00","closed_at":"2026-02-24T13:44:05.007653+08:00","close_reason":"Implemented Stage B alias-key matching safeguards with telemetry updates and tests","dependencies":[{"issue_id":"StockScreenClaude-bv9.3.3","depends_on_id":"StockScreenClaude-bv9.3","type":"parent-child","created_at":"2026-02-24T01:26:59.641764+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.3.3","depends_on_id":"StockScreenClaude-bv9.3.2","type":"blocks","created_at":"2026-02-24T01:27:16.526228+08:00","created_by":"David Ten"}],"comments":[{"id":146,"issue_id":"StockScreenClaude-bv9.3.3","author":"David Ten","text":"Alias matching should accumulate evidence and adapt confidence over time. Add safeguards against low-quality alias poisoning by tracking source trust and requiring minimum evidence for auto-attach behavior.","created_at":"2026-02-23T17:31:06Z"}]}
{"id":"StockScreenClaude-bv9.3.4","title":"E3-T4 Implement Stage C fuzzy lexical matching with guarded thresholds","description":"Add rapid fuzzy lexical comparison with pipeline/source-specific thresholds and low-confidence review mode.","design":"Prevent over-merge by requiring score bands and ambiguity handling.","acceptance_criteria":"Fuzzy stage improves recall without unacceptable precision loss.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:26:59.86965+08:00","created_by":"David Ten","updated_at":"2026-02-24T13:56:32.753646+08:00","closed_at":"2026-02-24T13:56:32.753646+08:00","close_reason":"Implemented Stage C fuzzy lexical matching with threshold guards and review fallback telemetry","dependencies":[{"issue_id":"StockScreenClaude-bv9.3.4","depends_on_id":"StockScreenClaude-bv9.3","type":"parent-child","created_at":"2026-02-24T01:26:59.871255+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.3.4","depends_on_id":"StockScreenClaude-bv9.3.3","type":"blocks","created_at":"2026-02-24T01:27:16.710743+08:00","created_by":"David Ten"}],"comments":[{"id":147,"issue_id":"StockScreenClaude-bv9.3.4","author":"David Ten","text":"Fuzzy matching must include ambiguity controls: if top candidates are too close, route to low-confidence handling rather than forced attach. Precision errors here can be costly to unwind later.","created_at":"2026-02-23T17:31:06Z"}]}
{"id":"StockScreenClaude-bv9.3.5","title":"E3-T5 Implement Stage D embedding similarity candidate matching","description":"Query nearest clusters by embedding and apply calibrated threshold policy.","design":"Integrate with embedding freshness/versioning from E4.","acceptance_criteria":"Embedding stage increases semantic match quality for non-lexical variants.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:00.134957+08:00","created_by":"David Ten","updated_at":"2026-02-24T14:06:19.470668+08:00","closed_at":"2026-02-24T14:06:19.470668+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.3.5","depends_on_id":"StockScreenClaude-bv9.3","type":"parent-child","created_at":"2026-02-24T01:27:00.135968+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.3.5","depends_on_id":"StockScreenClaude-bv9.3.4","type":"blocks","created_at":"2026-02-24T01:27:16.888017+08:00","created_by":"David Ten"}],"comments":[{"id":148,"issue_id":"StockScreenClaude-bv9.3.5","author":"David Ten","text":"Embedding stage should operate on constrained candidate sets and calibrated thresholds. Keep model/version metadata in decision output to avoid mixing incomparable similarity scores across embedding versions.","created_at":"2026-02-23T17:31:06Z"}]}
{"id":"StockScreenClaude-bv9.3.6","title":"E3-T6 Change parse-failure semantics to explicit retryable pipeline errors","description":"Stop treating parse errors as successful empty extraction; mark retryable with error_code and attempt counters.","design":"Apply bounded retries with backoff and dead-letter visibility.","acceptance_criteria":"Parse-failure rows are observable/retryable and no longer silently lost.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:00.378549+08:00","created_by":"David Ten","updated_at":"2026-02-24T13:29:33.837794+08:00","closed_at":"2026-02-24T13:29:33.837794+08:00","close_reason":"Parse failures now surface as retryable pipeline errors with explicit code","dependencies":[{"issue_id":"StockScreenClaude-bv9.3.6","depends_on_id":"StockScreenClaude-bv9.3","type":"parent-child","created_at":"2026-02-24T01:27:00.379689+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.3.6","depends_on_id":"StockScreenClaude-bv9.3.1","type":"blocks","created_at":"2026-02-24T01:27:17.104159+08:00","created_by":"David Ten"}],"comments":[{"id":110,"issue_id":"StockScreenClaude-bv9.3.6","author":"David Ten","text":"This directly addresses hidden recall loss and should be considered a hard reliability requirement.","created_at":"2026-02-23T17:27:00Z"},{"id":149,"issue_id":"StockScreenClaude-bv9.3.6","author":"David Ten","text":"Failure semantics are reliability-critical: parse failure is not a successful empty extraction. Persist structured error codes, bounded retry policy, and dead-letter visibility so recall loss is observable and recoverable.","created_at":"2026-02-23T17:31:06Z"}]}
{"id":"StockScreenClaude-bv9.3.7","title":"E3-T7 Persist and surface matching telemetry (method score decision reason)","description":"Add match metadata fields and expose aggregate metrics for tuning.","design":"Dashboards should show method distribution, new-cluster rate, and confidence bands.","acceptance_criteria":"Operators can evaluate matcher behavior empirically and tune thresholds safely.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:00.772447+08:00","created_by":"David Ten","updated_at":"2026-02-24T14:52:31.860484+08:00","closed_at":"2026-02-24T14:52:31.860484+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.3.7","depends_on_id":"StockScreenClaude-bv9.3","type":"parent-child","created_at":"2026-02-24T01:27:00.773647+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.3.7","depends_on_id":"StockScreenClaude-bv9.3.5","type":"blocks","created_at":"2026-02-24T01:27:17.336595+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.3.7","depends_on_id":"StockScreenClaude-bv9.3.6","type":"blocks","created_at":"2026-02-24T01:27:17.530417+08:00","created_by":"David Ten"}],"comments":[{"id":150,"issue_id":"StockScreenClaude-bv9.3.7","author":"David Ten","text":"Telemetry should support both ops and model tuning: method mix, attach/new ratios, score distributions, and confidence-band outcomes by pipeline/source. Include threshold version in all aggregations for comparability.","created_at":"2026-02-23T17:31:07Z"}]}
{"id":"StockScreenClaude-bv9.4","title":"E4 Embedding and consolidation performance hardening with merge safety controls","description":"Refactor shared embedding primitives, add freshness/versioning, optimize consolidation candidate generation, and harden merge safety.","design":"Avoid duplicate embedding logic and reduce O(n^2) behavior in consolidation as theme cardinality grows.","acceptance_criteria":"Consolidation runtime and quality are stable at higher theme volumes with auditable merge safeguards.","status":"closed","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:01.004567+08:00","created_by":"David Ten","updated_at":"2026-02-24T23:41:49.790715+08:00","closed_at":"2026-02-24T23:41:49.790715+08:00","close_reason":"All child tasks and dependencies completed","labels":["consolidation","embedding","performance","theme-identity-v1"],"dependencies":[{"issue_id":"StockScreenClaude-bv9.4","depends_on_id":"StockScreenClaude-bv9","type":"parent-child","created_at":"2026-02-24T01:27:01.005684+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.4","depends_on_id":"StockScreenClaude-bv9.3","type":"blocks","created_at":"2026-02-24T01:27:11.381451+08:00","created_by":"David Ten"}],"comments":[{"id":111,"issue_id":"StockScreenClaude-bv9.4","author":"David Ten","text":"Goal is not just speed; it is predictable, safe, and operator-trustworthy consolidation.","created_at":"2026-02-23T17:27:01Z"},{"id":124,"issue_id":"StockScreenClaude-bv9.4","author":"David Ten","text":"Performance strategy: prioritize asymptotic safety over micro-optimizations. Blocking/top-k candidate generation and stale-aware embedding refresh are the main levers to keep consolidation cost sub-quadratic.","created_at":"2026-02-23T17:30:28Z"}]}
{"id":"StockScreenClaude-bv9.4.1","title":"E4-T1 Extract shared embedding engine/repository from existing merge service","description":"Refactor embedding generation, storage, and retrieval into reusable components.","design":"Both extraction-time matcher and consolidation flows use same embedding primitives.","acceptance_criteria":"No duplicate embedding logic paths remain.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:01.399382+08:00","created_by":"David Ten","updated_at":"2026-02-24T17:54:21.334835+08:00","closed_at":"2026-02-24T17:54:21.334835+08:00","close_reason":"Completed: extracted shared embedding primitives into theme_embedding_service (engine+repository) and wired both ThemeExtractionService Stage-D matching and ThemeMergingService to use the shared components; removed duplicate embedding encode/load/cosine/persistence paths; verified via embedding-stage reprocessing and identity tests.","dependencies":[{"issue_id":"StockScreenClaude-bv9.4.1","depends_on_id":"StockScreenClaude-bv9.4","type":"parent-child","created_at":"2026-02-24T01:27:01.400562+08:00","created_by":"David Ten"}],"comments":[{"id":151,"issue_id":"StockScreenClaude-bv9.4.1","author":"David Ten","text":"Refactor objective is consolidation of primitives, not behavior drift. Preserve existing semantics via compatibility tests while extracting a shared embedding repository/service boundary usable by both extraction and consolidation paths.","created_at":"2026-02-23T17:31:17Z"}]}
{"id":"StockScreenClaude-bv9.4.2","title":"E4-T2 Add embedding freshness fields (content_hash model_version is_stale)","description":"Track whether embedding is stale and which model/version generated it.","design":"Hash should include identity + relevant aliases/description content.","acceptance_criteria":"Embeddings are recomputed only when content/model changes.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:01.625047+08:00","created_by":"David Ten","updated_at":"2026-02-24T18:11:03.460117+08:00","closed_at":"2026-02-24T18:11:03.460117+08:00","close_reason":"Implemented embedding freshness metadata + merge model selection wiring with tests","dependencies":[{"issue_id":"StockScreenClaude-bv9.4.2","depends_on_id":"StockScreenClaude-bv9.4","type":"parent-child","created_at":"2026-02-24T01:27:01.626192+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.4.2","depends_on_id":"StockScreenClaude-bv9.4.1","type":"blocks","created_at":"2026-02-24T01:27:17.714336+08:00","created_by":"David Ten"}],"comments":[{"id":152,"issue_id":"StockScreenClaude-bv9.4.2","author":"David Ten","text":"Freshness metadata must define exactly what contributes to content_hash (identity fields, aliases, summaries). Document this clearly to avoid accidental stale false-negatives or excessive recompute churn.","created_at":"2026-02-23T17:31:17Z"}]}
{"id":"StockScreenClaude-bv9.4.3","title":"E4-T3 Implement stale-marking hooks on identity and alias updates","description":"Mark embeddings stale when relevant cluster/alias fields change.","design":"Hooks must be transactionally consistent with identity updates.","acceptance_criteria":"Embedding staleness state is accurate and timely.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:01.855325+08:00","created_by":"David Ten","updated_at":"2026-02-24T20:13:17.901443+08:00","closed_at":"2026-02-24T20:13:17.901443+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.4.3","depends_on_id":"StockScreenClaude-bv9.4","type":"parent-child","created_at":"2026-02-24T01:27:01.857088+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.4.3","depends_on_id":"StockScreenClaude-bv9.4.2","type":"blocks","created_at":"2026-02-24T01:27:17.895439+08:00","created_by":"David Ten"}],"comments":[{"id":153,"issue_id":"StockScreenClaude-bv9.4.3","author":"David Ten","text":"Stale-marking hooks should fire within the same transaction as identity/alias mutations. If hook execution can lag, introduce durable change events so stale flags are eventually consistent but never silently skipped.","created_at":"2026-02-23T17:31:17Z"}]}
{"id":"StockScreenClaude-bv9.4.4","title":"E4-T4 Add incremental embedding recompute task and scheduler integration","description":"Recompute only stale embeddings via bounded worker batches.","design":"Support retry behavior and progress telemetry.","acceptance_criteria":"Incremental recompute succeeds without full-table recompute dependency.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:02.105865+08:00","created_by":"David Ten","updated_at":"2026-02-24T20:32:59.658758+08:00","closed_at":"2026-02-24T20:32:59.658758+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.4.4","depends_on_id":"StockScreenClaude-bv9.4","type":"parent-child","created_at":"2026-02-24T01:27:02.10696+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.4.4","depends_on_id":"StockScreenClaude-bv9.4.3","type":"blocks","created_at":"2026-02-24T01:27:18.078157+08:00","created_by":"David Ten"}],"comments":[{"id":154,"issue_id":"StockScreenClaude-bv9.4.4","author":"David Ten","text":"Incremental recompute worker needs bounded concurrency, retry backoff, and starvation prevention for long-lived stale sets. Emit progress and failure counters so ops can forecast completion times for large refresh campaigns.","created_at":"2026-02-23T17:31:18Z"}]}
{"id":"StockScreenClaude-bv9.4.5","title":"E4-T5 Optimize consolidation candidate generation with blocking and top-k retrieval","description":"Replace brute-force pair enumeration with candidate blocking and nearest-neighbor top-k strategy.","design":"Block by pipeline and lexical signals before embedding comparisons.","acceptance_criteria":"Candidate generation scales predictably at higher theme counts.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:02.332639+08:00","created_by":"David Ten","updated_at":"2026-02-24T23:01:59.759443+08:00","closed_at":"2026-02-24T23:01:59.759443+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.4.5","depends_on_id":"StockScreenClaude-bv9.4","type":"parent-child","created_at":"2026-02-24T01:27:02.333703+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.4.5","depends_on_id":"StockScreenClaude-bv9.4.4","type":"blocks","created_at":"2026-02-24T01:27:18.257784+08:00","created_by":"David Ten"}],"comments":[{"id":112,"issue_id":"StockScreenClaude-bv9.4.5","author":"David Ten","text":"This protects long-term runtime as active themes grow beyond current levels.","created_at":"2026-02-23T17:27:02Z"},{"id":155,"issue_id":"StockScreenClaude-bv9.4.5","author":"David Ten","text":"Candidate generation scalability depends on blocking quality. Track recall impact of blocks using sampled exhaustive comparisons so performance improvements do not hide important merge candidates.","created_at":"2026-02-23T17:31:18Z"}]}
{"id":"StockScreenClaude-bv9.4.6","title":"E4-T6 Honor configured merge model selection in merge verification service","description":"Wire llm_merge_model setting into merge verification path.","design":"Avoid accidental coupling to extraction model defaults.","acceptance_criteria":"Merge LLM model can be controlled independently via config and verified in logs.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:02.740126+08:00","created_by":"David Ten","updated_at":"2026-02-24T18:11:03.466818+08:00","closed_at":"2026-02-24T18:11:03.466818+08:00","close_reason":"Implemented embedding freshness metadata + merge model selection wiring with tests","dependencies":[{"issue_id":"StockScreenClaude-bv9.4.6","depends_on_id":"StockScreenClaude-bv9.4","type":"parent-child","created_at":"2026-02-24T01:27:02.741317+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.4.6","depends_on_id":"StockScreenClaude-bv9.4.1","type":"blocks","created_at":"2026-02-24T01:27:18.437013+08:00","created_by":"David Ten"}],"comments":[{"id":156,"issue_id":"StockScreenClaude-bv9.4.6","author":"David Ten","text":"Model-selection correctness prevents silent quality drift. Ensure runtime config is surfaced in logs/telemetry and include tests that fail if merge verification falls back to extraction model unexpectedly.","created_at":"2026-02-23T17:31:18Z"}]}
{"id":"StockScreenClaude-bv9.4.7","title":"E4-T7 Harden merge transaction safety and idempotent retries","description":"Ensure merges are atomic, pipeline-safe, and retry-safe with clear failure reasons.","design":"Guard against duplicate approvals, stale suggestions, and race conditions.","acceptance_criteria":"Merge operations are resilient under concurrent review/automation usage.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:02.971782+08:00","created_by":"David Ten","updated_at":"2026-02-24T23:22:52.650791+08:00","closed_at":"2026-02-24T23:22:52.650791+08:00","close_reason":"Implemented atomic merge transaction hardening, optimistic suggestion status transitions, retry-safe idempotent approvals, API Idempotency-Key support, and unit tests for replay/stale-state behavior.","dependencies":[{"issue_id":"StockScreenClaude-bv9.4.7","depends_on_id":"StockScreenClaude-bv9.4","type":"parent-child","created_at":"2026-02-24T01:27:02.973528+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.4.7","depends_on_id":"StockScreenClaude-bv9.4.5","type":"blocks","created_at":"2026-02-24T01:27:18.628388+08:00","created_by":"David Ten"}],"comments":[{"id":157,"issue_id":"StockScreenClaude-bv9.4.7","author":"David Ten","text":"Merge safety must handle concurrent reviewer actions and stale suggestions. Use optimistic concurrency/version checks and idempotency keys so retries do not duplicate side effects or corrupt lineage.","created_at":"2026-02-23T17:31:18Z"}]}
{"id":"StockScreenClaude-bv9.5","title":"E5 Lifecycle state machine and theme relationship graph semantics","description":"Implement explicit lifecycle states and non-merge relationship modeling to improve novelty detection and continuity tracking.","design":"States include candidate active dormant reactivated retired; relationship graph includes subset and related edges.","acceptance_criteria":"Theme lifecycle transitions are explicit, auditable, and reflected in ranking/discovery behaviors.","status":"closed","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:03.2065+08:00","created_by":"David Ten","updated_at":"2026-02-24T23:12:26.708968+08:00","closed_at":"2026-02-24T23:12:26.708968+08:00","close_reason":"All child tasks and dependencies completed","labels":["lifecycle","semantics","theme-identity-v1"],"dependencies":[{"issue_id":"StockScreenClaude-bv9.5","depends_on_id":"StockScreenClaude-bv9","type":"parent-child","created_at":"2026-02-24T01:27:03.207618+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.5","depends_on_id":"StockScreenClaude-bv9.3","type":"blocks","created_at":"2026-02-24T01:27:11.555878+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.5","depends_on_id":"StockScreenClaude-bv9.2","type":"blocks","created_at":"2026-02-24T01:27:11.734098+08:00","created_by":"David Ten"}],"comments":[{"id":113,"issue_id":"StockScreenClaude-bv9.5","author":"David Ten","text":"Key philosophy: not every similarity should collapse into a merge; relationships preserve nuance.","created_at":"2026-02-23T17:27:03Z"},{"id":125,"issue_id":"StockScreenClaude-bv9.5","author":"David Ten","text":"Lifecycle semantics: treat inactivity as state evidence, not deletion criteria. Dormancy/reactivation preserves narrative continuity and prevents churn in analyst-facing trend histories.","created_at":"2026-02-23T17:30:28Z"}]}
{"id":"StockScreenClaude-bv9.5.1","title":"E5-T1 Add lifecycle schema fields and transition invariants","description":"Add lifecycle_state and transition timestamps/metadata with integrity constraints.","design":"Prevent invalid direct transitions and preserve audit history.","acceptance_criteria":"Lifecycle transitions are validated and persisted consistently.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:03.6053+08:00","created_by":"David Ten","updated_at":"2026-02-24T17:54:16.235592+08:00","closed_at":"2026-02-24T17:54:16.235592+08:00","close_reason":"Completed: added lifecycle schema migration (state, transition timestamps, metadata, transition audit table/indexes), lifecycle transition service with explicit invariants, and integration hooks; added migration/service unit tests validating valid+invalid transitions and persistence consistency.","dependencies":[{"issue_id":"StockScreenClaude-bv9.5.1","depends_on_id":"StockScreenClaude-bv9.5","type":"parent-child","created_at":"2026-02-24T01:27:03.606389+08:00","created_by":"David Ten"}],"comments":[{"id":158,"issue_id":"StockScreenClaude-bv9.5.1","author":"David Ten","text":"State machine rules should be explicit and testable, including prohibited jumps and required evidence for transitions. Store transition metadata (actor/job/rule version) to make lifecycle decisions auditable.","created_at":"2026-02-23T17:31:27Z"}]}
{"id":"StockScreenClaude-bv9.5.2","title":"E5-T2 Implement candidate promotion rules and scheduled promotion job","description":"Promote themes based on mentions source diversity confidence and persistence windows.","design":"Thresholds configurable by pipeline and source quality.","acceptance_criteria":"Promotion job upgrades legitimate themes and suppresses one-off noise.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:03.835382+08:00","created_by":"David Ten","updated_at":"2026-02-24T19:50:40.741512+08:00","closed_at":"2026-02-24T19:50:40.741512+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.5.2","depends_on_id":"StockScreenClaude-bv9.5","type":"parent-child","created_at":"2026-02-24T01:27:03.836563+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.5.2","depends_on_id":"StockScreenClaude-bv9.5.1","type":"blocks","created_at":"2026-02-24T01:27:18.845617+08:00","created_by":"David Ten"}],"comments":[{"id":159,"issue_id":"StockScreenClaude-bv9.5.2","author":"David Ten","text":"Promotion policy should combine frequency, diversity, and confidence over time windows to suppress bursty noise. Keep thresholds pipeline-aware because source quality differs materially across pipelines.","created_at":"2026-02-23T17:31:27Z"}]}
{"id":"StockScreenClaude-bv9.5.3","title":"E5-T3 Implement dormancy and reactivation policies with counters","description":"Downgrade stale themes and reactivate when matched again with evidence.","design":"Keep historical continuity and reactivation telemetry.","acceptance_criteria":"Dormancy/reactivation transitions are automatic and explainable.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:04.081357+08:00","created_by":"David Ten","updated_at":"2026-02-24T19:51:04.170504+08:00","closed_at":"2026-02-24T19:51:04.170504+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.5.3","depends_on_id":"StockScreenClaude-bv9.5","type":"parent-child","created_at":"2026-02-24T01:27:04.082444+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.5.3","depends_on_id":"StockScreenClaude-bv9.5.1","type":"blocks","created_at":"2026-02-24T01:27:19.037858+08:00","created_by":"David Ten"}],"comments":[{"id":160,"issue_id":"StockScreenClaude-bv9.5.3","author":"David Ten","text":"Dormancy/reactivation rules should retain continuity IDs so dashboards can treat reactivation as resumed narrative, not new entity creation. Capture dwell-time metrics for lifecycle policy tuning.","created_at":"2026-02-23T17:31:28Z"}]}
{"id":"StockScreenClaude-bv9.5.4","title":"E5-T4 Add theme_relationships schema and inference pipeline","description":"Store subset/related/distinct relationships from merge analysis and rule-based inference.","design":"Relationship edges should inform review UX and avoid destructive merges.","acceptance_criteria":"Relationship edges are queryable and shown in theme analysis views.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:04.305811+08:00","created_by":"David Ten","updated_at":"2026-02-24T19:51:20.65212+08:00","closed_at":"2026-02-24T19:51:20.65212+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.5.4","depends_on_id":"StockScreenClaude-bv9.5","type":"parent-child","created_at":"2026-02-24T01:27:04.306921+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.5.4","depends_on_id":"StockScreenClaude-bv9.5.1","type":"blocks","created_at":"2026-02-24T01:27:19.221536+08:00","created_by":"David Ten"}],"comments":[{"id":161,"issue_id":"StockScreenClaude-bv9.5.4","author":"David Ten","text":"Relationship graph is an alternative to destructive merges for high-similarity but non-identical concepts. Keep edge provenance and confidence so analysts understand why a relation exists and how strong it is.","created_at":"2026-02-23T17:31:28Z"}]}
{"id":"StockScreenClaude-bv9.5.5","title":"E5-T5 Integrate lifecycle state into rankings and emerging-discovery endpoints","description":"Use lifecycle state to filter/weight UI discovery and prevent noisy candidate floods.","design":"Maintain backward compatibility while adding lifecycle-aware filters.","acceptance_criteria":"Rankings and emerging lists reflect lifecycle policy correctly.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:04.530847+08:00","created_by":"David Ten","updated_at":"2026-02-24T20:13:17.911351+08:00","closed_at":"2026-02-24T20:13:17.911351+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.5.5","depends_on_id":"StockScreenClaude-bv9.5","type":"parent-child","created_at":"2026-02-24T01:27:04.53186+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.5.5","depends_on_id":"StockScreenClaude-bv9.5.2","type":"blocks","created_at":"2026-02-24T01:27:19.405664+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.5.5","depends_on_id":"StockScreenClaude-bv9.5.3","type":"blocks","created_at":"2026-02-24T01:27:19.58251+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.5.5","depends_on_id":"StockScreenClaude-bv9.5.4","type":"blocks","created_at":"2026-02-24T01:27:19.777989+08:00","created_by":"David Ten"}],"comments":[{"id":162,"issue_id":"StockScreenClaude-bv9.5.5","author":"David Ten","text":"Ranking/discovery integration should use lifecycle-aware weighting and filters while preserving backward-compatible defaults. Validate that candidate noise drops without hiding legitimately emerging themes.","created_at":"2026-02-23T17:31:28Z"}]}
{"id":"StockScreenClaude-bv9.5.6","title":"E5-T6 Add lifecycle transition alerts and audit log surfaces","description":"Create alerts for promotion/dormancy/reactivation and expose transition history.","design":"Operator and analyst views should trace why transitions occurred.","acceptance_criteria":"Lifecycle alerts/history are visible and useful for governance.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:04.76083+08:00","created_by":"David Ten","updated_at":"2026-02-24T20:32:59.666234+08:00","closed_at":"2026-02-24T20:32:59.666234+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.5.6","depends_on_id":"StockScreenClaude-bv9.5","type":"parent-child","created_at":"2026-02-24T01:27:04.762096+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.5.6","depends_on_id":"StockScreenClaude-bv9.5.5","type":"blocks","created_at":"2026-02-24T01:27:19.963451+08:00","created_by":"David Ten"}],"comments":[{"id":163,"issue_id":"StockScreenClaude-bv9.5.6","author":"David Ten","text":"Alert design should emphasize decision context: what changed, why it changed, and which rule fired. Include direct links to transition history and runbook guidance for quick operator triage.","created_at":"2026-02-23T17:31:28Z"}]}
{"id":"StockScreenClaude-bv9.6","title":"E6 API and frontend contract alignment with merge and lifecycle analyst workflows","description":"Align backend/ frontend payload contracts and expand workflow UX for merge, candidate, and relationship review.","design":"Stabilize schema naming and add contract tests to prevent regressions.","acceptance_criteria":"Merge review and lifecycle workflows are reliable, explainable, and contract-tested.","status":"closed","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:04.996505+08:00","created_by":"David Ten","updated_at":"2026-02-25T00:54:31.880785+08:00","closed_at":"2026-02-25T00:54:31.880785+08:00","close_reason":"All child tasks and dependencies completed","labels":["api","contracts","frontend","theme-identity-v1"],"dependencies":[{"issue_id":"StockScreenClaude-bv9.6","depends_on_id":"StockScreenClaude-bv9","type":"parent-child","created_at":"2026-02-24T01:27:04.997533+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.6","depends_on_id":"StockScreenClaude-bv9.3","type":"blocks","created_at":"2026-02-24T01:27:11.924127+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.6","depends_on_id":"StockScreenClaude-bv9.5","type":"blocks","created_at":"2026-02-24T01:27:12.132687+08:00","created_by":"David Ten"}],"comments":[{"id":114,"issue_id":"StockScreenClaude-bv9.6","author":"David Ten","text":"Contract stability is a reliability feature; review UX must never depend on brittle field drift.","created_at":"2026-02-23T17:27:05Z"},{"id":126,"issue_id":"StockScreenClaude-bv9.6","author":"David Ten","text":"Contract principle: one stable API shape should be the source of truth; adapters are acceptable but must be explicit and tested. Avoid component-level schema assumptions that bypass typed client boundaries.","created_at":"2026-02-23T17:30:29Z"}]}
{"id":"StockScreenClaude-bv9.6.1","title":"E6-T1 Align merge suggestion response schema with frontend expectations","description":"Resolve field-name and structure mismatches across backend schemas and frontend consumers.","design":"Either normalize backend shape or add explicit adapter layer with typed tests.","acceptance_criteria":"Merge review modal displays accurate data without fallback hacks.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:05.39283+08:00","created_by":"David Ten","updated_at":"2026-02-24T23:46:23.60534+08:00","closed_at":"2026-02-24T23:46:23.60534+08:00","close_reason":"Aligned merge suggestion API contract to frontend expectations with canonical field names, retained explicit legacy fields for migration compatibility, documented contract in endpoint docstring, and added contract regression test.","dependencies":[{"issue_id":"StockScreenClaude-bv9.6.1","depends_on_id":"StockScreenClaude-bv9.6","type":"parent-child","created_at":"2026-02-24T01:27:05.394034+08:00","created_by":"David Ten"}],"comments":[{"id":164,"issue_id":"StockScreenClaude-bv9.6.1","author":"David Ten","text":"Schema alignment should pick one canonical contract and deprecate mismatches with clear migration notes. Avoid silent field aliases that mask incompatibilities and complicate debugging.","created_at":"2026-02-23T17:31:40Z"}]}
{"id":"StockScreenClaude-bv9.6.2","title":"E6-T2 Implement frontend API adapters for merge and lifecycle payloads","description":"Centralize field adaptation and validation in API client layer.","design":"Avoid ad-hoc component-level assumptions about response shape.","acceptance_criteria":"Frontend consumes stable typed structures for merge/lifecycle features.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:05.617919+08:00","created_by":"David Ten","updated_at":"2026-02-25T00:04:04.125195+08:00","closed_at":"2026-02-25T00:04:04.125195+08:00","close_reason":"Implemented centralized frontend ingress adapters for merge and lifecycle payloads, wired themes API methods to normalized validated structures, added lifecycle transitions API helper, and added adapter unit tests.","dependencies":[{"issue_id":"StockScreenClaude-bv9.6.2","depends_on_id":"StockScreenClaude-bv9.6","type":"parent-child","created_at":"2026-02-24T01:27:05.619412+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.6.2","depends_on_id":"StockScreenClaude-bv9.6.1","type":"blocks","created_at":"2026-02-24T01:27:20.300172+08:00","created_by":"David Ten"}],"comments":[{"id":165,"issue_id":"StockScreenClaude-bv9.6.2","author":"David Ten","text":"API adapters should perform explicit validation and normalization at ingress boundaries. This keeps components simple and prevents schema drift from leaking across the frontend.","created_at":"2026-02-23T17:31:40Z"}]}
{"id":"StockScreenClaude-bv9.6.3","title":"E6-T3 Add candidate-theme queue endpoints and review UI","description":"Expose candidate themes separately from active themes and build review controls.","design":"Prevent noisy one-off candidates from overwhelming primary rankings UI.","acceptance_criteria":"Analysts can triage candidate themes with clear promote/reject actions.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:05.852944+08:00","created_by":"David Ten","updated_at":"2026-02-25T00:20:25.462722+08:00","closed_at":"2026-02-25T00:20:25.462722+08:00","close_reason":"Implemented candidate queue endpoints, review UI, and contract tests","dependencies":[{"issue_id":"StockScreenClaude-bv9.6.3","depends_on_id":"StockScreenClaude-bv9.6","type":"parent-child","created_at":"2026-02-24T01:27:05.854149+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.6.3","depends_on_id":"StockScreenClaude-bv9.6.2","type":"blocks","created_at":"2026-02-24T01:27:20.490111+08:00","created_by":"David Ten"}],"comments":[{"id":166,"issue_id":"StockScreenClaude-bv9.6.3","author":"David Ten","text":"Candidate queue UX is key to noise governance. Include evidence summaries, confidence bands, and bulk triage actions so analysts can process volume without sacrificing decision quality.","created_at":"2026-02-23T17:31:40Z"}]}
{"id":"StockScreenClaude-bv9.6.4","title":"E6-T4 Add relationship graph endpoints and theme detail panel integration","description":"Show subset/related edges in theme detail workflows.","design":"Support contextual exploration rather than binary merge/no-merge decisions.","acceptance_criteria":"Relationship data is visible and actionable in UI.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:06.094997+08:00","created_by":"David Ten","updated_at":"2026-02-25T00:20:35.877491+08:00","closed_at":"2026-02-25T00:20:35.877491+08:00","close_reason":"Added relationship graph endpoint and theme detail integration","dependencies":[{"issue_id":"StockScreenClaude-bv9.6.4","depends_on_id":"StockScreenClaude-bv9.6","type":"parent-child","created_at":"2026-02-24T01:27:06.096042+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.6.4","depends_on_id":"StockScreenClaude-bv9.6.2","type":"blocks","created_at":"2026-02-24T01:27:20.671104+08:00","created_by":"David Ten"}],"comments":[{"id":167,"issue_id":"StockScreenClaude-bv9.6.4","author":"David Ten","text":"Relationship views should present semantics beyond merge/no-merge (subset/related/distinct) with provenance cues. This reduces destructive decisions and improves thematic analysis depth.","created_at":"2026-02-23T17:31:40Z"}]}
{"id":"StockScreenClaude-bv9.6.5","title":"E6-T5 Add admin controls for threshold and lifecycle policy tuning","description":"Expose policy controls for matcher thresholds and promotion/dormancy settings.","design":"Settings changes should be versioned and auditable.","acceptance_criteria":"Operators can tune policies safely without code deploys.","status":"closed","priority":3,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:06.323582+08:00","created_by":"David Ten","updated_at":"2026-02-25T00:49:28.58044+08:00","closed_at":"2026-02-25T00:49:28.58044+08:00","close_reason":"Added admin policy controls with preview/stage/apply, history audit, revert, and UI modal","dependencies":[{"issue_id":"StockScreenClaude-bv9.6.5","depends_on_id":"StockScreenClaude-bv9.6","type":"parent-child","created_at":"2026-02-24T01:27:06.324581+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.6.5","depends_on_id":"StockScreenClaude-bv9.6.3","type":"blocks","created_at":"2026-02-24T01:27:20.851399+08:00","created_by":"David Ten"}],"comments":[{"id":168,"issue_id":"StockScreenClaude-bv9.6.5","author":"David Ten","text":"Admin tuning controls must be safe-by-default: staged rollout options, change previews, and audit logs. Treat policy edits as production changes with version history and revert capability.","created_at":"2026-02-23T17:31:41Z"}]}
{"id":"StockScreenClaude-bv9.6.6","title":"E6-T6 Add backend OpenAPI and frontend contract tests for theme endpoints","description":"Lock key response/request shapes and verify compatibility in CI.","design":"Include merge suggestions, rankings, candidates, and relationships endpoints.","acceptance_criteria":"Contract regressions fail CI before merge.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:06.55016+08:00","created_by":"David Ten","updated_at":"2026-02-25T00:20:46.304894+08:00","closed_at":"2026-02-25T00:20:46.304894+08:00","close_reason":"Added OpenAPI and frontend contract tests for key theme endpoints","dependencies":[{"issue_id":"StockScreenClaude-bv9.6.6","depends_on_id":"StockScreenClaude-bv9.6","type":"parent-child","created_at":"2026-02-24T01:27:06.551402+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.6.6","depends_on_id":"StockScreenClaude-bv9.6.1","type":"blocks","created_at":"2026-02-24T01:27:21.031981+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.6.6","depends_on_id":"StockScreenClaude-bv9.6.2","type":"blocks","created_at":"2026-02-24T01:27:21.21122+08:00","created_by":"David Ten"}],"comments":[{"id":169,"issue_id":"StockScreenClaude-bv9.6.6","author":"David Ten","text":"Contract tests should run both backend schema validation and frontend consumer expectations. Gate CI on compatibility to prevent regressions that only appear in analyst workflows.","created_at":"2026-02-23T17:31:41Z"}]}
{"id":"StockScreenClaude-bv9.6.7","title":"E6-T7 Improve UX copy/tooltips for confidence and relationship semantics","description":"Clarify meaning of similarity/confidence/relationship badges to reduce operator mistakes.","design":"Use concise decision-oriented language in merge review and theme detail views.","acceptance_criteria":"Analyst workflow errors decrease and review decisions are faster.","status":"closed","priority":3,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:06.779841+08:00","created_by":"David Ten","updated_at":"2026-02-25T00:49:39.243312+08:00","closed_at":"2026-02-25T00:49:39.243312+08:00","close_reason":"Improved merge/detail UX copy and tooltips for confidence and relationship semantics","dependencies":[{"issue_id":"StockScreenClaude-bv9.6.7","depends_on_id":"StockScreenClaude-bv9.6","type":"parent-child","created_at":"2026-02-24T01:27:06.781+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.6.7","depends_on_id":"StockScreenClaude-bv9.6.4","type":"blocks","created_at":"2026-02-24T01:27:21.399791+08:00","created_by":"David Ten"}],"comments":[{"id":170,"issue_id":"StockScreenClaude-bv9.6.7","author":"David Ten","text":"Copy/tooltips should minimize interpretation error by translating model confidence into action guidance. Validate wording with analyst review to reduce merge-review hesitation and misclicks.","created_at":"2026-02-23T17:31:41Z"}]}
{"id":"StockScreenClaude-bv9.7","title":"E7 Historical backfill consolidation campaign and reconciliation reporting","description":"Run staged cleanup on existing theme corpus after identity/matching/lifecycle foundations are in place.","design":"Use dry-run analysis, strict first-wave merges, review queue wave, and reconciliation artifacts for safety.","acceptance_criteria":"Duplicate footprint reduced materially with low false-merge rate and complete audit trail.","status":"closed","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:07.013161+08:00","created_by":"David Ten","updated_at":"2026-02-25T01:57:44.008045+08:00","closed_at":"2026-02-25T01:57:44.008045+08:00","close_reason":"Cleanup verified: stale pending suggestions=0, orphan aliases=0, active aliases on inactive clusters=0, active duplicate canonical keys=0; one remaining pending suggestion is valid manual-review queue item (non-stale).","labels":["backfill","migration","ops","theme-identity-v1"],"dependencies":[{"issue_id":"StockScreenClaude-bv9.7","depends_on_id":"StockScreenClaude-bv9","type":"parent-child","created_at":"2026-02-24T01:27:07.015145+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.7","depends_on_id":"StockScreenClaude-bv9.4","type":"blocks","created_at":"2026-02-24T01:27:12.314423+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.7","depends_on_id":"StockScreenClaude-bv9.5","type":"blocks","created_at":"2026-02-24T01:27:12.489843+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.7","depends_on_id":"StockScreenClaude-bv9.6","type":"blocks","created_at":"2026-02-24T01:27:12.704511+08:00","created_by":"David Ten"}],"comments":[{"id":115,"issue_id":"StockScreenClaude-bv9.7","author":"David Ten","text":"Do not run full cleanup before foundational identity and matching logic are live; that would recreate duplicates.","created_at":"2026-02-23T17:27:07Z"},{"id":127,"issue_id":"StockScreenClaude-bv9.7","author":"David Ten","text":"Backfill campaign rule: no mutation without reconciliation artifacts. Each wave should be reversible and accompanied by precision/coverage evidence to maintain trust in historical corrections.","created_at":"2026-02-23T17:30:29Z"}]}
{"id":"StockScreenClaude-bv9.7.1","title":"E7-T1 Build dry-run duplicate analysis and merge-plan generator","description":"Generate candidate merge groups and confidence tiers without mutating data.","design":"Report includes risk buckets and manual-review recommendations.","acceptance_criteria":"Dry-run report provides actionable wave plan with confidence distributions.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:07.407142+08:00","created_by":"David Ten","updated_at":"2026-02-25T00:57:54.658495+08:00","closed_at":"2026-02-25T00:57:54.658495+08:00","close_reason":"Implemented non-mutating duplicate analysis and dry-run merge wave plan report with tiers and risk buckets","dependencies":[{"issue_id":"StockScreenClaude-bv9.7.1","depends_on_id":"StockScreenClaude-bv9.7","type":"parent-child","created_at":"2026-02-24T01:27:07.408241+08:00","created_by":"David Ten"}],"comments":[{"id":171,"issue_id":"StockScreenClaude-bv9.7.1","author":"David Ten","text":"Dry-run analysis should output confidence tiers, ambiguity clusters, and explicit do-not-merge candidates. This report is the control surface for safe wave planning and reviewer staffing.","created_at":"2026-02-23T17:31:50Z"}]}
{"id":"StockScreenClaude-bv9.7.2","title":"E7-T2 Execute embedding refresh and stale recompute campaign","description":"Ensure embeddings are current and version-consistent before merge waves.","design":"Use incremental recompute with progress metrics and retry tracking.","acceptance_criteria":"Embedding coverage and freshness meet pre-merge gate thresholds.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:07.632412+08:00","created_by":"David Ten","updated_at":"2026-02-25T01:04:17.479235+08:00","closed_at":"2026-02-25T01:04:17.479235+08:00","close_reason":"Implemented bounded embedding refresh campaign with stale recompute passes, retry/failure pocket tracking, and coverage/freshness merge gates; added API endpoint and unit/contract tests.","dependencies":[{"issue_id":"StockScreenClaude-bv9.7.2","depends_on_id":"StockScreenClaude-bv9.7","type":"parent-child","created_at":"2026-02-24T01:27:07.633535+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.7.2","depends_on_id":"StockScreenClaude-bv9.7.1","type":"blocks","created_at":"2026-02-24T01:27:21.57925+08:00","created_by":"David Ten"}],"comments":[{"id":172,"issue_id":"StockScreenClaude-bv9.7.2","author":"David Ten","text":"Embedding refresh is a precondition for fair similarity scoring. Track coverage, version consistency, and failure pockets so merge-wave precision is not degraded by stale vectors.","created_at":"2026-02-23T17:31:50Z"}]}
{"id":"StockScreenClaude-bv9.7.3","title":"E7-T3 Run strict auto-merge wave for only highest-confidence identical pairs","description":"Apply conservative auto-merge policy for top-confidence candidates.","design":"Exclude subset/related pairs from auto-merge by policy.","acceptance_criteria":"Wave 1 completes with reconciliation report and acceptable precision.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:07.868853+08:00","created_by":"David Ten","updated_at":"2026-02-25T01:10:11.211341+08:00","closed_at":"2026-02-25T01:10:11.211341+08:00","close_reason":"Implemented strict Wave-1 auto-merge runner (identical-only, high-confidence thresholds, subset/related excluded), added reconciliation report output, API endpoint, and unit/contract coverage.","dependencies":[{"issue_id":"StockScreenClaude-bv9.7.3","depends_on_id":"StockScreenClaude-bv9.7","type":"parent-child","created_at":"2026-02-24T01:27:07.870073+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.7.3","depends_on_id":"StockScreenClaude-bv9.7.2","type":"blocks","created_at":"2026-02-24T01:27:21.761898+08:00","created_by":"David Ten"}],"comments":[{"id":116,"issue_id":"StockScreenClaude-bv9.7.3","author":"David Ten","text":"Wave 1 is precision-first. Throughput is secondary.","created_at":"2026-02-23T17:27:08Z"},{"id":173,"issue_id":"StockScreenClaude-bv9.7.3","author":"David Ten","text":"Wave 1 auto-merge should be intentionally narrow and precision-biased. Require strict identity evidence and exclude relation-labeled pairs to avoid irreversible semantic flattening.","created_at":"2026-02-23T17:31:50Z"}]}
{"id":"StockScreenClaude-bv9.7.4","title":"E7-T4 Run moderated manual-review merge wave with SLA tracking","description":"Process medium-confidence candidates through analyst review queue.","design":"Track review throughput and disagreement metrics.","acceptance_criteria":"Wave 2 closes prioritized queue with complete reviewer audit trail.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:08.283162+08:00","created_by":"David Ten","updated_at":"2026-02-25T01:20:01.915211+08:00","closed_at":"2026-02-25T01:20:01.915211+08:00","close_reason":"Implemented Wave-2 moderated manual-review merge processing with SLA/throughput/disagreement metrics, reviewer audit trail, new manual-review endpoint and request/response schemas, plus unit and OpenAPI contract tests.","dependencies":[{"issue_id":"StockScreenClaude-bv9.7.4","depends_on_id":"StockScreenClaude-bv9.7","type":"parent-child","created_at":"2026-02-24T01:27:08.284275+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.7.4","depends_on_id":"StockScreenClaude-bv9.7.3","type":"blocks","created_at":"2026-02-24T01:27:21.954286+08:00","created_by":"David Ten"}],"comments":[{"id":174,"issue_id":"StockScreenClaude-bv9.7.4","author":"David Ten","text":"Manual-review wave should measure reviewer agreement and turnaround SLA. Disagreement patterns should feed threshold tuning and relation-policy refinements before broader automation.","created_at":"2026-02-23T17:31:50Z"}]}
{"id":"StockScreenClaude-bv9.7.5","title":"E7-T5 Generate reconciliation and rollback artifacts for each merge wave","description":"Produce before/after counts, reassignment stats, and rollback references.","design":"Artifacts should support forensic audit and emergency rollback decisions.","acceptance_criteria":"Each merge wave has immutable reconciliation package.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:08.511562+08:00","created_by":"David Ten","updated_at":"2026-02-25T01:29:32.60642+08:00","closed_at":"2026-02-25T01:29:32.60642+08:00","close_reason":"Implemented sealed reconciliation and rollback artifact packages for Wave-1 strict auto and Wave-2 manual review, including before/after snapshots, reassignment stats, rollback references, artifact hashing, and updated schemas/tests.","dependencies":[{"issue_id":"StockScreenClaude-bv9.7.5","depends_on_id":"StockScreenClaude-bv9.7","type":"parent-child","created_at":"2026-02-24T01:27:08.512603+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.7.5","depends_on_id":"StockScreenClaude-bv9.7.3","type":"blocks","created_at":"2026-02-24T01:27:22.1602+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.7.5","depends_on_id":"StockScreenClaude-bv9.7.4","type":"blocks","created_at":"2026-02-24T01:27:22.345195+08:00","created_by":"David Ten"}],"comments":[{"id":175,"issue_id":"StockScreenClaude-bv9.7.5","author":"David Ten","text":"Reconciliation package should include before/after counts, mention reassignments, and rollback mapping artifacts. Store immutable snapshots per wave for auditability and incident response.","created_at":"2026-02-23T17:31:51Z"}]}
{"id":"StockScreenClaude-bv9.7.6","title":"E7-T6 Final cleanup of orphaned aliases inactive duplicates and stale suggestions","description":"Clean residual artifacts after merge campaign stabilization.","design":"Run only after reconciliation gates pass.","acceptance_criteria":"Post-campaign dataset is clean and internally consistent.","status":"closed","priority":3,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:08.737751+08:00","created_by":"David Ten","updated_at":"2026-02-25T01:43:50.438865+08:00","closed_at":"2026-02-25T01:43:50.438865+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-bv9.7.6","depends_on_id":"StockScreenClaude-bv9.7","type":"parent-child","created_at":"2026-02-24T01:27:08.739415+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.7.6","depends_on_id":"StockScreenClaude-bv9.7.5","type":"blocks","created_at":"2026-02-24T01:27:22.526727+08:00","created_by":"David Ten"}],"comments":[{"id":176,"issue_id":"StockScreenClaude-bv9.7.6","author":"David Ten","text":"Post-wave cleanup must be gated on reconciliation sign-off. Perform targeted orphan/stale artifact cleanup with integrity checks to avoid deleting data still required for rollback analysis.","created_at":"2026-02-23T17:31:51Z"}]}
{"id":"StockScreenClaude-bv9.8","title":"E8 Verification performance gates observability rollout and runbook completion","description":"Close with test coverage, benchmark gates, observability, staged rollout, and durable operator docs.","design":"Treat production trust as a formal gate with measurable correctness, precision, recall, latency, and operability criteria.","acceptance_criteria":"All quality/perf/operational gates pass and post-launch monitoring/backlog loop is active.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:08.975915+08:00","created_by":"David Ten","updated_at":"2026-02-24T01:27:08.975915+08:00","labels":["docs","rollout","theme-identity-v1","verification"],"dependencies":[{"issue_id":"StockScreenClaude-bv9.8","depends_on_id":"StockScreenClaude-bv9","type":"parent-child","created_at":"2026-02-24T01:27:08.97702+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.8","depends_on_id":"StockScreenClaude-bv9.1","type":"blocks","created_at":"2026-02-24T01:27:12.900007+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.8","depends_on_id":"StockScreenClaude-bv9.2","type":"blocks","created_at":"2026-02-24T01:27:13.081149+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.8","depends_on_id":"StockScreenClaude-bv9.3","type":"blocks","created_at":"2026-02-24T01:27:13.259168+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.8","depends_on_id":"StockScreenClaude-bv9.4","type":"blocks","created_at":"2026-02-24T01:27:13.436441+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.8","depends_on_id":"StockScreenClaude-bv9.5","type":"blocks","created_at":"2026-02-24T01:27:13.612859+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.8","depends_on_id":"StockScreenClaude-bv9.6","type":"blocks","created_at":"2026-02-24T01:27:13.791943+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.8","depends_on_id":"StockScreenClaude-bv9.7","type":"blocks","created_at":"2026-02-24T01:27:13.977534+08:00","created_by":"David Ten"}],"comments":[{"id":117,"issue_id":"StockScreenClaude-bv9.8","author":"David Ten","text":"Success criterion is sustained reliable operation, not just code merge completion.","created_at":"2026-02-23T17:27:09Z"},{"id":128,"issue_id":"StockScreenClaude-bv9.8","author":"David Ten","text":"Rollout doctrine: production trust is a release artifact, not an assumption. Define abort criteria in advance and ensure on-call runbooks map symptoms to concrete diagnostics and rollback actions.","created_at":"2026-02-23T17:30:29Z"}]}
{"id":"StockScreenClaude-bv9.8.1","title":"E8-T1 Add unit tests for normalization identity matching and lifecycle transitions","description":"Cover deterministic keying, matcher stage behavior, and state machine transitions.","design":"Use fixed fixtures and adversarial cases.","acceptance_criteria":"Critical identity/matching/lifecycle invariants covered by unit tests.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:09.370695+08:00","created_by":"David Ten","updated_at":"2026-02-25T02:02:11.054166+08:00","closed_at":"2026-02-25T02:02:11.054166+08:00","close_reason":"Added unit coverage for identity normalization adversarial input, matcher stage behavior (inactive canonical reactivation + exact display-name stage path), and lifecycle no-op transition guard; validated with pytest on theme identity/lifecycle/reprocessing suites (46 passed).","dependencies":[{"issue_id":"StockScreenClaude-bv9.8.1","depends_on_id":"StockScreenClaude-bv9.8","type":"parent-child","created_at":"2026-02-24T01:27:09.371935+08:00","created_by":"David Ten"}],"comments":[{"id":177,"issue_id":"StockScreenClaude-bv9.8.1","author":"David Ten","text":"Unit tests should prioritize deterministic fixtures and regression snapshots for key generation and matcher stage outcomes. Treat these as contract tests for identity semantics.","created_at":"2026-02-23T17:32:00Z"}]}
{"id":"StockScreenClaude-bv9.8.2","title":"E8-T2 Add integration tests for pipeline-scoped extraction and theme APIs","description":"Validate end-to-end extraction/reprocess behavior and API contract correctness.","design":"Include migration-upgraded DB scenarios.","acceptance_criteria":"Integration suites pass for both technical and fundamental pipelines.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:09.601108+08:00","created_by":"David Ten","updated_at":"2026-02-25T07:38:43.396622+08:00","closed_at":"2026-02-25T07:38:43.396622+08:00","close_reason":"Added integration suite for pipeline-scoped extraction/reprocess and theme API read paths across technical/fundamental pipelines, including a migration-upgraded content_item_pipeline_state scenario. Verified with pytest (integration + related unit suites passing).","dependencies":[{"issue_id":"StockScreenClaude-bv9.8.2","depends_on_id":"StockScreenClaude-bv9.8","type":"parent-child","created_at":"2026-02-24T01:27:09.602309+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.8.2","depends_on_id":"StockScreenClaude-bv9.8.1","type":"blocks","created_at":"2026-02-24T01:27:22.716963+08:00","created_by":"David Ten"}],"comments":[{"id":178,"issue_id":"StockScreenClaude-bv9.8.2","author":"David Ten","text":"Integration tests should exercise full extraction/retry and API read paths with both pipelines active. Include migration-upgrade scenarios to catch schema evolution regressions early.","created_at":"2026-02-23T17:32:00Z"}]}
{"id":"StockScreenClaude-bv9.8.3","title":"E8-T3 Add performance benchmarks and regression gates for extraction and consolidation","description":"Benchmark matching latency, consolidation candidate generation, and API response times.","design":"Define SLO thresholds and CI fail conditions.","acceptance_criteria":"Performance regressions are automatically detected and blocked.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:09.837479+08:00","created_by":"David Ten","updated_at":"2026-02-25T08:13:46.242833+08:00","closed_at":"2026-02-25T08:13:46.242833+08:00","close_reason":"Implemented extraction/consolidation performance gates and blocking CI","dependencies":[{"issue_id":"StockScreenClaude-bv9.8.3","depends_on_id":"StockScreenClaude-bv9.8","type":"parent-child","created_at":"2026-02-24T01:27:09.838576+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.8.3","depends_on_id":"StockScreenClaude-bv9.8.2","type":"blocks","created_at":"2026-02-24T01:27:22.899849+08:00","created_by":"David Ten"}],"comments":[{"id":179,"issue_id":"StockScreenClaude-bv9.8.3","author":"David Ten","text":"Benchmarks need stable harnesses and representative datasets. Gate on percentile latencies and throughput, not just means, to catch tail-risk regressions in matching/consolidation workloads.","created_at":"2026-02-23T17:32:00Z"}]}
{"id":"StockScreenClaude-bv9.8.4","title":"E8-T4 Ship observability dashboards and alert policies for theme pipeline health","description":"Add dashboards for new-cluster rate, match-method mix, parse failures, and merge precision proxies.","design":"Alerts target actionable failure modes with clear runbook links.","acceptance_criteria":"On-call/operator can detect and diagnose issues quickly.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:10.093634+08:00","created_by":"David Ten","updated_at":"2026-02-25T08:41:17.644405+08:00","closed_at":"2026-02-25T08:41:17.644405+08:00","close_reason":"Added pipeline observability dashboard API, thresholded alerts with runbook links, frontend health card, and unit coverage","dependencies":[{"issue_id":"StockScreenClaude-bv9.8.4","depends_on_id":"StockScreenClaude-bv9.8","type":"parent-child","created_at":"2026-02-24T01:27:10.094706+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.8.4","depends_on_id":"StockScreenClaude-bv9.8.3","type":"blocks","created_at":"2026-02-24T01:27:23.097576+08:00","created_by":"David Ten"}],"comments":[{"id":180,"issue_id":"StockScreenClaude-bv9.8.4","author":"David Ten","text":"Dashboards should tie metrics to actions: each alert links to owning runbook section and likely failure classes. Prefer small actionable alert sets over broad noisy coverage.","created_at":"2026-02-23T17:32:00Z"}]}
{"id":"StockScreenClaude-bv9.8.5","title":"E8-T5 Execute staged rollout: shadow canary full with explicit gates","description":"Roll out changes in phases with automated gate checks and abort criteria.","design":"Include rollback trigger conditions and ownership.","acceptance_criteria":"Rollout completes with gate evidence and no unresolved critical incidents.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:10.358962+08:00","created_by":"David Ten","updated_at":"2026-02-24T01:27:10.358962+08:00","dependencies":[{"issue_id":"StockScreenClaude-bv9.8.5","depends_on_id":"StockScreenClaude-bv9.8","type":"parent-child","created_at":"2026-02-24T01:27:10.359995+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.8.5","depends_on_id":"StockScreenClaude-bv9.8.4","type":"blocks","created_at":"2026-02-24T01:27:23.280679+08:00","created_by":"David Ten"}],"comments":[{"id":181,"issue_id":"StockScreenClaude-bv9.8.5","author":"David Ten","text":"Rollout phases should have predeclared entry/exit gates and abort conditions. Shadow metrics must be compared against baseline windows before canary promotion decisions.","created_at":"2026-02-23T17:32:01Z"}]}
{"id":"StockScreenClaude-bv9.8.6","title":"E8-T6 Publish ADRs operator runbooks and analyst usage guide","description":"Document architecture, operations, tuning policy, and analyst workflow semantics.","design":"Docs should be sufficient for future maintainers without historical context.","acceptance_criteria":"Documentation is complete, discoverable, and linked from operational surfaces.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:10.59263+08:00","created_by":"David Ten","updated_at":"2026-02-24T01:27:10.59263+08:00","dependencies":[{"issue_id":"StockScreenClaude-bv9.8.6","depends_on_id":"StockScreenClaude-bv9.8","type":"parent-child","created_at":"2026-02-24T01:27:10.59386+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.8.6","depends_on_id":"StockScreenClaude-bv9.8.5","type":"blocks","created_at":"2026-02-24T01:27:23.461229+08:00","created_by":"David Ten"}],"comments":[{"id":182,"issue_id":"StockScreenClaude-bv9.8.6","author":"David Ten","text":"Documentation should capture architecture rationale, operational playbooks, and analyst decision guidance. Assume future maintainers lack historical context and need end-to-end onboarding clarity.","created_at":"2026-02-23T17:32:02Z"}]}
{"id":"StockScreenClaude-bv9.8.7","title":"E8-T7 Run post-launch retrospective and create tuning follow-up backlog","description":"Collect outcomes metrics and open follow-up issues for threshold or UX tuning.","design":"Feed empirical learnings back into a sustained improvement loop.","acceptance_criteria":"Retrospective complete and prioritized follow-up backlog created.","status":"open","priority":3,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T01:27:10.821946+08:00","created_by":"David Ten","updated_at":"2026-02-24T01:27:10.821946+08:00","dependencies":[{"issue_id":"StockScreenClaude-bv9.8.7","depends_on_id":"StockScreenClaude-bv9.8","type":"parent-child","created_at":"2026-02-24T01:27:10.822934+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-bv9.8.7","depends_on_id":"StockScreenClaude-bv9.8.6","type":"blocks","created_at":"2026-02-24T01:27:23.641791+08:00","created_by":"David Ten"}],"comments":[{"id":183,"issue_id":"StockScreenClaude-bv9.8.7","author":"David Ten","text":"Retrospective should focus on measurable outcomes: duplicate reduction, match precision, incident volume, and analyst throughput. Convert findings into bounded follow-up beads with owners and priorities.","created_at":"2026-02-23T17:32:02Z"}]}
{"id":"StockScreenClaude-bw0","title":"Z1: Remove legacy compute-per-request scan path","status":"closed","priority":1,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-18T23:59:54.952006+08:00","created_by":"David Ten","updated_at":"2026-02-19T00:29:34.967849+08:00","closed_at":"2026-02-19T00:29:34.967849+08:00","close_reason":"Z1 complete: removed ~1600 lines of legacy scan code, migrated CRUD endpoints to UoW, 198 tests passing"}
{"id":"StockScreenClaude-c6b","title":"Update Frontend API Client","description":"Add getCacheHealth(), refreshCache(mode), and forceCancelRefresh() to frontend/src/api/cache.js.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-05T15:01:11.620647+08:00","created_by":"David Ten","updated_at":"2026-02-05T15:10:36.427839+08:00","closed_at":"2026-02-05T15:10:36.427839+08:00","close_reason":"Added getCacheHealth(), refreshCache(mode), and forceCancelRefresh() functions"}
{"id":"StockScreenClaude-ccj","title":"Make all cache components holiday-aware via pandas_market_calendars","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-19T12:43:29.523434+08:00","created_by":"David Ten","updated_at":"2026-02-19T12:47:52.124918+08:00","closed_at":"2026-02-19T12:47:52.124918+08:00","close_reason":"Replaced manual holiday lists with pandas_market_calendars, fixed timezone bugs, added trading-day guards to Celery tasks"}
{"id":"StockScreenClaude-cne","title":"T6: Add get_universe_definition() reconstruction helper to Scan model","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:49:06.712122+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:23.815815+08:00","closed_at":"2026-02-16T14:58:23.815815+08:00","close_reason":"Implemented in universe unification session","dependencies":[{"issue_id":"StockScreenClaude-cne","depends_on_id":"StockScreenClaude-47f","type":"blocks","created_at":"2026-02-16T14:50:08.217163+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-cne","depends_on_id":"StockScreenClaude-eeh","type":"blocks","created_at":"2026-02-16T14:50:08.513437+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-dls","title":"T6: Query performance guardrails — prevent N+1 regressions","description":"## What\nAdd lightweight performance benchmarks that catch query regressions (especially N+1 queries) in the feature store path.\n\n## Files to Create\n- backend/tests/performance/test_query_performance.py\n\n## Test Design\n1. Seed a minimal feature store table (~500 rows, 1 run)\n2. Run common query patterns:\n   - Paginated results (page 1 of 20)\n   - Filtered by rating \u003e= 3\n   - Sorted by composite_score DESC\n   - Filter + sort combined\n3. Assert for each query:\n   - Query count \u003c= expected (usually 2: count + select)\n   - Execution time \u003c budget (e.g., 100ms for SQLite)\n4. Compare against legacy scan_results queries for same patterns\n\n## Implementation\n- Use SQLAlchemy event listeners to count queries\n- Use pytest fixtures to seed consistent test data\n- Budgets should be generous (not flaky) but catch order-of-magnitude regressions\n\n## Acceptance Criteria\n- No N+1 queries in any tested pattern\n- Query count assertions prevent regression\n- Timing budgets catch major performance issues\n- Tests run in \u003c10 seconds (including DB setup)\n\n## Depends On\n- G2 (feature store query path must exist)","status":"closed","priority":3,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:06:16.26408+08:00","created_by":"David Ten","updated_at":"2026-02-18T16:51:03.489378+08:00","closed_at":"2026-02-18T16:51:03.489378+08:00","close_reason":"Implemented: 21 query perf tests (12 query count, 3 invariance, 6 timing), shared count_queries helper, performance marker","dependencies":[{"issue_id":"StockScreenClaude-dls","depends_on_id":"StockScreenClaude-78r","type":"blocks","created_at":"2026-02-17T00:08:13.207028+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-dwz","title":"Fix cache warming deadlock risk","status":"closed","priority":1,"issue_type":"bug","owner":"davidten7@gmail.com","created_at":"2026-02-16T10:28:19.708173+08:00","created_by":"David Ten","updated_at":"2026-02-16T10:33:06.228819+08:00","closed_at":"2026-02-16T10:33:06.228819+08:00","close_reason":"Implemented all 3 changes: atomic Lua release/extend, re-entrant acquire, extracted _impl functions"}
{"id":"StockScreenClaude-e26","title":"EPIC-D: Read APIs — Six Use Cases for Scan Query Endpoints","description":"Refactor all scan read/query endpoints from direct DB access in routers to proper use cases. Covers: GetScanResults, GetFilterOptions, GetSingleResult, GetPeers, ExportScanResults, and the new ExplainStock use case. Routers become thin transport wrappers. Corresponds to Phase D of the v3 architecture plan.","status":"closed","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-16T23:58:57.634109+08:00","created_by":"David Ten","updated_at":"2026-02-17T17:45:58.192945+08:00","closed_at":"2026-02-17T17:45:58.192945+08:00","close_reason":"All 6 use cases (D1-D6) completed: GetScanResults, GetFilterOptions, GetSingleResult, GetPeers, ExportScanResults, ExplainStock — all with unit tests","dependencies":[{"issue_id":"StockScreenClaude-e26","depends_on_id":"StockScreenClaude-iai","type":"blocks","created_at":"2026-02-17T17:45:52.002362+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-e26","depends_on_id":"StockScreenClaude-7t6","type":"blocks","created_at":"2026-02-17T17:45:52.283884+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-e26","depends_on_id":"StockScreenClaude-toj","type":"blocks","created_at":"2026-02-17T17:45:52.587523+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-e26","depends_on_id":"StockScreenClaude-mzk","type":"blocks","created_at":"2026-02-17T17:45:52.889245+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-e26","depends_on_id":"StockScreenClaude-yt7","type":"blocks","created_at":"2026-02-17T17:45:53.182135+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-e26","depends_on_id":"StockScreenClaude-7tb","type":"blocks","created_at":"2026-02-17T17:45:53.447242+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-e2m","title":"F2: Add Celery beat scheduled task for daily snapshot","description":"## What\nCreate a thin Celery task wrapper for BuildDailyFeatureSnapshotUseCase and register it in Celery beat schedule.\n\n## Files to Create\n- backend/app/interfaces/tasks/feature_store_tasks.py — Thin Celery task:\n  1. Open UoW\n  2. Wire use case via bootstrap\n  3. Call BuildDailyFeatureSnapshotUseCase.execute(as_of_date=None for 'today')\n  4. Return summary stats\n\n## Files to Modify\n- backend/app/celery_app.py (or beat schedule config) — Add beat entry:\n  - Schedule: daily at configured time (e.g., 6:00 AM ET on weekdays)\n  - Queue: data_fetch (respects rate limits via single-worker queue)\n  - Task: feature_store_tasks.build_daily_snapshot\n\n## Considerations\n- Must route to data_fetch queue since it makes upstream API calls\n- Should be idempotent: if run twice for same date, creates separate runs\n- Add monitoring: log correlation_id at task start for traceability\n\n## Acceptance Criteria\n- Beat schedule includes daily snapshot task\n- Task is thin wrapper (\u003c30 lines)\n- Runs on data_fetch queue\n- Logs correlation_id for tracing\n\n## Depends On\n- F1 (BuildDailyFeatureSnapshotUseCase must exist)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:04:20.010277+08:00","created_by":"David Ten","updated_at":"2026-02-18T01:50:33.332596+08:00","closed_at":"2026-02-18T01:50:33.332596+08:00","close_reason":"Implemented Celery task wrapper and beat schedule entry for daily feature snapshot","dependencies":[{"issue_id":"StockScreenClaude-e2m","depends_on_id":"StockScreenClaude-0ch","type":"blocks","created_at":"2026-02-17T00:08:11.262043+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-e46","title":"Fix cache health false stuck status + robustness improvements","status":"closed","priority":1,"issue_type":"bug","owner":"davidten7@gmail.com","created_at":"2026-02-19T13:52:59.545768+08:00","created_by":"David Ten","updated_at":"2026-02-19T13:59:25.195956+08:00","closed_at":"2026-02-19T13:59:25.195956+08:00","close_reason":"Implemented terminal heartbeat, grace period, three-tier polling, optimistic UI, lock TTL cap, symbol failure tracking"}
{"id":"StockScreenClaude-e4d","title":"Run setup-engine unit suite in provisioned env (sqlalchemy/pandas missing in current agent env)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-20T11:54:20.521923+08:00","created_by":"David Ten","updated_at":"2026-02-21T15:47:29.537689+08:00","closed_at":"2026-02-21T15:47:29.537689+08:00","close_reason":"All 163 setup-engine unit tests pass (1.50s, 0 failures). Dependencies (sqlalchemy, pandas, scipy, numpy) confirmed present in backend/venv."}
{"id":"StockScreenClaude-eeh","title":"T1: Create universe schema module with enums and UniverseDefinition model","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:48:50.675642+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:23.582175+08:00","closed_at":"2026-02-16T14:58:23.582175+08:00","close_reason":"Implemented in universe unification session"}
{"id":"StockScreenClaude-eh1","title":"T9: Update ScanCreateRequest to accept structured universe","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:49:16.333681+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:23.949454+08:00","closed_at":"2026-02-16T14:58:23.949454+08:00","close_reason":"Implemented in universe unification session","dependencies":[{"issue_id":"StockScreenClaude-eh1","depends_on_id":"StockScreenClaude-eeh","type":"blocks","created_at":"2026-02-16T14:50:19.13969+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-f2w","title":"SE-E4: scan_result_query.py — setup_engine JSON field mappings + SQL sorting","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-20T23:47:40.075388+08:00","created_by":"David Ten","updated_at":"2026-02-20T23:53:06.752977+08:00","closed_at":"2026-02-20T23:53:06.752977+08:00","close_reason":"18 se_* JSON field mappings + _JSON_SORT_NUMERIC + _json_sort_expr helper + categorical/text filter support for JSON fields"}
{"id":"StockScreenClaude-fa0","title":"Fix cache refresh infinite loop + performance optimizations","status":"closed","priority":1,"issue_type":"bug","owner":"davidten7@gmail.com","created_at":"2026-02-19T13:30:51.681719+08:00","created_by":"David Ten","updated_at":"2026-02-19T13:31:00.047889+08:00","closed_at":"2026-02-19T13:31:00.047889+08:00","close_reason":"Implemented all 9 bug fixes (A1-A9) and 5 performance optimizations (B1-B5). Fixes: eliminated weekly_full_refresh child task spawning, Beat catchup prevention, schedule overlap removal, stuck detection for expired heartbeat, lock TTL extension, dir() bug fix, Redis-only SPY health check, partial→fresh threshold, grace period widening. Performance: yf.download batch fetching, cached expected_date, batch Redis pipeline writes, batch DB writes, pipeline stale intraday scan."}
{"id":"StockScreenClaude-fni","title":"T2: Write unit tests for UniverseDefinition","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:48:54.276324+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:23.627957+08:00","closed_at":"2026-02-16T14:58:23.627957+08:00","close_reason":"Implemented in universe unification session","dependencies":[{"issue_id":"StockScreenClaude-fni","depends_on_id":"StockScreenClaude-eeh","type":"blocks","created_at":"2026-02-16T14:49:53.90838+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-gbg","title":"SE-G4: Frontend integration tests for Setup Engine","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-21T22:27:14.751672+08:00","created_by":"David Ten","updated_at":"2026-02-22T07:41:24.145138+08:00","closed_at":"2026-02-22T07:41:24.145138+08:00","close_reason":"73 tests pass across 4 files: formatUtils (30), SetupEngineDrawer (29), CompactRangeInput (8), CompactCheckbox (6)"}
{"id":"StockScreenClaude-h8u","title":"SE-G6: CI quality gates and release-readiness checklist","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-22T16:06:47.476687+08:00","created_by":"David Ten","updated_at":"2026-02-22T16:41:59.733448+08:00","closed_at":"2026-02-22T16:41:59.733448+08:00","close_reason":"Implemented Makefile with 5 quality gates, CI workflow, release checklist, and CLAUDE.md update"}
{"id":"StockScreenClaude-hcu","title":"G3: Migrate ancillary scan endpoints to feature store","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-18T21:32:37.832215+08:00","created_by":"David Ten","updated_at":"2026-02-18T21:38:10.501319+08:00","closed_at":"2026-02-18T21:38:10.501319+08:00","close_reason":"Migrated 4 ancillary scan endpoints (filter options, single result, peers, export) to dual-source feature store routing. Added 5 bridge methods to SqlFeatureStoreRepository, apply_sort_all to feature_store_query, updated 4 use cases, and wrote 34 unit tests."}
{"id":"StockScreenClaude-hkw","title":"EPIC-F: Daily Snapshot — Build Use Case, Celery Beat, DQ Checks","description":"Implement the offline daily snapshot pipeline. BuildDailyFeatureSnapshotUseCase resolves the trading day, loads universe, bulk-prepares data, runs multi-screener orchestration, persists to feature store, runs DQ checks, and publishes atomically (or quarantines on DQ failure). Adds Celery beat scheduling. Corresponds to Phase F of the v3 architecture plan.","status":"closed","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-16T23:59:00.008903+08:00","created_by":"David Ten","updated_at":"2026-02-19T12:05:35.112049+08:00","closed_at":"2026-02-19T12:05:35.112049+08:00","close_reason":"All deliverables complete: BuildDailyFeatureSnapshotUseCase, 5 DQ checks, atomic publish/quarantine, Celery beat scheduling"}
{"id":"StockScreenClaude-hq1","title":"T13: Update frontend API docs in scans.js","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:49:31.685869+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:24.129356+08:00","closed_at":"2026-02-16T14:58:24.129356+08:00","close_reason":"Implemented in universe unification session","dependencies":[{"issue_id":"StockScreenClaude-hq1","depends_on_id":"StockScreenClaude-bkd","type":"blocks","created_at":"2026-02-16T14:50:36.127498+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-iai","title":"D1: Create GetScanResultsUseCase — paginated, filtered, sorted query","description":"## What\nExtract the scan results query logic from the router into a proper use case. This is the most complex read endpoint — it handles filtering, sorting, and pagination.\n\n## Current State (backend/app/api/v1/scans.py)\nThe get_scan_results endpoint (~350 lines of filter construction) directly:\n- Parses 20+ filter parameters from query string\n- Builds SQLAlchemy queries with JSON extraction for details fields\n- Handles sorting on both regular columns and JSON-extracted fields\n- Implements pagination\n- Maps DB rows to response format\n\n## Files to Create\n- backend/app/use_cases/scanning/get_scan_results.py — GetScanResultsUseCase\n  - Input: scan_id, FilterSpec, SortSpec, PagingSpec (domain types from B2)\n  - Output: Page[ScanResultItemDomain] with total count\n  - Uses ScanResultRepository.query_results() port\n\n- backend/app/infra/query/scan_query_sqlalchemy.py — SQLAlchemy query builder\n  - Translates FilterSpec → SQLAlchemy WHERE clauses\n  - Translates SortSpec → ORDER BY\n  - Handles JSON field extraction for details-based filters\n  - Implements efficient COUNT + SELECT in single query\n\n## Why This Architecture\nBy putting the query builder in infra/ and the use case in use_cases/, we can:\n- Test the use case with a fake repo (returns canned data)\n- Test the query builder against a real SQLite DB in integration tests\n- Swap the query builder for a Postgres-specific one later without touching use case\n\n## Acceptance Criteria\n- Use case returns same results as current endpoint for all filter combinations\n- Router becomes thin: parse params → build specs → call use case → return response\n- FilterSpec supports all current filter fields\n- Pagination returns correct total counts\n- No N+1 queries\n\n## Depends On\n- A2 (wiring/bootstrap for injection)","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:02:38.319243+08:00","created_by":"David Ten","updated_at":"2026-02-17T10:42:39.779294+08:00","closed_at":"2026-02-17T10:42:39.779294+08:00","close_reason":"Implemented GetScanResultsUseCase with query builder, port extension, wiring, and 83 passing unit tests","dependencies":[{"issue_id":"StockScreenClaude-iai","depends_on_id":"StockScreenClaude-7lw","type":"blocks","created_at":"2026-02-17T00:08:10.941278+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ile","title":"G1: Add Scan.feature_run_id binding","description":"## What\nAdd a feature_run_id column to the Scan model so scans can be bound to a specific Feature Store run. This is the bridge between the online scan API and the offline feature store.\n\n## Files to Modify\n- backend/app/models/scan.py (or wherever Scan model lives) — Add:\n  - feature_run_id (Integer, FK → feature_runs.id, nullable=True)\n  - Nullable because legacy scans predate the feature store\n\n- backend/app/use_cases/scanning/create_scan.py — Update CreateScanUseCase:\n  - On scan creation, look up latest published feature run\n  - If available, bind scan.feature_run_id = latest_run.id\n  - If no published run exists, leave null (legacy behavior)\n\n## Migration\n- backend/migrations/add_scan_feature_run_id.py — Add column with ALTER TABLE\n\n## Why This Design\nBinding at creation time (not query time) ensures:\n1. Scan results are reproducible — they always reference the same snapshot\n2. No 'drift' if a new snapshot publishes while user is viewing results\n3. Clear audit trail of which data backed each scan\n\n## Acceptance Criteria\n- New scans get feature_run_id when a published run exists\n- Legacy scans (null feature_run_id) continue working unchanged\n- Migration runs cleanly on existing DB\n- CreateScanUseCase updated with binding logic\n\n## Depends On\n- E3 (Feature Store repos must exist for lookup)\n- A3 (CreateScanUseCase must exist)","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:04:36.509042+08:00","created_by":"David Ten","updated_at":"2026-02-18T10:37:03.869612+08:00","closed_at":"2026-02-18T10:37:03.869612+08:00","close_reason":"Implemented: added feature_run_id column to Scan model with FK to feature_runs, defensive lookup in CreateScanUseCase (fail-open), idempotent migration, API response exposure, 3 new unit tests (all 83 scan tests passing)","dependencies":[{"issue_id":"StockScreenClaude-ile","depends_on_id":"StockScreenClaude-rwf","type":"blocks","created_at":"2026-02-17T00:08:09.679096+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ile","depends_on_id":"StockScreenClaude-ban","type":"blocks","created_at":"2026-02-17T00:08:10.05618+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ixu","title":"SE-G7: Golden Regression Suite for Setup Engine","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-21T19:51:17.763768+08:00","created_by":"David Ten","updated_at":"2026-02-21T20:22:49.649861+08:00","closed_at":"2026-02-21T20:22:49.649861+08:00","close_reason":"15 golden tests pass (12 detectors + 3 aggregator)"}
{"id":"StockScreenClaude-jhs","title":"Z1: Remove legacy compute-per-request scan path","description":"## What\nOnce the feature store is stable and all endpoints are migrated, remove the legacy compute-per-request code path or downgrade it to an opt-in debug mode.\n\n## What to Remove/Deprecate\n- Legacy scan_results table writes (new scans use feature store)\n- Direct DB queries from routers (now in use cases)\n- Inline filter construction in scan router (~350 lines)\n- Business logic in Celery tasks (now in use cases)\n- Old ScanOrchestrator methods that were replaced by domain functions\n\n## What to Keep\n- scan_results table itself (historical data)\n- Backward-compatible API responses\n- Legacy path as opt-in debug mode (env var flag) for comparison testing\n\n## Migration Safety\n- Feature flag: SCAN_LEGACY_MODE=true to re-enable old path if issues found\n- Monitor for 2 weeks before removing feature flag\n- Keep scan_results table data for historical queries\n\n## Files to Modify\n- backend/app/api/v1/scans.py — Remove legacy code paths\n- backend/app/tasks/scan_tasks.py — Remove business logic (should already be thin from C2)\n- backend/app/scanners/scan_orchestrator.py — Remove replaced methods\n\n## Acceptance Criteria\n- All endpoints serve from feature store by default\n- Legacy mode available via feature flag\n- No dead code remaining (except behind feature flag)\n- All tests pass\n\n## Depends On\n- G3 (all ancillary endpoints migrated)\n- G4 (native endpoints working)","status":"closed","priority":3,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:06:29.157319+08:00","created_by":"David Ten","updated_at":"2026-02-19T06:40:22.178608+08:00","closed_at":"2026-02-19T06:40:22.178608+08:00","close_reason":"Duplicate of StockScreenClaude-bw0 which completed Z1: ~1600 lines of legacy scan code removed in f2ac8128, CRUD endpoints migrated to UoW, 198 tests passing","dependencies":[{"issue_id":"StockScreenClaude-jhs","depends_on_id":"StockScreenClaude-t5g","type":"blocks","created_at":"2026-02-17T00:08:13.500466+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-jhs","depends_on_id":"StockScreenClaude-6dx","type":"blocks","created_at":"2026-02-17T00:08:13.779209+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-jvu","title":"Implement reprocess_failed_items and identify_silent_failures","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-19T23:49:25.550099+08:00","created_by":"David Ten","updated_at":"2026-02-19T23:51:01.24681+08:00","closed_at":"2026-02-19T23:51:01.24681+08:00","close_reason":"Added _get_pipeline_source_ids helper, _load_reprocessing_config, reprocess_failed_items(), and identify_silent_failures()","dependencies":[{"issue_id":"StockScreenClaude-jvu","depends_on_id":"StockScreenClaude-6re","type":"blocks","created_at":"2026-02-19T23:49:32.499403+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-k92","title":"Add Smart Refresh API Endpoint","description":"Add POST /v1/cache/refresh endpoint that triggers the smart_refresh_cache task. Handles already_running detection and returns task_id.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-05T15:01:08.497602+08:00","created_by":"David Ten","updated_at":"2026-02-05T15:10:12.164074+08:00","closed_at":"2026-02-05T15:10:12.164074+08:00","close_reason":"Added GET /v1/cache/health, POST /v1/cache/refresh, and POST /v1/cache/force-cancel endpoints","dependencies":[{"issue_id":"StockScreenClaude-k92","depends_on_id":"StockScreenClaude-szs","type":"blocks","created_at":"2026-02-05T15:02:51.069891+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-k92","depends_on_id":"StockScreenClaude-5rl","type":"blocks","created_at":"2026-02-05T15:02:51.275019+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-kl3","title":"SE-C2 regression: three-weeks-tight relaxed fixture currently resolves to strict","description":"While running backend detector regression tests, tests/unit/test_detector_subtasks_c3a_c4a_c6a.py::test_three_weeks_tight_uses_relaxed_mode_when_strict_fails currently returns tight_mode='strict' instead of expected 'relaxed'. Investigate strict-vs-relaxed threshold logic or fixture calibration in three_weeks_tight detector and restore deterministic relaxed classification for the intended scenario.","status":"closed","priority":2,"issue_type":"bug","owner":"davidten7@gmail.com","created_at":"2026-02-20T09:22:45.917243+08:00","created_by":"David Ten","updated_at":"2026-02-20T09:42:19.767172+08:00","closed_at":"2026-02-20T09:42:19.767172+08:00","close_reason":"Completed"}
{"id":"StockScreenClaude-msl","title":"E2: Feature Store domain types, DQ functions, publish policy","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-17T19:31:16.530671+08:00","created_by":"David Ten","updated_at":"2026-02-17T19:34:01.634558+08:00","closed_at":"2026-02-17T19:34:01.634558+08:00","close_reason":"All domain types, DQ checks, publish policy, and tests implemented. 87 new tests, 137 total domain tests passing."}
{"id":"StockScreenClaude-mzk","title":"D4: Create GetPeersUseCase","description":"## What\nExtract peer stock lookup into a use case.\n\n## Current State\nThe peers endpoint in scans.py finds stocks in the same sector/industry as a given symbol within the same scan results.\n\n## Files to Create\n- backend/app/use_cases/scanning/get_peers.py — GetPeersUseCase\n  - Input: scan_id, symbol, peer_type (sector/industry)\n  - Output: list[ScanResultItemDomain]\n  - Uses ScanResultRepository port\n\n## Acceptance Criteria\n- Returns same peer list as current endpoint\n- Router is thin wrapper\n- Handles missing symbol gracefully\n\n## Depends On\n- D1 (establishes repository patterns)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:02:51.69309+08:00","created_by":"David Ten","updated_at":"2026-02-17T13:11:28.863371+08:00","closed_at":"2026-02-17T13:11:28.863371+08:00","close_reason":"Implemented GetPeersUseCase with PeerType enum, port methods, repo implementations, and 14 unit tests. Replaced 120-line direct-DB handler with 20-line use case call. Added sector peer support via ?peer_type=sector query param.","dependencies":[{"issue_id":"StockScreenClaude-mzk","depends_on_id":"StockScreenClaude-iai","type":"blocks","created_at":"2026-02-17T00:08:10.506982+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-mzl","title":"SE-D5: Self-Contained Explain Payload Builder","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-20T17:59:27.846333+08:00","created_by":"David Ten","updated_at":"2026-02-20T18:09:23.52054+08:00","closed_at":"2026-02-20T18:09:23.52054+08:00","close_reason":"Extracted self-contained build_explain_payload() function with ExplainBuilderInput/ExplainResult dataclasses. 55 new tests pass, all 67 regression tests pass."}
{"id":"StockScreenClaude-n3i","title":"Add batch-level backoff to warm_price_cache()","description":"After each batch, check failure rate. If \u003e50% failed, apply exponential backoff before proceeding.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T08:11:50.61287+08:00","created_by":"David Ten","updated_at":"2026-02-19T08:14:38.529077+08:00","closed_at":"2026-02-19T08:14:38.529077+08:00","close_reason":"Added batch-level exponential backoff (60s-480s) to warm_price_cache() when \u003e50% of batch fails"}
{"id":"StockScreenClaude-nrv","title":"EPIC-A: Scaffolding — Package Structure, Wiring, First Use Case","description":"Create the layered architecture package structure (domain/, use_cases/, infra/, interfaces/, wiring/), add dependency injection bootstrap, and refactor the first endpoint (POST /scans → CreateScanUseCase) as proof of concept. This epic establishes the foundation that all subsequent refactoring depends on. Corresponds to Phase A of the v3 architecture plan.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-16T23:58:14.608331+08:00","created_by":"David Ten","updated_at":"2026-02-17T17:37:37.716275+08:00","closed_at":"2026-02-17T17:37:37.716275+08:00","close_reason":"All 3 tasks (A1-A3) completed: package structure, DI bootstrap, CreateScanUseCase refactor"}
{"id":"StockScreenClaude-nu6","title":"T1: Domain unit tests — composite scorer + rating calculator","description":"## What\nWrite comprehensive unit tests for the extracted domain scoring logic. These should be fast (no IO) and cover all edge cases.\n\n## Files to Create\n- backend/tests/unit/domain/test_composite_scorer.py\n- backend/tests/unit/domain/test_rating_calculator.py\n\n## Test Cases for CompositeScorer\n- weighted_average: equal weights, unequal weights, single screener, zero weight\n- maximum: picks highest score correctly\n- minimum: picks lowest score correctly\n- Edge cases: empty screener list, all zeros, all 100s\n- Verify identical output to current ScanOrchestrator._calculate_composite_score\n\n## Test Cases for RatingCalculator\n- Each rating threshold boundary (just above, exactly at, just below)\n- Pass rate impact on rating\n- Edge cases: score of 0, score of 100, no passes\n- Verify identical output to current ScanOrchestrator._calculate_overall_rating\n\n## Parity Verification\nInclude a test that compares domain functions against current orchestrator for a set of known inputs, ensuring the extraction preserved behavior exactly.\n\n## Acceptance Criteria\n- 100% branch coverage on composite.py and rating.py\n- All tests pass in \u003c1 second (no IO)\n- Parity with current orchestrator verified\n\n## Depends On\n- B1 (domain scoring must be extracted)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:05:35.8701+08:00","created_by":"David Ten","updated_at":"2026-02-17T15:21:42.213463+08:00","closed_at":"2026-02-17T15:21:42.213463+08:00","close_reason":"Created 50 unit tests across two files: test_composite_scorer.py (24 tests) and test_rating_calculator.py (26 tests). Covers empty inputs, boundary values, all three composite methods, threshold mapping, pass-rate force-PASS, downgrades, no-downgrade edge cases, and 6 parity tests vs ScanOrchestrator. All pass in 0.08s.","dependencies":[{"issue_id":"StockScreenClaude-nu6","depends_on_id":"StockScreenClaude-3z0","type":"blocks","created_at":"2026-02-17T00:08:11.78513+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-o0h","title":"Update frontend for 5-step pipeline with retry display","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-19T23:49:28.413679+08:00","created_by":"David Ten","updated_at":"2026-02-19T23:54:36.650796+08:00","closed_at":"2026-02-19T23:54:36.650796+08:00","close_reason":"Updated PipelineProgressCard 5-step stepper, PipelineContext total_steps, ThemesPage failed count badge, themes.js API function","dependencies":[{"issue_id":"StockScreenClaude-o0h","depends_on_id":"StockScreenClaude-42l","type":"blocks","created_at":"2026-02-19T23:49:33.096401+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh","title":"LL2-ROOT Phase 2 Learning Loop v2 Program","description":"Umbrella program for Learning Loop v2: outcome analytics that are trustworthy, reproducible, and operationally sustainable from data semantics through UX and rollout.","design":"Background: forward-outcome analytics are currently blocked by price semantic ambiguity and missing analytics orchestration. Intent: deliver a complete system where correctness, reliability, and usability are co-equal goals. Evidence anchors: price cache adjustment handling and scheduler/registry drift risks. Defaults: US equities, NYSE sessions, SQLite-first execution constraints.","acceptance_criteria":"Root issue exists with all planned epics/tasks attached; dependency graph validates; final rollout gate criteria are represented in backlog.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:07.860134+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:07.860134+08:00","labels":["learning-loop-v2","ll2"],"comments":[{"id":88,"issue_id":"StockScreenClaude-ofh","author":"David Ten","text":"This root exists to prevent local optimizations that compromise global trust. Outcome analytics only adds value if correctness, reliability, and explainability are delivered together.","created_at":"2026-02-23T16:34:23Z"}]}
{"id":"StockScreenClaude-ofh.1","title":"LL2-E1 Canonical Price Semantics and Corporate-Action Integrity","description":"Establish deterministic raw/adjusted OHLC semantics as a hard prerequisite for all forward-outcome calculations.","design":"Why: outcome labels are invalid without deterministic adjustment semantics. Scope: audit, contract ADR, ingestion fixes, and historical reconciliation. Non-goal: changing unrelated scanner signal logic.","acceptance_criteria":"All ingestion paths conform to canonical price contract; adjusted calculations are validated through split/dividend edge windows.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:08.140147+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:08.140147+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.1","depends_on_id":"StockScreenClaude-ofh","type":"parent-child","created_at":"2026-02-24T00:34:08.141404+08:00","created_by":"David Ten"}],"comments":[{"id":89,"issue_id":"StockScreenClaude-ofh.1","author":"David Ten","text":"Current adj-close persistence behavior makes forward analytics fragile around corporate actions; this epic removes that structural risk.","created_at":"2026-02-23T16:34:23Z"}]}
{"id":"StockScreenClaude-ofh.1.1","title":"LL2-E1-T1 Audit all price ingestion paths and document adjustment defects","description":"Audit yfinance/bulk/cache write paths and capture raw vs adjusted semantic inconsistencies with file-level evidence.","design":"Context: establishes factual baseline before contract changes; includes edge windows with splits/dividends and stale data hazards.","acceptance_criteria":"Audit report published with invariant violations, affected modules, and severity.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:11.226528+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:59:14.622951+08:00","closed_at":"2026-02-24T00:59:14.622951+08:00","close_reason":"Completed: published price ingestion adjustment audit report with file-level evidence and severity","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.1.1","depends_on_id":"StockScreenClaude-ofh.1","type":"parent-child","created_at":"2026-02-24T00:34:11.227711+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.1.2","title":"LL2-E1-T2 Publish canonical price contract ADR","description":"Define canonical raw/adjusted columns, adjustment factor semantics, and allowed transformations for outcome calculations.","design":"Context: converts audit findings into enforceable contract; includes temporal and corporate-action semantics.","acceptance_criteria":"ADR approved and referenced by implementation/tests; invariants are explicit and machine-checkable.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:11.499624+08:00","created_by":"David Ten","updated_at":"2026-02-24T01:08:25.428868+08:00","closed_at":"2026-02-24T01:08:25.428868+08:00","close_reason":"Completed: published canonical price contract ADR with machine-check invariant spec and unit-test references","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.1.2","depends_on_id":"StockScreenClaude-ofh.1","type":"parent-child","created_at":"2026-02-24T00:34:11.500844+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.1.2","depends_on_id":"StockScreenClaude-ofh.1.1","type":"blocks","created_at":"2026-02-24T00:34:26.361788+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.1.3","title":"LL2-E1-T3 Implement ingestion/persistence fixes for canonical raw+adjusted fields","description":"Update ingestion/persistence flows so adjusted fields are never aliases of raw close and are consistently derived from contract.","design":"Context: applies contract at source; prioritizes deterministic behavior under SQLite and retry contexts.","acceptance_criteria":"All ingest paths conform to ADR; migration strategy for existing rows is defined and tested.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:11.775532+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:11.775532+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.1.3","depends_on_id":"StockScreenClaude-ofh.1","type":"parent-child","created_at":"2026-02-24T00:34:11.776588+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.1.3","depends_on_id":"StockScreenClaude-ofh.1.2","type":"blocks","created_at":"2026-02-24T00:34:26.590877+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.1.4","title":"LL2-E1-T4 Backfill historical price semantics and ship reconciliation report","description":"Backfill/repair historical price rows using canonical semantics and publish discrepancy/reconciliation outcomes.","design":"Context: protects downstream analytics from silent historical corruption in adjusted series.","acceptance_criteria":"Backfill complete; high-severity discrepancies resolved; reconciliation report archived.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:12.055407+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:12.055407+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.1.4","depends_on_id":"StockScreenClaude-ofh.1","type":"parent-child","created_at":"2026-02-24T00:34:12.056623+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.1.4","depends_on_id":"StockScreenClaude-ofh.1.3","type":"blocks","created_at":"2026-02-24T00:34:26.816444+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.10","title":"LL2-E10 Evaluation Explorer Leaderboards and Reliability UX","description":"Ship analyst-facing evaluation UX with timeline drilldown and explicit reliability signals.","design":"Why: this is decision support, not dashboard decoration. Scope includes pages, scan-row outcome previews, and uncertainty-first affordances.","acceptance_criteria":"Explorer/leaderboard/timeline UX is production-ready and communicates confidence, exclusions, and calibration comparison context.","status":"open","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:10.621097+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:10.621097+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.10","depends_on_id":"StockScreenClaude-ofh","type":"parent-child","created_at":"2026-02-24T00:34:10.622141+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.10","depends_on_id":"StockScreenClaude-ofh.6","type":"blocks","created_at":"2026-02-24T00:34:36.72216+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.10","depends_on_id":"StockScreenClaude-ofh.7","type":"blocks","created_at":"2026-02-24T00:34:36.947695+08:00","created_by":"David Ten"}],"comments":[{"id":98,"issue_id":"StockScreenClaude-ofh.10","author":"David Ten","text":"We ship decision support, not dashboards; UX must expose uncertainty and data quality context clearly.","created_at":"2026-02-23T16:34:25Z"}]}
{"id":"StockScreenClaude-ofh.10.1","title":"LL2-E10-T1 Build evaluation explorer and leaderboard pages","description":"Implement analyst-facing explorer and leaderboard UI pages backed by evaluation APIs.","design":"Context: primary UX surface for learning-loop workflows.","acceptance_criteria":"Pages support key filters, time windows, sorting, and drilldowns.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:21.268005+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:21.268005+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.10.1","depends_on_id":"StockScreenClaude-ofh.10","type":"parent-child","created_at":"2026-02-24T00:34:21.269925+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.10.2","title":"LL2-E10-T2 Integrate scan-row outcome previews and symbol timeline panel","description":"Add scan-row outcome preview chips and timeline panel drilldown.","design":"Context: embeds analytics into existing scan workflow.","acceptance_criteria":"Users can pivot from scan results into historical outcome context with minimal friction.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:21.626626+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:21.626626+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.10.2","depends_on_id":"StockScreenClaude-ofh.10","type":"parent-child","created_at":"2026-02-24T00:34:21.628231+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.10.2","depends_on_id":"StockScreenClaude-ofh.10.1","type":"blocks","created_at":"2026-02-24T00:34:32.225736+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.10.3","title":"LL2-E10-T3 Add reliability badges tooltips and calibration compare UX","description":"Expose reliability context (sample tier/CI/exclusions) and calibration comparison affordances in UI.","design":"Context: uncertainty communication is a core product requirement.","acceptance_criteria":"Reliability signals are visible and interpretable at point of decision.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:21.916363+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:21.916363+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.10.3","depends_on_id":"StockScreenClaude-ofh.10","type":"parent-child","created_at":"2026-02-24T00:34:21.917415+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.10.3","depends_on_id":"StockScreenClaude-ofh.10.1","type":"blocks","created_at":"2026-02-24T00:34:32.455193+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.11","title":"LL2-E11 Verification Performance Documentation and Production Readiness","description":"Consolidate test matrix, performance gates, docs/runbooks, staged rollout, and final launch gate signoff.","design":"Why: no production trust without proof of correctness and operability. Scope includes verification stack, performance regression guardrails, docs, and staged rollout governance.","acceptance_criteria":"Critical test suites pass; performance SLO gates enforced; docs complete; shadow rollout complete; final readiness gate closed.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:10.918037+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:10.918037+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.11","depends_on_id":"StockScreenClaude-ofh","type":"parent-child","created_at":"2026-02-24T00:34:10.919189+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.11","depends_on_id":"StockScreenClaude-ofh.1","type":"blocks","created_at":"2026-02-24T00:34:37.182381+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.11","depends_on_id":"StockScreenClaude-ofh.2","type":"blocks","created_at":"2026-02-24T00:34:37.407011+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.11","depends_on_id":"StockScreenClaude-ofh.3","type":"blocks","created_at":"2026-02-24T00:34:37.637169+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.11","depends_on_id":"StockScreenClaude-ofh.4","type":"blocks","created_at":"2026-02-24T00:34:37.866349+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.11","depends_on_id":"StockScreenClaude-ofh.5","type":"blocks","created_at":"2026-02-24T00:34:38.100209+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.11","depends_on_id":"StockScreenClaude-ofh.6","type":"blocks","created_at":"2026-02-24T00:34:38.335561+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.11","depends_on_id":"StockScreenClaude-ofh.7","type":"blocks","created_at":"2026-02-24T00:34:38.588673+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.11","depends_on_id":"StockScreenClaude-ofh.8","type":"blocks","created_at":"2026-02-24T00:34:38.814894+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.11","depends_on_id":"StockScreenClaude-ofh.9","type":"blocks","created_at":"2026-02-24T00:34:39.044858+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.11","depends_on_id":"StockScreenClaude-ofh.10","type":"blocks","created_at":"2026-02-24T00:34:39.293242+08:00","created_by":"David Ten"}],"comments":[{"id":99,"issue_id":"StockScreenClaude-ofh.11","author":"David Ten","text":"No launch without proof of correctness, performance, and operability.","created_at":"2026-02-23T16:34:26Z"}]}
{"id":"StockScreenClaude-ofh.11.1","title":"LL2-E11-T1 Build unit test suites for price outcome regime and reliability math","description":"Implement unit suites covering price semantics, outcome calculations, regime mapping, and reliability estimators.","design":"Context: function-level correctness baseline before integration rollout.","acceptance_criteria":"Unit suites pass with explicit edge-case coverage thresholds.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:22.198086+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:22.198086+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.11.1","depends_on_id":"StockScreenClaude-ofh.11","type":"parent-child","created_at":"2026-02-24T00:34:22.199306+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.11.2","title":"LL2-E11-T2 Build integration test suites for compute orchestration APIs and cache invalidation","description":"Implement integration suites for compute orchestration, API correctness, and deterministic cache invalidation.","design":"Context: validates subsystem behavior across boundaries.","acceptance_criteria":"Integration suites pass against representative historical windows.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:22.497502+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:22.497502+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.11.2","depends_on_id":"StockScreenClaude-ofh.11","type":"parent-child","created_at":"2026-02-24T00:34:22.498608+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.11.2","depends_on_id":"StockScreenClaude-ofh.11.1","type":"blocks","created_at":"2026-02-24T00:34:32.697612+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.11.3","title":"LL2-E11-T3 Add performance benchmarks and SLO regression gates","description":"Create performance benchmarks and enforce SLO regression gates for compute and query paths.","design":"Context: protects user experience and operational predictability.","acceptance_criteria":"CI/perf gates fail on regressions beyond agreed thresholds.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:22.770916+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:22.770916+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.11.3","depends_on_id":"StockScreenClaude-ofh.11","type":"parent-child","created_at":"2026-02-24T00:34:22.772705+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.11.3","depends_on_id":"StockScreenClaude-ofh.11.2","type":"blocks","created_at":"2026-02-24T00:34:32.925451+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.11.4","title":"LL2-E11-T4 Publish ADRs operator runbook and analyst interpretation guide","description":"Publish architecture ADRs, operator runbooks, and analyst interpretation guidance for reliability semantics.","design":"Context: future-self maintainability and onboarding support.","acceptance_criteria":"Documentation is complete, versioned, and cross-linked in project docs.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:23.045676+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:23.045676+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.11.4","depends_on_id":"StockScreenClaude-ofh.11","type":"parent-child","created_at":"2026-02-24T00:34:23.046701+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.11.4","depends_on_id":"StockScreenClaude-ofh.11.2","type":"blocks","created_at":"2026-02-24T00:34:33.162433+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.11.5","title":"LL2-E11-T5 Execute staged rollout shadow mode and final production readiness gate","description":"Execute shadow rollout, compare outputs, and close final readiness gate with explicit signoff criteria.","design":"Context: controlled production adoption with safety checks.","acceptance_criteria":"Shadow metrics acceptable and final launch checklist fully complete.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:23.405054+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:23.405054+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.11.5","depends_on_id":"StockScreenClaude-ofh.11","type":"parent-child","created_at":"2026-02-24T00:34:23.406097+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.11.5","depends_on_id":"StockScreenClaude-ofh.11.3","type":"blocks","created_at":"2026-02-24T00:34:33.434283+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.11.5","depends_on_id":"StockScreenClaude-ofh.11.4","type":"blocks","created_at":"2026-02-24T00:34:33.66439+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.2","title":"LL2-E2 Outcome Definition Registry and Reusable Fact Model","description":"Introduce immutable outcome definitions and reusable outcome facts decoupled from single feature-run row identity.","design":"Why: versioned analytics need immutable definitions and reusable facts to avoid destructive rewrites and duplicate recomputation. Scope includes schema, domain ports, repositories, and bootstrap defaults.","acceptance_criteria":"Outcome definition and fact schemas implemented; UoW wiring complete; migration strategy supports version coexistence and traceability.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:08.418527+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:08.418527+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.2","depends_on_id":"StockScreenClaude-ofh","type":"parent-child","created_at":"2026-02-24T00:34:08.420776+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.2","depends_on_id":"StockScreenClaude-ofh.1","type":"blocks","created_at":"2026-02-24T00:34:33.889662+08:00","created_by":"David Ten"}],"comments":[{"id":90,"issue_id":"StockScreenClaude-ofh.2","author":"David Ten","text":"This epic protects reproducibility and enables compare-across-definition analytics without destructive rewrites.","created_at":"2026-02-23T16:34:24Z"}]}
{"id":"StockScreenClaude-ofh.2.1","title":"LL2-E2-T1 Create outcome_definitions schema and immutability rules","description":"Add immutable outcome definition artifact with entry basis, horizons, behavior flags, and benchmark semantics.","design":"Context: reproducibility anchor for analytics and calibration comparisons.","acceptance_criteria":"Definitions cannot be mutated in-place after activation; versioning rules validated.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:12.341523+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:12.341523+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.2.1","depends_on_id":"StockScreenClaude-ofh.2","type":"parent-child","created_at":"2026-02-24T00:34:12.342608+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.2.2","title":"LL2-E2-T2 Create outcome_facts and run_outcome_links schemas","description":"Persist reusable outcome facts and separate mappings from feature runs/scans to those facts.","design":"Context: compute-once/link-many model to reduce duplication and preserve history.","acceptance_criteria":"Schema supports many-to-many links and parallel versions without destructive overwrite.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:12.616868+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:12.616868+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.2.2","depends_on_id":"StockScreenClaude-ofh.2","type":"parent-child","created_at":"2026-02-24T00:34:12.618072+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.2.2","depends_on_id":"StockScreenClaude-ofh.2.1","type":"blocks","created_at":"2026-02-24T00:34:27.046025+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.2.3","title":"LL2-E2-T3 Implement ORM/domain/UoW wiring for outcomes context","description":"Implement models, repositories, ports, and unit-of-work integration for outcomes bounded context.","design":"Context: enforces layered architecture consistency with existing codebase patterns.","acceptance_criteria":"Outcome use cases can execute without coupling to scan/feature store implementation details.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:12.89284+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:12.89284+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.2.3","depends_on_id":"StockScreenClaude-ofh.2","type":"parent-child","created_at":"2026-02-24T00:34:12.893979+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.2.3","depends_on_id":"StockScreenClaude-ofh.2.2","type":"blocks","created_at":"2026-02-24T00:34:27.285639+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.2.4","title":"LL2-E2-T4 Seed default definitions and migration-safe definition bootstrap","description":"Seed baseline definitions (next_open default and close-entry sensitivity) and ensure deterministic bootstrap.","design":"Context: explicit defaults avoid hidden behavioral drift across environments.","acceptance_criteria":"Bootstrap behavior is deterministic for fresh and upgraded databases.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:13.174865+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:13.174865+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.2.4","depends_on_id":"StockScreenClaude-ofh.2","type":"parent-child","created_at":"2026-02-24T00:34:13.17583+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.2.4","depends_on_id":"StockScreenClaude-ofh.2.3","type":"blocks","created_at":"2026-02-24T00:34:27.506387+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.3","title":"LL2-E3 Outcome Compute Engine with Maturity-Aware Idempotency","description":"Build compute pipeline for returns/excursions/behavior flags with partial-horizon maturity and resumable idempotent updates.","design":"Why: freshness must not compromise determinism. Architecture: matured-candidate selector, vectorized math, horizon readiness state, and queue/retry policy under SQLite constraints.","acceptance_criteria":"Publish-triggered compute and nightly reconciler both operate idempotently; partial horizons persist safely without duplication.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:08.692369+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:08.692369+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.3","depends_on_id":"StockScreenClaude-ofh","type":"parent-child","created_at":"2026-02-24T00:34:08.693616+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.3","depends_on_id":"StockScreenClaude-ofh.2","type":"blocks","created_at":"2026-02-24T00:34:34.138927+08:00","created_by":"David Ten"}],"comments":[{"id":91,"issue_id":"StockScreenClaude-ofh.3","author":"David Ten","text":"The goal is freshness without recomputation chaos: publish-driven updates plus deterministic nightly repair.","created_at":"2026-02-23T16:34:24Z"}]}
{"id":"StockScreenClaude-ofh.3.1","title":"LL2-E3-T1 Implement matured candidate selector query","description":"Implement selector that finds symbols/runs/horizons eligible for compute based on latest trading data and definition policy.","design":"Context: gatekeeper for idempotent partial-maturity processing.","acceptance_criteria":"Selector is deterministic and non-duplicative across reruns.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:13.461609+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:13.461609+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.3.1","depends_on_id":"StockScreenClaude-ofh.3","type":"parent-child","created_at":"2026-02-24T00:34:13.462889+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.3.2","title":"LL2-E3-T2 Implement vectorized outcome math for returns MFE MAE and behavioral flags","description":"Implement canonical outcome calculations for returns, MFE/MAE, and behavioral follow-through metrics.","design":"Context: central analytics engine; no look-ahead and adjusted-price invariants required.","acceptance_criteria":"Math suite passes synthetic and historical fixture validation.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:13.733732+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:13.733732+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.3.2","depends_on_id":"StockScreenClaude-ofh.3","type":"parent-child","created_at":"2026-02-24T00:34:13.734949+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.3.2","depends_on_id":"StockScreenClaude-ofh.3.1","type":"blocks","created_at":"2026-02-24T00:34:27.728297+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.3.3","title":"LL2-E3-T3 Add maturity tracking and partial horizon update logic","description":"Persist horizon readiness state, completion timestamps, and partial-update metadata.","design":"Context: supports asynchronous horizon maturity and retry safety.","acceptance_criteria":"5d/10d can materialize before 20d/60d without duplicate or inconsistent rows.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:14.010699+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:14.010699+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.3.3","depends_on_id":"StockScreenClaude-ofh.3","type":"parent-child","created_at":"2026-02-24T00:34:14.012439+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.3.3","depends_on_id":"StockScreenClaude-ofh.3.2","type":"blocks","created_at":"2026-02-24T00:34:27.952484+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.3.4","title":"LL2-E3-T4 Add publish-triggered compute task and nightly reconciler task","description":"Wire event-first compute trigger on feature publish plus nightly reconciler for missed work.","design":"Context: balances freshness with eventual consistency.","acceptance_criteria":"Fresh labels are generated quickly; stale gaps are repaired automatically.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:14.286568+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:14.286568+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.3.4","depends_on_id":"StockScreenClaude-ofh.3","type":"parent-child","created_at":"2026-02-24T00:34:14.288087+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.3.4","depends_on_id":"StockScreenClaude-ofh.3.3","type":"blocks","created_at":"2026-02-24T00:34:28.19002+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.3.5","title":"LL2-E3-T5 Add analytics queue routing concurrency limits retries and dead-letter policy","description":"Define queue routing, concurrency caps, retries, and poison-task handling for analytics jobs.","design":"Context: SQLite-safe operational behavior is mandatory for reliability.","acceptance_criteria":"Execution policy documented and observable under failure/load scenarios.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:14.557187+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:14.557187+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.3.5","depends_on_id":"StockScreenClaude-ofh.3","type":"parent-child","created_at":"2026-02-24T00:34:14.558332+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.3.5","depends_on_id":"StockScreenClaude-ofh.3.4","type":"blocks","created_at":"2026-02-24T00:34:28.416518+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.4","title":"LL2-E4 Outcome DQ Policy Observability and Operational SLOs","description":"Implement trust controls, run-state visibility, and SLO instrumentation for outcome computation quality and freshness.","design":"Why: analytics adoption depends on visible trust state. Scope includes DQ checks, exclusion policy, health/status surfaces, and alert/runbook integration.","acceptance_criteria":"DQ policy operational; compute-run telemetry available; operators can diagnose freshness/failure state without ad-hoc DB forensics.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:08.968127+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:08.968127+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.4","depends_on_id":"StockScreenClaude-ofh","type":"parent-child","created_at":"2026-02-24T00:34:08.969767+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.4","depends_on_id":"StockScreenClaude-ofh.3","type":"blocks","created_at":"2026-02-24T00:34:34.367899+08:00","created_by":"David Ten"}],"comments":[{"id":92,"issue_id":"StockScreenClaude-ofh.4","author":"David Ten","text":"Analytics users need to know when numbers are trustworthy; this epic makes trust state explicit.","created_at":"2026-02-23T16:34:24Z"}]}
{"id":"StockScreenClaude-ofh.4.1","title":"LL2-E4-T1 Implement outcome DQ checks and severity model","description":"Implement DQ checks for missingness, outliers, temporal mismatches, and mapping anomalies with severity levels.","design":"Context: trust contract for downstream analytics.","acceptance_criteria":"DQ result artifacts generated per compute run and queryable.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:14.826469+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:14.826469+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.4.1","depends_on_id":"StockScreenClaude-ofh.4","type":"parent-child","created_at":"2026-02-24T00:34:14.827501+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.4.2","title":"LL2-E4-T2 Implement DQ exclusion policy for aggregates and leaderboards","description":"Apply deterministic policy for include/exclude decisions in aggregate and ranking reads.","design":"Context: prevents silent contamination of user-facing stats.","acceptance_criteria":"Aggregates are reproducible under same policy version and input state.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:15.129032+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:15.129032+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.4.2","depends_on_id":"StockScreenClaude-ofh.4","type":"parent-child","created_at":"2026-02-24T00:34:15.130272+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.4.2","depends_on_id":"StockScreenClaude-ofh.4.1","type":"blocks","created_at":"2026-02-24T00:34:28.641035+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.4.3","title":"LL2-E4-T3 Add compute run tracking metrics and health endpoints","description":"Persist compute-run state and expose freshness/failure telemetry via APIs.","design":"Context: makes analytics operations supportable in production.","acceptance_criteria":"Operators can identify stalled, failed, or stale runs quickly and consistently.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:15.410237+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:15.410237+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.4.3","depends_on_id":"StockScreenClaude-ofh.4","type":"parent-child","created_at":"2026-02-24T00:34:15.411359+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.4.3","depends_on_id":"StockScreenClaude-ofh.4.2","type":"blocks","created_at":"2026-02-24T00:34:28.867342+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.4.4","title":"LL2-E4-T4 Register analytics tasks and alert thresholds with runbook links","description":"Align task registry and beat schedule entries; define alert thresholds and runbook guidance.","design":"Context: closes known scheduler-metadata drift risk.","acceptance_criteria":"Registry and schedule are synchronized; alerts map to documented remediation.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:15.679802+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:15.679802+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.4.4","depends_on_id":"StockScreenClaude-ofh.4","type":"parent-child","created_at":"2026-02-24T00:34:15.680875+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.4.4","depends_on_id":"StockScreenClaude-ofh.4.3","type":"blocks","created_at":"2026-02-24T00:34:29.098925+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.5","title":"LL2-E5 Versioned Market Regime Dimension and Relative Metrics","description":"Add deterministic regime labels and benchmark-relative performance metrics to improve interpretability and reduce misleading aggregates.","design":"Why: raw returns alone can mislead in different tapes; regime context is required for credible comparisons. Scope includes regime contract, compute, and API attachment.","acceptance_criteria":"Regime table and backfill complete; regime/alpha segmentation available in outcomes and aggregate APIs.","status":"open","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:09.249464+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:09.249464+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.5","depends_on_id":"StockScreenClaude-ofh","type":"parent-child","created_at":"2026-02-24T00:34:09.251024+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.5","depends_on_id":"StockScreenClaude-ofh.1","type":"blocks","created_at":"2026-02-24T00:34:34.593148+08:00","created_by":"David Ten"}],"comments":[{"id":93,"issue_id":"StockScreenClaude-ofh.5","author":"David Ten","text":"Raw returns without context are often misleading; this epic attaches regime-aware interpretability.","created_at":"2026-02-23T16:34:24Z"}]}
{"id":"StockScreenClaude-ofh.5.1","title":"LL2-E5-T1 Define regime rules and version contract","description":"Specify deterministic regime logic and versioning semantics for historical consistency.","design":"Context: foundation for regime-sliced analytics comparability.","acceptance_criteria":"Regime contract is testable and version-addressable.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:15.979109+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:15.979109+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.5.1","depends_on_id":"StockScreenClaude-ofh.5","type":"parent-child","created_at":"2026-02-24T00:34:15.980298+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.5.2","title":"LL2-E5-T2 Implement market_regime_daily table compute job and backfill","description":"Persist regime labels by day and backfill history for evaluation windows.","design":"Context: avoids ad-hoc runtime regime inference drift.","acceptance_criteria":"Regime coverage complete for configured historical range.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:16.265732+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:16.265732+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.5.2","depends_on_id":"StockScreenClaude-ofh.5","type":"parent-child","created_at":"2026-02-24T00:34:16.266895+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.5.2","depends_on_id":"StockScreenClaude-ofh.5.1","type":"blocks","created_at":"2026-02-24T00:34:29.32381+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.5.3","title":"LL2-E5-T3 Attach regime and benchmark-relative outcomes to facts and aggregates","description":"Attach regime dimension and benchmark-relative metrics to outcome facts and aggregate responses.","design":"Context: improves interpretability and comparability across market tapes.","acceptance_criteria":"APIs provide regime/relative segmentation with reconciling totals.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:16.538757+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:16.538757+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.5.3","depends_on_id":"StockScreenClaude-ofh.5","type":"parent-child","created_at":"2026-02-24T00:34:16.539774+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.5.3","depends_on_id":"StockScreenClaude-ofh.5.2","type":"blocks","created_at":"2026-02-24T00:34:29.547607+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.6","title":"LL2-E6 Evaluation Query APIs Aggregates Leaderboards and Timeline","description":"Deliver core evaluation read-paths for filter-to-performance analysis, preset leaderboards, and per-symbol outcome timelines.","design":"Why: this is the user-facing research engine. Must combine correctness and low-latency behavior. Scope includes filter/query contracts, endpoints, and cache policy.","acceptance_criteria":"Aggregate, leaderboard, and timeline APIs are stable, performant, and wired to deterministic cache invalidation keys.","status":"open","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:09.520503+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:09.520503+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.6","depends_on_id":"StockScreenClaude-ofh","type":"parent-child","created_at":"2026-02-24T00:34:09.521617+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.6","depends_on_id":"StockScreenClaude-ofh.3","type":"blocks","created_at":"2026-02-24T00:34:34.823683+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.6","depends_on_id":"StockScreenClaude-ofh.4","type":"blocks","created_at":"2026-02-24T00:34:35.054794+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.6","depends_on_id":"StockScreenClaude-ofh.5","type":"blocks","created_at":"2026-02-24T00:34:35.332238+08:00","created_by":"David Ten"}],"comments":[{"id":94,"issue_id":"StockScreenClaude-ofh.6","author":"David Ten","text":"This is the user-facing research engine; correctness and response-time consistency are both required.","created_at":"2026-02-23T16:34:25Z"}]}
{"id":"StockScreenClaude-ofh.6.1","title":"LL2-E6-T1 Add evaluation filter and query spec domain contract","description":"Define evaluation query/filter contract reusing existing domain filtering semantics where appropriate.","design":"Context: avoids divergence between scan filtering and evaluation filtering.","acceptance_criteria":"Filter/query contract is stable and implemented across domain/infra/API.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:16.824493+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:16.824493+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.6.1","depends_on_id":"StockScreenClaude-ofh.6","type":"parent-child","created_at":"2026-02-24T00:34:16.825618+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.6.2","title":"LL2-E6-T2 Implement aggregates endpoint with distribution and coverage metrics","description":"Implement filter-to-performance aggregate endpoint with counts, coverage, and distribution summaries.","design":"Context: primary research lever for setup evaluation.","acceptance_criteria":"Endpoint returns stable metrics with defined semantics and pagination/limits as needed.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:17.105946+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:17.105946+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.6.2","depends_on_id":"StockScreenClaude-ofh.6","type":"parent-child","created_at":"2026-02-24T00:34:17.107667+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.6.2","depends_on_id":"StockScreenClaude-ofh.6.1","type":"blocks","created_at":"2026-02-24T00:34:29.771252+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.6.3","title":"LL2-E6-T3 Implement preset leaderboard and symbol timeline endpoints","description":"Implement preset leaderboard and per-symbol timeline read models backed by outcomes data.","design":"Context: converts raw outcomes into recurring analyst workflows.","acceptance_criteria":"Endpoints support drilldown and pass query-plan validation.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:17.377737+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:17.377737+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.6.3","depends_on_id":"StockScreenClaude-ofh.6","type":"parent-child","created_at":"2026-02-24T00:34:17.379172+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.6.3","depends_on_id":"StockScreenClaude-ofh.6.2","type":"blocks","created_at":"2026-02-24T00:34:30.000195+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.6.4","title":"LL2-E6-T4 Implement deterministic evaluation cache and invalidation keys","description":"Implement cache keying/invalidation using definition, version, regime, date, and filter hashes.","design":"Context: preserves UI responsiveness without sacrificing correctness.","acceptance_criteria":"Cache invalidates deterministically on data or definition changes.","status":"open","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:17.729354+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:17.729354+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.6.4","depends_on_id":"StockScreenClaude-ofh.6","type":"parent-child","created_at":"2026-02-24T00:34:17.730698+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.6.4","depends_on_id":"StockScreenClaude-ofh.6.2","type":"blocks","created_at":"2026-02-24T00:34:30.250306+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.7","title":"LL2-E7 Statistical Reliability Layer for Ranking and Exploration","description":"Add sample-size guardrails, uncertainty metrics, and experiment-safety annotations to prevent tiny-sample overconfidence.","design":"Why: reliable decision support requires uncertainty visibility, not just rank ordering. Scope includes suppression tiers, confidence intervals, shrinkage, and testing-control metadata.","acceptance_criteria":"Ranking/explorer outputs include reliability metadata (tiers, CIs, shrinkage, exploration controls).","status":"open","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:09.793595+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:09.793595+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.7","depends_on_id":"StockScreenClaude-ofh","type":"parent-child","created_at":"2026-02-24T00:34:09.794798+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.7","depends_on_id":"StockScreenClaude-ofh.6","type":"blocks","created_at":"2026-02-24T00:34:35.56445+08:00","created_by":"David Ten"}],"comments":[{"id":95,"issue_id":"StockScreenClaude-ofh.7","author":"David Ten","text":"We optimize for decision quality, not just ranking prettiness; this epic enforces uncertainty visibility.","created_at":"2026-02-23T16:34:25Z"}]}
{"id":"StockScreenClaude-ofh.7.1","title":"LL2-E7-T1 Implement sample-size tiers and suppression policy","description":"Implement minimum-sample tiering and suppression behavior for low-confidence cohorts.","design":"Context: prevents tiny-sample leaderboard artifacts.","acceptance_criteria":"Low-sample cohorts are clearly labeled/suppressed per policy.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:18.01401+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:18.01401+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.7.1","depends_on_id":"StockScreenClaude-ofh.7","type":"parent-child","created_at":"2026-02-24T00:34:18.015215+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.7.2","title":"LL2-E7-T2 Implement confidence intervals and shrinkage estimators","description":"Add uncertainty and shrinkage metrics for aggregate/ranking outputs.","design":"Context: improves statistical reliability communication.","acceptance_criteria":"Ranked outputs include CI and stabilized estimates.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:18.302147+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:18.302147+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.7.2","depends_on_id":"StockScreenClaude-ofh.7","type":"parent-child","created_at":"2026-02-24T00:34:18.303274+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.7.2","depends_on_id":"StockScreenClaude-ofh.7.1","type":"blocks","created_at":"2026-02-24T00:34:30.556258+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.7.3","title":"LL2-E7-T3 Add multiple-testing and holdout metadata for exploratory queries","description":"Attach experiment-safety metadata for exploratory filtering and repeated comparisons.","design":"Context: mitigates p-hacking risk in interactive exploration.","acceptance_criteria":"Explorer payload includes testing-control metadata and interpretation hints.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:18.603213+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:18.603213+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.7.3","depends_on_id":"StockScreenClaude-ofh.7","type":"parent-child","created_at":"2026-02-24T00:34:18.604348+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.7.3","depends_on_id":"StockScreenClaude-ofh.7.2","type":"blocks","created_at":"2026-02-24T00:34:30.802457+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.8","title":"LL2-E8 Leakage-Safe Calibration Artifacts and Manual Promotion Workflow","description":"Provide optional calibration pipeline with leakage-safe data splits and explicit manual promotion of weight artifacts.","design":"Why: calibration can improve utility but is high-risk if leakage/circularity is unmanaged. Scope includes feature policy, purged walk-forward splitting, training jobs, and artifact APIs.","acceptance_criteria":"Calibration artifacts are reproducible and auditable; promotion is explicit and reversible; no automatic production switching.","status":"open","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:10.078794+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:10.078794+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.8","depends_on_id":"StockScreenClaude-ofh","type":"parent-child","created_at":"2026-02-24T00:34:10.080105+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.8","depends_on_id":"StockScreenClaude-ofh.6","type":"blocks","created_at":"2026-02-24T00:34:35.794449+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.8","depends_on_id":"StockScreenClaude-ofh.7","type":"blocks","created_at":"2026-02-24T00:34:36.022351+08:00","created_by":"David Ten"}],"comments":[{"id":96,"issue_id":"StockScreenClaude-ofh.8","author":"David Ten","text":"Calibration must be safe by construction: no leakage, no hidden activation, full audit trail.","created_at":"2026-02-23T16:34:25Z"}]}
{"id":"StockScreenClaude-ofh.8.1","title":"LL2-E8-T1 Define calibration feature whitelist and leakage constraints","description":"Define allowed calibration features and leakage/circularity constraints.","design":"Context: ensures calibration remains defensible and reproducible.","acceptance_criteria":"Whitelist policy is enforced at training job boundaries.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:18.897913+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:18.897913+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.8.1","depends_on_id":"StockScreenClaude-ofh.8","type":"parent-child","created_at":"2026-02-24T00:34:18.89945+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.8.2","title":"LL2-E8-T2 Implement purged walk-forward split engine with embargo","description":"Implement leakage-resistant walk-forward split strategy with embargo windows.","design":"Context: core safeguard for forward-outcome training validity.","acceptance_criteria":"Split engine validated with leakage-focused tests.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:19.178814+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:19.178814+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.8.2","depends_on_id":"StockScreenClaude-ofh.8","type":"parent-child","created_at":"2026-02-24T00:34:19.180446+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.8.2","depends_on_id":"StockScreenClaude-ofh.8.1","type":"blocks","created_at":"2026-02-24T00:34:31.026596+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.8.3","title":"LL2-E8-T3 Implement baseline calibration training jobs and diagnostics","description":"Train baseline models and emit diagnostics separating in-sample and out-of-sample behavior.","design":"Context: enables controlled comparison against hand-authored baselines.","acceptance_criteria":"Jobs produce reproducible metrics and artifact metadata.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:19.450245+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:19.450245+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.8.3","depends_on_id":"StockScreenClaude-ofh.8","type":"parent-child","created_at":"2026-02-24T00:34:19.451272+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.8.3","depends_on_id":"StockScreenClaude-ofh.8.2","type":"blocks","created_at":"2026-02-24T00:34:31.295718+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.8.4","title":"LL2-E8-T4 Implement calibration artifact persistence and comparison endpoints","description":"Persist calibration artifacts and expose endpoints for artifact comparison and promotion review.","design":"Context: no silent weight changes; explicit audit trail required.","acceptance_criteria":"APIs support side-by-side artifact inspection with lineage/version metadata.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:19.720269+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:19.720269+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.8.4","depends_on_id":"StockScreenClaude-ofh.8","type":"parent-child","created_at":"2026-02-24T00:34:19.722275+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.8.4","depends_on_id":"StockScreenClaude-ofh.8.3","type":"blocks","created_at":"2026-02-24T00:34:31.523609+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.9","title":"LL2-E9 Legacy Scan Retro-Binding and Backfill Migration","description":"Retro-bind legacy scans into feature/outcome model asynchronously to avoid slow read-time fallback computation.","design":"Why: legacy compatibility must not degrade endpoint latency. Scope includes inventory, migration planner, async execution, and status APIs.","acceptance_criteria":"Legacy migration inventory completed; planner/executor jobs implemented; runtime slow fallback path removed or hard-gated.","status":"open","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:10.352378+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:10.352378+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.9","depends_on_id":"StockScreenClaude-ofh","type":"parent-child","created_at":"2026-02-24T00:34:10.353482+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.9","depends_on_id":"StockScreenClaude-ofh.2","type":"blocks","created_at":"2026-02-24T00:34:36.27133+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.9","depends_on_id":"StockScreenClaude-ofh.3","type":"blocks","created_at":"2026-02-24T00:34:36.496552+08:00","created_by":"David Ten"}],"comments":[{"id":97,"issue_id":"StockScreenClaude-ofh.9","author":"David Ten","text":"This epic avoids read-time latency spikes and makes legacy data usable in the same analytics model.","created_at":"2026-02-23T16:34:25Z"}]}
{"id":"StockScreenClaude-ofh.9.1","title":"LL2-E9-T1 Inventory scans missing feature_run bindings and classify migration paths","description":"Inventory legacy scans missing feature_run linkage and classify required migration strategies.","design":"Context: migration planning prerequisite to avoid runtime surprises.","acceptance_criteria":"Inventory report includes counts, cohorts, and migration class definitions.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:20.086429+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:20.086429+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.9.1","depends_on_id":"StockScreenClaude-ofh.9","type":"parent-child","created_at":"2026-02-24T00:34:20.087447+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.9.2","title":"LL2-E9-T2 Implement retro-bind planner and executor jobs","description":"Implement async retro-binding planner/executor to create links and required outcome backfills.","design":"Context: keeps legacy enablement off critical read path.","acceptance_criteria":"Retro-bind is idempotent, resumable, and operationally observable.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:20.54063+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:20.54063+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.9.2","depends_on_id":"StockScreenClaude-ofh.9","type":"parent-child","created_at":"2026-02-24T00:34:20.542384+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.9.2","depends_on_id":"StockScreenClaude-ofh.9.1","type":"blocks","created_at":"2026-02-24T00:34:31.75566+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ofh.9.3","title":"LL2-E9-T3 Add migration status APIs and remove slow on-demand fallback path","description":"Expose migration status and decommission runtime fallback compute for legacy scans.","design":"Context: endpoint latency and consistency protection.","acceptance_criteria":"Status APIs available; slow fallback path removed or hard-gated.","status":"open","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-24T00:34:20.822445+08:00","created_by":"David Ten","updated_at":"2026-02-24T00:34:20.822445+08:00","labels":["learning-loop-v2","ll2"],"dependencies":[{"issue_id":"StockScreenClaude-ofh.9.3","depends_on_id":"StockScreenClaude-ofh.9","type":"parent-child","created_at":"2026-02-24T00:34:20.823506+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-ofh.9.3","depends_on_id":"StockScreenClaude-ofh.9.2","type":"blocks","created_at":"2026-02-24T00:34:31.981152+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-pet","title":"Golden parity test: legacy vs feature store scan results","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-18T12:55:09.092247+08:00","created_by":"David Ten","updated_at":"2026-02-18T13:09:33.583506+08:00","closed_at":"2026-02-18T13:09:33.583506+08:00","close_reason":"Implemented golden parity test suite with 28 tests covering schema alignment, field-by-field parity (20 tickers), filter/sort parity (5 specs), and pagination parity"}
{"id":"StockScreenClaude-rol","title":"C2: Rewrite Celery run_bulk_scan as thin wrapper","status":"closed","priority":2,"issue_type":"feature","owner":"davidten7@gmail.com","created_at":"2026-02-17T10:08:48.435066+08:00","created_by":"David Ten","updated_at":"2026-02-17T10:09:16.349588+08:00","closed_at":"2026-02-17T10:09:16.349588+08:00","close_reason":"Implemented strangler pattern with feature flag, adapters, and 42 passing tests"}
{"id":"StockScreenClaude-rwf","title":"E3: Create Feature Store repositories — FeatureRunRepo, FeatureStoreRepo","description":"## What\nImplement the repository layer for Feature Store with atomic publish semantics.\n\n## Files to Create\n\n### Domain ports (protocols)\n- backend/app/domain/feature_store/ports.py:\n  - FeatureRunRepository Protocol:\n    - start_run(as_of_date, run_type, code_version, universe_hash, input_hash, correlation_id) -\u003e FeatureRunDomain\n    - mark_completed(run_id, stats, warnings)\n    - mark_quarantined(run_id, dq_report)\n    - publish_atomically(run_id) — MUST update status + pointer in same transaction\n    - get_latest_published() -\u003e FeatureRunDomain | None\n    - get_run(run_id) -\u003e FeatureRunDomain\n\n  - FeatureStoreRepository Protocol:\n    - upsert_snapshot_rows(run_id, rows: list[FeatureRowWrite])\n    - save_run_universe_symbols(run_id, symbols: list[str])\n    - query_latest(spec: FilterSpec, sort: SortSpec, paging: PagingSpec) -\u003e Page[FeatureRow]\n    - query_run(run_id, spec, sort, paging) -\u003e Page[FeatureRow]\n\n### Infra implementations\n- backend/app/infra/db/repositories/feature_run_repo_sqlalchemy.py\n- backend/app/infra/db/repositories/feature_store_repo_sqlalchemy.py\n\n## Critical: Atomic Publish\npublish_atomically() must in a SINGLE transaction:\n1. Set feature_runs.status = 'published', published_at = now\n2. Update feature_run_pointers where key='latest_published' → run_id\nThis prevents readers from seeing a mixed state.\n\n## Acceptance Criteria\n- Repositories implement all port methods\n- Atomic publish verified: no partial state observable\n- Integration test with SQLite confirms CRUD operations\n- Query methods support FilterSpec translation (reuse patterns from D1)\n\n## Depends On\n- E2 (domain types must exist)\n- E1 implicitly (DB models must exist)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:03:52.638505+08:00","created_by":"David Ten","updated_at":"2026-02-17T23:35:14.949554+08:00","closed_at":"2026-02-17T23:35:14.949554+08:00","close_reason":"All acceptance criteria met: ports defined, both SqlAlchemy repos implement all methods, atomic publish verified, tests pass with in-memory SQLite","dependencies":[{"issue_id":"StockScreenClaude-rwf","depends_on_id":"StockScreenClaude-8eu","type":"blocks","created_at":"2026-02-17T00:08:09.992353+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-szs","title":"Implement Cache Health Status Method","description":"Add get_cache_health_status() to PriceCacheService with SPY-based O(1) health check. Implements 6 states: fresh/updating/stuck/partial/stale/error. Includes warmup metadata tracking and early morning edge case handling.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-05T15:01:01.439026+08:00","created_by":"David Ten","updated_at":"2026-02-05T15:08:25.860399+08:00","closed_at":"2026-02-05T15:08:25.860399+08:00","close_reason":"Implemented get_cache_health_status() with 6 states, SPY-based health check, warmup metadata, and heartbeat tracking"}
{"id":"StockScreenClaude-t5g","title":"G3: Migrate ancillary scan endpoints to feature store source","description":"## What\nUpdate filter-options, peers, single-result, and export endpoints to use the same dual-source pattern as GetScanResults (G2).\n\n## Endpoints to Update\n- GetFilterOptionsUseCase (D2) — query feature store for distinct values when scan is bound\n- GetSingleResultUseCase (D3) — read from feature store when scan is bound\n- GetPeersUseCase (D4) — find peers in feature store when scan is bound\n- ExportScanResultsUseCase (D5) — export from feature store when scan is bound\n\n## Pattern\nEach use case already queries via repository ports. The change is:\n1. Check scan.feature_run_id\n2. If bound → use FeatureStoreRepository methods\n3. If unbound → use legacy ScanResultRepository methods\n\n## Files to Modify\n- All D-series use case files\n- May need to add feature-store-specific query methods to FeatureStoreRepository\n\n## Acceptance Criteria\n- All ancillary endpoints work with both bound and unbound scans\n- Same response format regardless of data source\n- No breaking API changes\n- Integration test confirms feature store path returns correct data\n\n## Depends On\n- G2 (dual-source pattern established)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:05:14.903501+08:00","created_by":"David Ten","updated_at":"2026-02-18T22:11:11.596049+08:00","closed_at":"2026-02-18T22:11:11.596049+08:00","close_reason":"All 4 ancillary endpoints (filter-options, single-result, peers, export) migrated to dual-source pattern. 34 unit tests pass. Code committed in 56a891fa.","dependencies":[{"issue_id":"StockScreenClaude-t5g","depends_on_id":"StockScreenClaude-78r","type":"blocks","created_at":"2026-02-17T00:08:11.213828+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-toj","title":"D3: Create GetSingleResultUseCase","description":"## What\nExtract single scan result lookup into a use case.\n\n## Current State\nThe single-result endpoint in scans.py fetches one ScanResult by scan_id + symbol, extracts JSON details, and returns enriched data.\n\n## Files to Create\n- backend/app/use_cases/scanning/get_single_result.py — GetSingleResultUseCase\n  - Input: scan_id, symbol\n  - Output: ScanResultItemDomain (full detail)\n  - Uses ScanResultRepository port\n\n## Acceptance Criteria\n- Returns same data as current endpoint\n- Router is thin wrapper\n- Handles 'not found' gracefully (raises domain NotFoundError)\n\n## Depends On\n- D1 (establishes repository patterns)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:02:43.984599+08:00","created_by":"David Ten","updated_at":"2026-02-17T12:59:01.048102+08:00","closed_at":"2026-02-17T12:59:01.048102+08:00","close_reason":"Already fully implemented in commit c5ce814b. Use case, port, infra, wiring, router endpoint, and 10 passing tests all in place.","dependencies":[{"issue_id":"StockScreenClaude-toj","depends_on_id":"StockScreenClaude-iai","type":"blocks","created_at":"2026-02-17T00:08:10.140202+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-umr","title":"SE-ROOT: Setup Engine Part 1 (Pre-breakout Discovery) program","description":"Program-level execution graph for evolving the scanner into a Setup Engine that detects pre-breakout pattern families, computes readiness features, and emits explainable setup checklists.","acceptance_criteria":"All child epics/tasks/subtasks and blocker relationships fully represent the scope in /Users/admin/Downloads/setup_engine_plan.md with enough context for future maintainers to execute without reopening the source plan.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:45:52.356955+08:00","created_by":"David Ten","updated_at":"2026-02-23T07:47:48.707086+08:00","closed_at":"2026-02-23T07:47:48.707086+08:00","close_reason":"All 8 child epics completed (SE-A through SE-H): architecture contracts, pattern library, detectors, aggregator/scoring, scanner integration, frontend, testing/quality gates, and rollout/handoff. Setup Engine Part 1 program fully delivered.","comments":[{"id":1,"issue_id":"StockScreenClaude-umr","author":"David Ten","text":"Background:\nThis program operationalizes the Setup Engine vision: move from simple filter matching to an explainable candidate system that combines pattern detection, readiness metrics, and context-aware checklist output.\n\nReasoning:\nThe architecture already has orchestrator + persistence + feature-store patterns. The plan intentionally exploits those seams instead of introducing a parallel pipeline, reducing integration risk and duplicate compute paths.\n\nProgram intent:\n1) Build a modular detector stack, 2) normalize outputs into filterable fields, 3) provide a human-readable explanation object, and 4) keep all heuristics explicit/configurable so iteration is safe and auditable.\n\nNon-goals (v1):\nPerfect visual chart recognition, trading automation, or advice. This is a deterministic analysis system for ranking/review acceleration.\n","created_at":"2026-02-19T09:45:52Z"},{"id":57,"issue_id":"StockScreenClaude-umr","author":"David Ten","text":"Revision pass (plan-space optimization):\n- Removed redundant cross-epic blockers that forced unnecessary serialization.\n- Preserved correctness by adding leaf-level blockers where sequencing is actually required.\n- Added missing implementation beads for code stubs, payload schema guards, formula traceability, historical backfill, observability, golden regression tests, and operator runbook.\n\nWhy this is better for users:\n- Faster delivery through parallelizable detector development.\n- Higher trust via explicit formula traceability and regression harnesses.\n- Better day-1 usefulness due to historical backfill and runtime observability.\n\nExecution principle for this program:\nArchitecture contracts gate interfaces; interface stubs gate detector coding; detector leaves gate calibration and aggregation; scanner/query integration gates UI/testing; rollout tasks gate production exposure.\n","created_at":"2026-02-19T10:13:28Z"}]}
{"id":"StockScreenClaude-umr.1","title":"SE-A: Architecture, contracts, and parameter governance","description":"Define the canonical data contract, repository touchpoints, and threshold governance so all downstream work shares one schema and one policy surface.","acceptance_criteria":"Schema contract, parameter catalog, and data policy are approved and referenced by all implementation epics.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:45:52.898972+08:00","created_by":"David Ten","updated_at":"2026-02-22T23:32:30.355578+08:00","closed_at":"2026-02-22T23:32:30.355578+08:00","close_reason":"All 4 children completed: architecture audit (A1), field contract (A2), parameter governance (A3), and data policy (A4) are locked down. Downstream epics can proceed against the frozen contract.","dependencies":[{"issue_id":"StockScreenClaude-umr.1","depends_on_id":"StockScreenClaude-umr","type":"parent-child","created_at":"2026-02-19T17:45:52.900083+08:00","created_by":"David Ten"}],"comments":[{"id":2,"issue_id":"StockScreenClaude-umr.1","author":"David Ten","text":"This epic prevents downstream drift by locking field naming, type expectations, and data semantics before implementation fan-out.\n\nThe core risk it addresses is inconsistency: detector teams can otherwise ship incompatible metric names or ambiguous booleans, which breaks query mapping and explain UI.\n\nOutput from this epic is treated as the source-of-truth contract for both backend and frontend implementation.\n","created_at":"2026-02-19T09:45:53Z"}]}
{"id":"StockScreenClaude-umr.1.1","title":"SE-A1: Baseline architecture and touchpoint audit","description":"Map current orchestrator, registry, scanner, repository, and query seams to define safe insertion points for Setup Engine.","acceptance_criteria":"A file-level compatibility matrix and risk list exists covering backend/app/scanners and backend/app/infra query/repository paths.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:45:57.363886+08:00","created_by":"David Ten","updated_at":"2026-02-19T22:59:01.470885+08:00","closed_at":"2026-02-19T22:59:01.470885+08:00","close_reason":"Completed: compatibility matrix and risk audit added","dependencies":[{"issue_id":"StockScreenClaude-umr.1.1","depends_on_id":"StockScreenClaude-umr.1","type":"parent-child","created_at":"2026-02-19T17:45:57.365397+08:00","created_by":"David Ten"}],"comments":[{"id":10,"issue_id":"StockScreenClaude-umr.1.1","author":"David Ten","text":"Capture where Setup Engine can plug in with minimum disruption: ScanOrchestrator, ScreenerRegistry, ScanResultRepository, scan_result_query, and feature_store_query.\n\nInclude assumptions on data orientation and persistence semantics so detector/aggregator design stays aligned with real runtime constraints.\n","created_at":"2026-02-19T09:45:57Z"}]}
{"id":"StockScreenClaude-umr.1.2","title":"SE-A2: Canonical setup_engine field contract and naming policy","description":"Define final setup_engine JSON schema (field names, types, nullability, units, and bool semantics) for persistence and frontend use.","acceptance_criteria":"Schema includes top-level scores, pivot fields, readiness metrics, candidates list, and explain object with strict naming conventions.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:45:57.906743+08:00","created_by":"David Ten","updated_at":"2026-02-19T22:59:01.470532+08:00","closed_at":"2026-02-19T22:59:01.470532+08:00","close_reason":"Completed: canonical setup_engine contract, schema docs, and payload builder added","dependencies":[{"issue_id":"StockScreenClaude-umr.1.2","depends_on_id":"StockScreenClaude-umr.1","type":"parent-child","created_at":"2026-02-19T17:45:57.907841+08:00","created_by":"David Ten"}],"comments":[{"id":11,"issue_id":"StockScreenClaude-umr.1.2","author":"David Ten","text":"This is the central contract artifact for cross-team implementation.\n\nIt must explicitly define units (pct vs ratio), timeframes (daily/weekly), date formats, and fallback/null rules when detectors cannot produce a value.\n\nDownstream mapping and UI work must reference this issue as canonical.\n","created_at":"2026-02-19T09:45:58Z"},{"id":58,"issue_id":"StockScreenClaude-umr.1.2","author":"David Ten","text":"Required technical artifacts for this bead:\n- Canonical schema document with field name, type, unit, nullability, and source module.\n- Suggested placement: `backend/app/analysis/patterns/models.py` (dataclasses/types) and `backend/app/scanners/setup_engine_scanner.py` (payload assembly).\n- For every numeric field, include explicit unit tag (`pct`, `ratio`, `days`, `weeks`, `price`).\n\nMandatory keys (v1 baseline):\n- Scoring: `setup_score`, `quality_score`, `readiness_score`, `setup_ready`\n- Pattern: `pattern_primary`, `pattern_confidence`, `pivot_price`, `pivot_type`, `pivot_date`\n- Readiness: `distance_to_pivot_pct`, `atr14_pct`, `bb_width_pctile_252`, `volume_vs_50d`, `rs_line_new_high`\n- Explain: `passed_checks[]`, `failed_checks[]`, `key_levels{}`, `invalidation_flags[]`\n\nDefinition rule:\nAny key referenced by query map/UI must be top-level under `setup_engine` (avoid deeply nested metrics for filter-critical fields).\n","created_at":"2026-02-19T10:13:29Z"}]}
{"id":"StockScreenClaude-umr.1.3","title":"SE-A3: Parameter configuration model and default threshold governance","description":"Define configurable thresholds for pattern/readiness scoring with default values, bounds, and rationale notes.","acceptance_criteria":"Thresholds are externalized (not hardcoded), documented with justification, and validated for safe ranges.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:45:58.483589+08:00","created_by":"David Ten","updated_at":"2026-02-19T23:10:35.018306+08:00","closed_at":"2026-02-19T23:10:35.018306+08:00","close_reason":"Completed: externalized setup_engine parameter model with defaults, bounds, and rationale","dependencies":[{"issue_id":"StockScreenClaude-umr.1.3","depends_on_id":"StockScreenClaude-umr.1","type":"parent-child","created_at":"2026-02-19T17:45:58.484955+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.1.3","depends_on_id":"StockScreenClaude-umr.1.2","type":"blocks","created_at":"2026-02-19T17:47:00.936175+08:00","created_by":"David Ten"}],"comments":[{"id":12,"issue_id":"StockScreenClaude-umr.1.3","author":"David Ten","text":"Parameter governance prevents hidden behavior changes and enables controlled calibration.\n\nInclude which values are strict vs relaxed defaults (e.g., 3WT 1.0/1.5 bands, early-zone ranges, squeeze percentiles) and why.\n\nDocument guardrails to prevent impossible or contradictory runtime configs.\n","created_at":"2026-02-19T09:45:58Z"}]}
{"id":"StockScreenClaude-umr.1.4","title":"SE-A4: Data requirements and incomplete-data policy","description":"Specify minimum bars, benchmark requirements, weekly resample completeness rules, and graceful degradation behavior.","acceptance_criteria":"Scanner behavior is deterministic when data is missing/insufficient; no detector throws and no look-ahead assumptions are introduced.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:45:59.028887+08:00","created_by":"David Ten","updated_at":"2026-02-19T23:10:40.080734+08:00","closed_at":"2026-02-19T23:10:40.080734+08:00","close_reason":"Completed: deterministic data requirements and incomplete-data degradation policy","dependencies":[{"issue_id":"StockScreenClaude-umr.1.4","depends_on_id":"StockScreenClaude-umr.1","type":"parent-child","created_at":"2026-02-19T17:45:59.030022+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.1.4","depends_on_id":"StockScreenClaude-umr.1.2","type":"blocks","created_at":"2026-02-19T17:47:01.106899+08:00","created_by":"David Ten"}],"comments":[{"id":13,"issue_id":"StockScreenClaude-umr.1.4","author":"David Ten","text":"Define what happens when history is short, benchmark data is absent, or current week is incomplete.\n\nThe policy should prefer explicit \"insufficient_data\" style checks over implicit pass/fail to keep explain output trustworthy.\n","created_at":"2026-02-19T09:45:59Z"}]}
{"id":"StockScreenClaude-umr.2","title":"SE-B: Pattern library foundations and shared utilities","description":"Build backend/app/analysis/patterns package skeleton, shared models, utility math, and detector interfaces that all pattern modules must use.","acceptance_criteria":"All detectors can be implemented against stable shared primitives with chronological-data guarantees and graceful failure behavior.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:45:53.48312+08:00","created_by":"David Ten","updated_at":"2026-02-23T07:42:04.075211+08:00","closed_at":"2026-02-23T07:42:04.075211+08:00","close_reason":"All 7 children completed: package skeleton (B1), output schemas (B2), technical utilities (B3), DataFrame guards (B4), detector interface (B5), code stubs (B6), and report schema types (B7) are stable.","dependencies":[{"issue_id":"StockScreenClaude-umr.2","depends_on_id":"StockScreenClaude-umr","type":"parent-child","created_at":"2026-02-19T17:45:53.484214+08:00","created_by":"David Ten"}],"comments":[{"id":3,"issue_id":"StockScreenClaude-umr.2","author":"David Ten","text":"This epic creates the technical substrate for detector work so each detector focuses on pattern logic, not repeated plumbing.\n\nKey principle: standardize orientation, windowing, and NaN policy once. Reimplementing those details per detector is a common source of subtle look-ahead and indexing bugs.\n\nDeliverables should favor deterministic helper functions and clear contracts over implicit assumptions.\n","created_at":"2026-02-19T09:45:53Z"},{"id":59,"issue_id":"StockScreenClaude-umr.2","author":"David Ten","text":"Code stub checklist for this epic:\n- `backend/app/analysis/patterns/__init__.py`\n- `backend/app/analysis/patterns/models.py`\n- `backend/app/analysis/patterns/utils.py`\n- `backend/app/analysis/patterns/vcp.py`\n- `backend/app/analysis/patterns/three_weeks_tight.py`\n- `backend/app/analysis/patterns/high_tight_flag.py`\n- `backend/app/analysis/patterns/cup_handle.py`\n- `backend/app/analysis/patterns/nr7_inside_day.py`\n- `backend/app/analysis/patterns/first_pullback.py`\n- `backend/app/analysis/patterns/aggregator.py`\n\nMinimum stub signature guidance:\n- detector entrypoint: `detect(df_daily: pd.DataFrame, benchmark_df: pd.DataFrame | None = None, cfg: PatternConfig | None = None) -\u003e list[PatternCandidate]`\n- aggregator entrypoint: `aggregate(df_daily, benchmark_df, cfg) -\u003e SetupAggregationResult`\n\nAll stubs must be import-safe and type-checkable before algorithm logic lands.\n","created_at":"2026-02-19T10:13:29Z"}]}
{"id":"StockScreenClaude-umr.2.1","title":"SE-B1: Create patterns package skeleton and module boundaries","description":"Create backend/app/analysis/patterns with __init__, detector modules, aggregator module, and clear ownership boundaries.","acceptance_criteria":"Folder structure and import paths are established without circular dependencies or scanner-layer leakage.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:45:59.570484+08:00","created_by":"David Ten","updated_at":"2026-02-19T23:10:40.097034+08:00","closed_at":"2026-02-19T23:10:40.097034+08:00","close_reason":"Completed: created patterns package skeleton, detector boundaries, and aggregator stubs","dependencies":[{"issue_id":"StockScreenClaude-umr.2.1","depends_on_id":"StockScreenClaude-umr.2","type":"parent-child","created_at":"2026-02-19T17:45:59.571781+08:00","created_by":"David Ten"}],"comments":[{"id":14,"issue_id":"StockScreenClaude-umr.2.1","author":"David Ten","text":"The package structure should mirror the implementation plan so future additions can be slotted without refactor churn.\n\nBoundary rule: detectors/aggregator stay in analysis layer; scanner integration remains in scanners layer.\n","created_at":"2026-02-19T09:45:59Z"}]}
{"id":"StockScreenClaude-umr.2.2","title":"SE-B2: Implement PatternCandidate and shared output schemas","description":"Define dataclass/model for PatternCandidate including pivot metadata, quality/readiness/confidence, metrics/checks/notes payloads.","acceptance_criteria":"All detectors can emit a consistent object shape consumable by the aggregator and SetupEngineScanner.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:00.330698+08:00","created_by":"David Ten","updated_at":"2026-02-19T23:27:11.871909+08:00","closed_at":"2026-02-19T23:27:11.871909+08:00","close_reason":"Completed: canonical PatternCandidate model and shared output normalization implemented","dependencies":[{"issue_id":"StockScreenClaude-umr.2.2","depends_on_id":"StockScreenClaude-umr.2","type":"parent-child","created_at":"2026-02-19T17:46:00.331876+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.2.2","depends_on_id":"StockScreenClaude-umr.2.1","type":"blocks","created_at":"2026-02-19T17:48:10.044592+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.2.2","depends_on_id":"StockScreenClaude-umr.1.2","type":"blocks","created_at":"2026-02-19T18:12:19.85372+08:00","created_by":"David Ten"}],"comments":[{"id":15,"issue_id":"StockScreenClaude-umr.2.2","author":"David Ten","text":"Normalization starts here. Keep required vs optional fields explicit so detectors can fail gracefully without shape drift.\n\nInclude conventions for score ranges (0-100) and confidence (0-1).\n","created_at":"2026-02-19T09:46:00Z"}]}
{"id":"StockScreenClaude-umr.2.3","title":"SE-B3: Implement shared technical utilities for pattern math","description":"Add resampling, ATR/BB helpers, slope/regression, swing detection, percentile rank, and true-range percent helpers.","acceptance_criteria":"Utilities are vectorized, unit-tested, and documented for consistent reuse across detectors and readiness features.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:00.925598+08:00","created_by":"David Ten","updated_at":"2026-02-19T23:27:11.871662+08:00","closed_at":"2026-02-19T23:27:11.871662+08:00","close_reason":"Completed: shared technical utilities implemented, documented, and unit-tested","dependencies":[{"issue_id":"StockScreenClaude-umr.2.3","depends_on_id":"StockScreenClaude-umr.2","type":"parent-child","created_at":"2026-02-19T17:46:00.92708+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.2.3","depends_on_id":"StockScreenClaude-umr.2.1","type":"blocks","created_at":"2026-02-19T17:48:10.226537+08:00","created_by":"David Ten"}],"comments":[{"id":16,"issue_id":"StockScreenClaude-umr.2.3","author":"David Ten","text":"Utility correctness is foundational because every detector depends on these calculations.\n\nPrefer deterministic, pure functions with explicit input validation and no hidden timezone/index assumptions.\n","created_at":"2026-02-19T09:46:01Z"}]}
{"id":"StockScreenClaude-umr.2.4","title":"SE-B4: DataFrame normalization and validation guards","description":"Implement helpers to enforce chronological order, required OHLCV columns, min-bar checks, and NaN handling policy.","acceptance_criteria":"Detector entrypoints can rely on normalized input and return explicit non-detection when prerequisites fail.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:01.484175+08:00","created_by":"David Ten","updated_at":"2026-02-19T23:41:06.431517+08:00","closed_at":"2026-02-19T23:41:06.431517+08:00","close_reason":"Completed: shared DataFrame normalization guards and explicit prerequisite non-detection behavior implemented","dependencies":[{"issue_id":"StockScreenClaude-umr.2.4","depends_on_id":"StockScreenClaude-umr.2","type":"parent-child","created_at":"2026-02-19T17:46:01.485243+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.2.4","depends_on_id":"StockScreenClaude-umr.2.2","type":"blocks","created_at":"2026-02-19T17:48:10.421193+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.2.4","depends_on_id":"StockScreenClaude-umr.2.3","type":"blocks","created_at":"2026-02-19T17:48:10.599623+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.2.4","depends_on_id":"StockScreenClaude-umr.1.4","type":"blocks","created_at":"2026-02-19T18:12:20.271897+08:00","created_by":"David Ten"}],"comments":[{"id":17,"issue_id":"StockScreenClaude-umr.2.4","author":"David Ten","text":"This task eliminates repeated boilerplate and prevents detector-specific bugs caused by orientation mismatches.\n\nDesign goal: one normalization path for daily and weekly workflows that surfaces guardrail failures as check messages.\n","created_at":"2026-02-19T09:46:01Z"}]}
{"id":"StockScreenClaude-umr.2.5","title":"SE-B5: Detector interface contract and graceful-failure semantics","description":"Define detector call signatures, return semantics (candidate/None/list), and standardized failure note/check conventions.","acceptance_criteria":"All detectors obey a common interface, enabling parallel execution and straightforward aggregator composition.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:02.06497+08:00","created_by":"David Ten","updated_at":"2026-02-20T07:57:24.187766+08:00","closed_at":"2026-02-20T07:57:24.187766+08:00","close_reason":"Implemented DetectorOutcome enum, PatternDetectorResult with candidates/factories/outcome, detect_safe() template, __init_subclass__ validation, updated all 7 stubs and aggregator. 40 new tests + 26 existing pass.","dependencies":[{"issue_id":"StockScreenClaude-umr.2.5","depends_on_id":"StockScreenClaude-umr.2","type":"parent-child","created_at":"2026-02-19T17:46:02.066172+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.2.5","depends_on_id":"StockScreenClaude-umr.2.4","type":"blocks","created_at":"2026-02-19T17:48:10.773344+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.2.5","depends_on_id":"StockScreenClaude-umr.1.3","type":"blocks","created_at":"2026-02-19T18:12:20.71825+08:00","created_by":"David Ten"}],"comments":[{"id":18,"issue_id":"StockScreenClaude-umr.2.5","author":"David Ten","text":"This task is the handshake between detector modules and the aggregator.\n\nKey requirement: detectors never throw on ordinary data defects; they return structured non-detections with reason codes where useful.\n","created_at":"2026-02-19T09:46:02Z"}]}
{"id":"StockScreenClaude-umr.2.6","title":"SE-B6: Create explicit detector and aggregator code stubs","description":"Create compile-safe stubs for each module in backend/app/analysis/patterns and export contracts before algorithm implementation.","acceptance_criteria":"All planned modules exist with typed function signatures, TODO guards, and __init__ exports so detector work can proceed in parallel without import churn.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T18:12:21.634285+08:00","created_by":"David Ten","updated_at":"2026-02-19T23:27:06.759944+08:00","closed_at":"2026-02-19T23:27:06.759944+08:00","close_reason":"Completed: explicit detector entrypoint stubs with TODO bead markers and stable exports","dependencies":[{"issue_id":"StockScreenClaude-umr.2.6","depends_on_id":"StockScreenClaude-umr.2","type":"parent-child","created_at":"2026-02-19T18:12:21.635551+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.2.6","depends_on_id":"StockScreenClaude-umr.2.1","type":"blocks","created_at":"2026-02-19T18:12:24.975615+08:00","created_by":"David Ten"}],"comments":[{"id":60,"issue_id":"StockScreenClaude-umr.2.6","author":"David Ten","text":"Implementation detail requirements:\n- Every module stub must include typed return contracts, docstring with expected input orientation, and deterministic no-data fallback behavior.\n- Add TODO markers with exact follow-up bead IDs (e.g., `SE-C2`, `SE-C3a`) to connect code to plan graph.\n- `__init__.py` should export only stable public APIs (`PatternCandidate`, utility functions, and detector entrypoints) to avoid accidental coupling.\n\nSafety objective:\nUnblock parallel coding without import breakage or signature churn.\n","created_at":"2026-02-19T10:13:30Z"}]}
{"id":"StockScreenClaude-umr.2.7","title":"SE-B7: Define SetupEngine report schema types and serialization guards","description":"Add explicit typed schemas/dataclasses for setup report and explain payload serialization boundaries used by scanner/query/frontend.","acceptance_criteria":"setup_engine payload serialization is validated with canonical examples and strict type/unit expectations (including nullability rules).","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T18:12:22.137674+08:00","created_by":"David Ten","updated_at":"2026-02-19T23:41:06.431519+08:00","closed_at":"2026-02-19T23:41:06.431519+08:00","close_reason":"Completed: typed SetupEngine report schemas and strict serialization guards across producer/persistence boundaries","dependencies":[{"issue_id":"StockScreenClaude-umr.2.7","depends_on_id":"StockScreenClaude-umr.2","type":"parent-child","created_at":"2026-02-19T18:12:22.138715+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.2.7","depends_on_id":"StockScreenClaude-umr.2.6","type":"blocks","created_at":"2026-02-19T18:12:25.390463+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.2.7","depends_on_id":"StockScreenClaude-umr.1.2","type":"blocks","created_at":"2026-02-19T18:12:25.800835+08:00","created_by":"David Ten"}],"comments":[{"id":61,"issue_id":"StockScreenClaude-umr.2.7","author":"David Ten","text":"Schema/serialization guard details:\n- Add a typed container for final report (e.g., `SetupEngineReport`) plus nested types for `ExplainPayload`, `KeyLevels`, `InvalidationFlag`.\n- Enforce JSON-serializable primitives at boundary (floats/ints/str/bool/list/dict/None only).\n- Add validation helper that checks required fields + unit consistency before persistence.\n\nBoundary files:\n- producer boundary: `backend/app/scanners/setup_engine_scanner.py`\n- persistence boundary: `backend/app/infra/db/repositories/scan_result_repo.py`\n- query boundary consumers: `backend/app/infra/query/scan_result_query.py`, `backend/app/infra/query/feature_store_query.py`\n","created_at":"2026-02-19T10:13:30Z"}]}
{"id":"StockScreenClaude-umr.3","title":"SE-C: Detector implementations for all target pattern families","description":"Implement VCP wrapper, 3WT, HTF, Cup/Handle, NR7/Inside Day, and First Pullback detectors with normalized candidate output and explicit checks.","acceptance_criteria":"Each target family produces PatternCandidate output with clear pivot, metrics, checks, notes, and confidence semantics.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:45:54.021867+08:00","created_by":"David Ten","updated_at":"2026-02-23T07:42:05.153204+08:00","closed_at":"2026-02-23T07:42:05.153204+08:00","close_reason":"All 7 children completed: VCP wrapper (C1), 3WT (C2), HTF (C3), Cup/Handle (C4), NR7/Inside Day (C5), First Pullback (C6), and cross-detector normalization (C7) all implemented.","dependencies":[{"issue_id":"StockScreenClaude-umr.3","depends_on_id":"StockScreenClaude-umr","type":"parent-child","created_at":"2026-02-19T17:45:54.022946+08:00","created_by":"David Ten"}],"comments":[{"id":4,"issue_id":"StockScreenClaude-umr.3","author":"David Ten","text":"Detector breadth is the heart of the Setup Engine candidate funnel.\n\nThe objective is not perfect recognition; it is consistent, inspectable heuristics that produce ranked candidates and clear pass/fail reasoning.\n\nNormalization across detectors is mandatory so the aggregator can compare unlike patterns without hidden bias.\n","created_at":"2026-02-19T09:45:54Z"},{"id":62,"issue_id":"StockScreenClaude-umr.3","author":"David Ten","text":"Detector calculation contract snapshot:\n- VCP: wrapper over existing detector, convert chronological -\u003e MRF inputs, normalize outputs.\n- 3WT: weekly close-band tightness, pivot = max high in tight cluster.\n- HTF: pole return + flag depth/duration/upper-half checks.\n- Cup/Handle: left lip -\u003e low -\u003e right lip -\u003e handle path with depth/duration constraints.\n- NR7/Inside: trigger-level tightness signals with context bonus only.\n- First Pullback: trend context + MA-touch test counting + resumption trigger.\n\nEach detector must emit:\n- pivot metadata\n- explicit checks with reasons\n- metrics used by downstream scoring\n- confidence semantics documented in code comments.\n","created_at":"2026-02-19T10:13:30Z"}]}
{"id":"StockScreenClaude-umr.3.1","title":"SE-C1: Implement VCP wrapper over existing criteria/vcp_detection","description":"Wrap existing VCPDetector with chronological-to-most-recent-first translation and PatternCandidate output mapping.","acceptance_criteria":"No logic fork from existing VCP core; wrapper emits normalized pivot/score/check fields.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:02.769715+08:00","created_by":"David Ten","updated_at":"2026-02-20T09:00:27.726105+08:00","closed_at":"2026-02-20T09:00:27.726105+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-umr.3.1","depends_on_id":"StockScreenClaude-umr.3","type":"parent-child","created_at":"2026-02-19T17:46:02.771642+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.1","depends_on_id":"StockScreenClaude-umr.2.5","type":"blocks","created_at":"2026-02-19T17:48:10.961259+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.1","depends_on_id":"StockScreenClaude-umr.2.6","type":"blocks","created_at":"2026-02-19T18:12:26.213604+08:00","created_by":"David Ten"}],"comments":[{"id":19,"issue_id":"StockScreenClaude-umr.3.1","author":"David Ten","text":"The objective is reuse, not reimplementation.\n\nMap existing detector outputs (pivot, contractions, vcp score, readiness flags) into the new schema while preserving established behavior.\n","created_at":"2026-02-19T09:46:03Z"}]}
{"id":"StockScreenClaude-umr.3.2","title":"SE-C2: Implement Three-Weeks-Tight and Multi-Weeks-Tight detector","description":"Resample to weekly bars and detect tight close clusters using configurable strict/relaxed threshold modes.","acceptance_criteria":"Detector emits pivot from tight-area highs, tightness metrics, checks, and confidence scaling with week count/tightness quality.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:03.369982+08:00","created_by":"David Ten","updated_at":"2026-02-20T09:00:27.726109+08:00","closed_at":"2026-02-20T09:00:27.726109+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-umr.3.2","depends_on_id":"StockScreenClaude-umr.3","type":"parent-child","created_at":"2026-02-19T17:46:03.371131+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.2","depends_on_id":"StockScreenClaude-umr.2.5","type":"blocks","created_at":"2026-02-19T17:48:11.143514+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.2","depends_on_id":"StockScreenClaude-umr.2.6","type":"blocks","created_at":"2026-02-19T18:12:26.623998+08:00","created_by":"David Ten"}],"comments":[{"id":20,"issue_id":"StockScreenClaude-umr.3.2","author":"David Ten","text":"Implement both strict and relaxed interpretations to support calibration without code forks.\n\nRecord which mode was used in metrics so tuning decisions are auditable.\n","created_at":"2026-02-19T09:46:03Z"},{"id":71,"issue_id":"StockScreenClaude-umr.3.2","author":"David Ten","text":"3WT implementation details:\n- Resample with `W-FRI`: open=first, high=max, low=min, close=last, volume=sum.\n- Tightness default method: median-band deviation across the run of \u003e=3 weeks.\n- `tight_band_pct = 100 * max(abs(close_i - median_close)/median_close)`\n- Pivot: highest weekly high within tight run.\n- Emit metrics: `weeks_tight`, `tight_band_pct`, `tight_range_pct`, `vol_vs_10w`.\n\nFile target: `backend/app/analysis/patterns/three_weeks_tight.py`.\n","created_at":"2026-02-19T10:14:09Z"}]}
{"id":"StockScreenClaude-umr.3.3","title":"SE-C3: Implement High-Tight-Flag detector","description":"Detect pole+flag structure, enforce depth/volume checks, and emit pivot/readiness metrics for HTF candidates.","acceptance_criteria":"HTF candidate output includes pole return, flag depth, flag duration, volume dryness, and explicit pass/fail checks.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:03.981645+08:00","created_by":"David Ten","updated_at":"2026-02-20T09:22:08.489911+08:00","closed_at":"2026-02-20T09:22:08.489911+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-umr.3.3","depends_on_id":"StockScreenClaude-umr.3","type":"parent-child","created_at":"2026-02-19T17:46:03.983381+08:00","created_by":"David Ten"}],"comments":[{"id":21,"issue_id":"StockScreenClaude-umr.3.3","author":"David Ten","text":"HTF detection is sensitive to parameter drift; explicit decomposition into pole and flag phases is required for explainability.\n\nKeep constraints configurable and surface all key intermediate metrics in the candidate payload.\n","created_at":"2026-02-19T09:46:04Z"}]}
{"id":"StockScreenClaude-umr.3.3.1","title":"SE-C3a: HTF pole identification subtask","description":"Implement rolling-window pole detection for +100% style runs over configurable 4-8 week windows.","acceptance_criteria":"Pole detection produces candidate intervals with return metrics and recency filters for downstream flag parsing.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:04.586803+08:00","created_by":"David Ten","updated_at":"2026-02-20T08:26:47.450675+08:00","closed_at":"2026-02-20T08:26:47.450675+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-umr.3.3.1","depends_on_id":"StockScreenClaude-umr.3.3","type":"parent-child","created_at":"2026-02-19T17:46:04.587911+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.3.1","depends_on_id":"StockScreenClaude-umr.2.5","type":"blocks","created_at":"2026-02-19T17:48:11.317085+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.3.1","depends_on_id":"StockScreenClaude-umr.2.6","type":"blocks","created_at":"2026-02-19T18:12:27.036669+08:00","created_by":"David Ten"}],"comments":[{"id":22,"issue_id":"StockScreenClaude-umr.3.3.1","author":"David Ten","text":"This subtask isolates high-momentum run detection so flag logic can operate on stable pole candidates.\n","created_at":"2026-02-19T09:46:04Z"},{"id":72,"issue_id":"StockScreenClaude-umr.3.3.1","author":"David Ten","text":"HTF pole subtask equations:\n- For each candidate window: `pole_return = close[t] / close[t-n] - 1`\n- Default constraints: `pole_return \u003e= 1.0`, `n in [20, 40]` trading days.\n- Record top candidate windows with end-date recency weighting.\n\nInclude deterministic tie-break when multiple poles qualify.\n","created_at":"2026-02-19T10:14:10Z"}]}
{"id":"StockScreenClaude-umr.3.3.2","title":"SE-C3b: HTF flag validation, pivot extraction, and volume checks","description":"Given pole candidates, validate flag depth/duration/upper-half constraints and compute pivot at flag high.","acceptance_criteria":"Outputs include flag metrics and checks suitable for quality/readiness scoring.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:05.143094+08:00","created_by":"David Ten","updated_at":"2026-02-20T08:36:28.229874+08:00","closed_at":"2026-02-20T08:36:28.229874+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-umr.3.3.2","depends_on_id":"StockScreenClaude-umr.3.3","type":"parent-child","created_at":"2026-02-19T17:46:05.144213+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.3.2","depends_on_id":"StockScreenClaude-umr.3.3.1","type":"blocks","created_at":"2026-02-19T17:48:12.005341+08:00","created_by":"David Ten"}],"comments":[{"id":23,"issue_id":"StockScreenClaude-umr.3.3.2","author":"David Ten","text":"Ensure the flag validation path is transparent: every rejected candidate should have an attributable failed check.\n","created_at":"2026-02-19T09:46:05Z"},{"id":73,"issue_id":"StockScreenClaude-umr.3.3.2","author":"David Ten","text":"HTF flag validation details:\n- `flag_depth_pct = 100 * (flag_high - flag_low) / flag_high`\n- Default threshold: `flag_depth_pct \u003c= 25`\n- Upper-half constraint relative to pole move must be explicit in checks.\n- Pivot: `flag_high` with `pivot_type='flag_high'`.\n\nEmit check-level reasons for each rejection path (depth, duration, upper-half, volume).\n","created_at":"2026-02-19T10:14:10Z"}]}
{"id":"StockScreenClaude-umr.3.4","title":"SE-C4: Implement Cup-with-Handle heuristic detector","description":"Detect cup structure on weekly bars with handle heuristics, pivot logic, confidence scoring, and optional cup-only fallback.","acceptance_criteria":"Detector returns explicit lip/low/handle metrics and confidence penalties for V-shape or weak-handle structures.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:05.805881+08:00","created_by":"David Ten","updated_at":"2026-02-20T09:22:18.845626+08:00","closed_at":"2026-02-20T09:22:18.845626+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-umr.3.4","depends_on_id":"StockScreenClaude-umr.3","type":"parent-child","created_at":"2026-02-19T17:46:05.807139+08:00","created_by":"David Ten"}],"comments":[{"id":24,"issue_id":"StockScreenClaude-umr.3.4","author":"David Ten","text":"This detector is inherently heuristic; confidence scoring must communicate uncertainty rather than hide it.\n\nPrefer transparent checks over complex black-box pattern fit logic.\n","created_at":"2026-02-19T09:46:06Z"}]}
{"id":"StockScreenClaude-umr.3.4.1","title":"SE-C4a: Cup structure parsing (left lip, low, right lip)","description":"Implement weekly swing-based search over 6-65 week windows with depth and recovery constraints.","acceptance_criteria":"Cup candidates include duration/depth metrics and recovery strength for handle phase evaluation.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:06.356766+08:00","created_by":"David Ten","updated_at":"2026-02-20T08:26:42.335737+08:00","closed_at":"2026-02-20T08:26:42.335737+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-umr.3.4.1","depends_on_id":"StockScreenClaude-umr.3.4","type":"parent-child","created_at":"2026-02-19T17:46:06.358272+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.4.1","depends_on_id":"StockScreenClaude-umr.2.5","type":"blocks","created_at":"2026-02-19T17:48:11.491418+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.4.1","depends_on_id":"StockScreenClaude-umr.2.6","type":"blocks","created_at":"2026-02-19T18:12:27.453084+08:00","created_by":"David Ten"}],"comments":[{"id":25,"issue_id":"StockScreenClaude-umr.3.4.1","author":"David Ten","text":"Keep candidate enumeration bounded and deterministic to avoid runtime blowups on long histories.\n","created_at":"2026-02-19T09:46:06Z"},{"id":74,"issue_id":"StockScreenClaude-umr.3.4.1","author":"David Ten","text":"Cup parsing implementation notes:\n- Weekly swing highs/lows for left-lip/low/right-lip candidates.\n- Required ranges: duration in `[6,65]` weeks, depth in `[8,50]%`, recovery near left lip.\n- Penalize V-shape cups via curvature proxy (down-slope/up-slope imbalance).\n\nFile target: `backend/app/analysis/patterns/cup_handle.py`.\n","created_at":"2026-02-19T10:14:11Z"}]}
{"id":"StockScreenClaude-umr.3.4.2","title":"SE-C4b: Handle detection and upper-half constraints","description":"Identify short post-recovery handle segments, apply depth/location checks, and compute handle pivot.","acceptance_criteria":"Handle metrics, volume behavior, and pivot metadata are attached for scoring and explain payloads.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:06.90567+08:00","created_by":"David Ten","updated_at":"2026-02-20T08:36:28.229836+08:00","closed_at":"2026-02-20T08:36:28.229836+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-umr.3.4.2","depends_on_id":"StockScreenClaude-umr.3.4","type":"parent-child","created_at":"2026-02-19T17:46:06.906823+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.4.2","depends_on_id":"StockScreenClaude-umr.3.4.1","type":"blocks","created_at":"2026-02-19T17:48:49.743756+08:00","created_by":"David Ten"}],"comments":[{"id":26,"issue_id":"StockScreenClaude-umr.3.4.2","author":"David Ten","text":"The handle phase often decides setup quality; ensure failures are explicit (too deep, too low in cup, missing structure).\n","created_at":"2026-02-19T09:46:07Z"},{"id":75,"issue_id":"StockScreenClaude-umr.3.4.2","author":"David Ten","text":"Handle validation details:\n- Handle duration target `[1,5]` weeks.\n- `handle_depth_pct = 100 * (handle_high - handle_low) / handle_high` with threshold \u003c= 15 by default.\n- Enforce upper-half-of-cup location and optional handle volume contraction.\n- Pivot: highest high in handle.\n","created_at":"2026-02-19T10:14:11Z"}]}
{"id":"StockScreenClaude-umr.3.5","title":"SE-C5: Implement NR7, Inside Day, and combined trigger detector","description":"Detect NR7 and inside-day events with combined trigger labeling and lightweight context-aware scoring bonuses.","acceptance_criteria":"Detector emits trigger pivot, range/volume metrics, and clear subtype labels for downstream tie-breakers.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:07.440766+08:00","created_by":"David Ten","updated_at":"2026-02-20T09:42:09.506885+08:00","closed_at":"2026-02-20T09:42:09.506885+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-umr.3.5","depends_on_id":"StockScreenClaude-umr.3","type":"parent-child","created_at":"2026-02-19T17:46:07.441885+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.5","depends_on_id":"StockScreenClaude-umr.2.5","type":"blocks","created_at":"2026-02-19T17:48:11.659628+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.5","depends_on_id":"StockScreenClaude-umr.2.6","type":"blocks","created_at":"2026-02-19T18:12:27.868756+08:00","created_by":"David Ten"}],"comments":[{"id":27,"issue_id":"StockScreenClaude-umr.3.5","author":"David Ten","text":"This is a trigger detector, not a full base detector; scoring must reflect that and avoid overpowering structural patterns in ranking.\n","created_at":"2026-02-19T09:46:07Z"},{"id":76,"issue_id":"StockScreenClaude-umr.3.5","author":"David Ten","text":"NR7/Inside specifics:\n- `range_t = high_t - low_t`\n- NR7 when `range_t == min(range_{t-6..t})`\n- Inside day when `high_t \u003c high_{t-1}` and `low_t \u003e low_{t-1}`\n- Combined trigger subtype when both true on same bar.\n\nEmit subtype + trigger pivot metadata; do not over-score this family versus structural bases.\n","created_at":"2026-02-19T10:14:12Z"}]}
{"id":"StockScreenClaude-umr.3.6","title":"SE-C6: Implement First Pullback / Trend Resumption detector","description":"Detect orderly pullbacks to key moving-average zones after an uptrend and identify resumption triggers with pivot options.","acceptance_criteria":"Candidate output includes pullback depth, MA test counts, resumption evidence, and pivot variants.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:07.993227+08:00","created_by":"David Ten","updated_at":"2026-02-20T09:22:29.203142+08:00","closed_at":"2026-02-20T09:22:29.203142+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-umr.3.6","depends_on_id":"StockScreenClaude-umr.3","type":"parent-child","created_at":"2026-02-19T17:46:07.994635+08:00","created_by":"David Ten"}],"comments":[{"id":28,"issue_id":"StockScreenClaude-umr.3.6","author":"David Ten","text":"This detector captures a practical continuation setup family often used as add-on entries.\n\nRules must be explicit because interpretation can vary widely; checks should state which definition path was satisfied.\n","created_at":"2026-02-19T09:46:08Z"}]}
{"id":"StockScreenClaude-umr.3.6.1","title":"SE-C6a: Pullback MA-touch/test counting subtask","description":"Implement MA interaction detection and distinct-test counting with separation windows and configurable touch bands.","acceptance_criteria":"Outputs include first/second test semantics and pullback orderliness metrics.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:08.558821+08:00","created_by":"David Ten","updated_at":"2026-02-20T08:26:47.449969+08:00","closed_at":"2026-02-20T08:26:47.449969+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-umr.3.6.1","depends_on_id":"StockScreenClaude-umr.3.6","type":"parent-child","created_at":"2026-02-19T17:46:08.562452+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.6.1","depends_on_id":"StockScreenClaude-umr.2.5","type":"blocks","created_at":"2026-02-19T17:48:11.831737+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.6.1","depends_on_id":"StockScreenClaude-umr.2.6","type":"blocks","created_at":"2026-02-19T18:12:28.297313+08:00","created_by":"David Ten"}],"comments":[{"id":29,"issue_id":"StockScreenClaude-umr.3.6.1","author":"David Ten","text":"Distinct-touch counting is critical for preserving the \"first pullback\" intent and should avoid double-counting clustered bars.\n","created_at":"2026-02-19T09:46:08Z"},{"id":77,"issue_id":"StockScreenClaude-umr.3.6.1","author":"David Ten","text":"MA-touch counting guidance:\n- Define touch when low is within configurable band of MA (default 1-2%).\n- Distinct-test counting must enforce separation window to prevent clustered double-counting.\n- Emit `tests_count`, `is_first_test`, and pullback orderliness metrics.\n","created_at":"2026-02-19T10:14:12Z"}]}
{"id":"StockScreenClaude-umr.3.6.2","title":"SE-C6b: Resumption trigger and pivot-choice subtask","description":"Implement resumption-day checks and maintain both pullback-high and resumption-high pivot variants.","acceptance_criteria":"Detector surfaces which pivot mode was chosen and why for explain transparency.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:09.142051+08:00","created_by":"David Ten","updated_at":"2026-02-20T08:36:23.118217+08:00","closed_at":"2026-02-20T08:36:23.118217+08:00","close_reason":"Completed","dependencies":[{"issue_id":"StockScreenClaude-umr.3.6.2","depends_on_id":"StockScreenClaude-umr.3.6","type":"parent-child","created_at":"2026-02-19T17:46:09.143254+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.6.2","depends_on_id":"StockScreenClaude-umr.3.6.1","type":"blocks","created_at":"2026-02-19T17:48:49.918065+08:00","created_by":"David Ten"}],"comments":[{"id":30,"issue_id":"StockScreenClaude-umr.3.6.2","author":"David Ten","text":"Keep pivot mode explicit because trigger aggressiveness materially affects distance-to-pivot and readiness scoring.\n","created_at":"2026-02-19T09:46:09Z"},{"id":78,"issue_id":"StockScreenClaude-umr.3.6.2","author":"David Ten","text":"Resumption trigger + pivot mode details:\n- Resumption candidate when close \u003e prior close and regains short-term trend context (e.g., \u003e10d EMA).\n- Maintain both pivot variants:\n  - `pullback_high`\n  - `resumption_high`\n- Record chosen mode and alternate in metrics for auditability.\n","created_at":"2026-02-19T10:14:12Z"}]}
{"id":"StockScreenClaude-umr.3.7","title":"SE-C7: Cross-detector normalization and confidence calibration","description":"Normalize metric keys, score scales, and confidence semantics across all detectors for fair aggregation.","acceptance_criteria":"All detectors produce comparable quality/readiness/confidence fields with documented calibration rationale.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:09.722774+08:00","created_by":"David Ten","updated_at":"2026-02-20T10:05:42.294504+08:00","closed_at":"2026-02-20T10:05:42.294504+08:00","close_reason":"Implemented cross-detector score normalization, confidence calibration, tie-breaking, tests, and docs.","dependencies":[{"issue_id":"StockScreenClaude-umr.3.7","depends_on_id":"StockScreenClaude-umr.3","type":"parent-child","created_at":"2026-02-19T17:46:09.725014+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.7","depends_on_id":"StockScreenClaude-umr.3.1","type":"blocks","created_at":"2026-02-19T17:48:50.12254+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.7","depends_on_id":"StockScreenClaude-umr.3.2","type":"blocks","created_at":"2026-02-19T17:48:50.394889+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.7","depends_on_id":"StockScreenClaude-umr.3.5","type":"blocks","created_at":"2026-02-19T17:48:50.962189+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.7","depends_on_id":"StockScreenClaude-umr.3.3.2","type":"blocks","created_at":"2026-02-19T18:12:18.183735+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.7","depends_on_id":"StockScreenClaude-umr.3.4.2","type":"blocks","created_at":"2026-02-19T18:12:18.60024+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.3.7","depends_on_id":"StockScreenClaude-umr.3.6.2","type":"blocks","created_at":"2026-02-19T18:12:19.016383+08:00","created_by":"David Ten"}],"comments":[{"id":31,"issue_id":"StockScreenClaude-umr.3.7","author":"David Ten","text":"This is the anti-fragmentation pass: without it, ranking comparisons become arbitrary and difficult to debug.\n\nInclude examples of before/after scaling to justify the normalization approach.\n","created_at":"2026-02-19T09:46:09Z"}]}
{"id":"StockScreenClaude-umr.4","title":"SE-D: Aggregator, readiness scoring, and explain model","description":"Implement detector aggregation, cross-pattern ranking, readiness feature synthesis, setup_score gating, and explain payload generation.","acceptance_criteria":"A single deterministic ranking/explain output is available for scanner integration with no opaque scoring paths.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:45:54.563584+08:00","created_by":"David Ten","updated_at":"2026-02-23T07:42:06.54765+08:00","closed_at":"2026-02-23T07:42:06.54765+08:00","close_reason":"All 6 children completed: aggregator pipeline (D1), ranking formula (D2), readiness features (D3), setup score gating (D4), explain payload (D5), and field-level trace metadata (D6) all delivered.","dependencies":[{"issue_id":"StockScreenClaude-umr.4","depends_on_id":"StockScreenClaude-umr","type":"parent-child","created_at":"2026-02-19T17:45:54.564645+08:00","created_by":"David Ten"}],"comments":[{"id":5,"issue_id":"StockScreenClaude-umr.4","author":"David Ten","text":"This epic translates raw detector candidates into user-facing decision support.\n\nIt unifies quality and readiness into a stable score, applies tie-breakers, and emits a checklist-style explanation that can be surfaced in UI without backend-specific interpretation.\n\nIf this epic is weak, pattern detection quality cannot be used effectively by downstream workflows.\n","created_at":"2026-02-19T09:45:54Z"},{"id":63,"issue_id":"StockScreenClaude-umr.4","author":"David Ten","text":"Scoring architecture requirements for this epic:\n- Candidate ranking: weighted blend of quality/readiness/confidence with deterministic tie-breakers.\n- Setup score: separate structural quality vs immediate readiness; avoid single opaque number.\n- Explain payload: map each major score driver to at least one human-readable check/metric.\n\nTraceability requirement:\nAll score components should be reconstructible from serialized metrics; no hidden state in ranking decisions.\n","created_at":"2026-02-19T10:13:31Z"}]}
{"id":"StockScreenClaude-umr.4.1","title":"SE-D1: Aggregator execution pipeline for detector candidate collection","description":"Run all detectors on normalized inputs and collect candidate objects with deterministic ordering and traceability.","acceptance_criteria":"Aggregator returns candidate list plus selected primary candidate with stable execution behavior.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:10.28824+08:00","created_by":"David Ten","updated_at":"2026-02-20T10:50:28.388932+08:00","closed_at":"2026-02-20T10:50:28.388932+08:00","close_reason":"Implemented deterministic aggregator execution trace metadata and stable detector pipeline behavior.","dependencies":[{"issue_id":"StockScreenClaude-umr.4.1","depends_on_id":"StockScreenClaude-umr.4","type":"parent-child","created_at":"2026-02-19T17:46:10.289457+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.4.1","depends_on_id":"StockScreenClaude-umr.3.7","type":"blocks","created_at":"2026-02-19T17:48:51.390254+08:00","created_by":"David Ten"}],"comments":[{"id":32,"issue_id":"StockScreenClaude-umr.4.1","author":"David Ten","text":"Establish deterministic detector orchestration to keep outputs reproducible across runs and environments.\n\nLog/trace metadata should make it easy to explain which detectors executed and what they returned.\n","created_at":"2026-02-19T09:46:10Z"}]}
{"id":"StockScreenClaude-umr.4.2","title":"SE-D2: Candidate ranking formula, tie-breakers, and fallback policy","description":"Implement weighted ranking and tie-breakers favoring structural setups when scores are close, plus fallback behavior when no candidate qualifies.","acceptance_criteria":"Primary candidate selection is deterministic and documented with tie-break rationale.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:10.867702+08:00","created_by":"David Ten","updated_at":"2026-02-20T11:53:43.300433+08:00","closed_at":"2026-02-20T11:53:43.300433+08:00","close_reason":"Implemented deterministic weighted primary-selection tie-breaks with structural preference and explicit fallback behavior.","dependencies":[{"issue_id":"StockScreenClaude-umr.4.2","depends_on_id":"StockScreenClaude-umr.4","type":"parent-child","created_at":"2026-02-19T17:46:10.868907+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.4.2","depends_on_id":"StockScreenClaude-umr.4.1","type":"blocks","created_at":"2026-02-19T17:48:51.589744+08:00","created_by":"David Ten"}],"comments":[{"id":33,"issue_id":"StockScreenClaude-umr.4.2","author":"David Ten","text":"Ranking logic must be stable and explainable. Tie-breakers should encode intentional preferences, not incidental ordering.\n\nFallback behavior should avoid empty/opaque responses.\n","created_at":"2026-02-19T09:46:11Z"}]}
{"id":"StockScreenClaude-umr.4.3","title":"SE-D3: Central breakout-readiness feature computation","description":"Compute distance-to-pivot, contraction, volume dry-up, and RS leadership features as shared readiness primitives.","acceptance_criteria":"Readiness metrics are computed once centrally and exposed as top-level setup_engine fields.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:11.42675+08:00","created_by":"David Ten","updated_at":"2026-02-20T11:54:01.944699+08:00","closed_at":"2026-02-20T11:54:01.944699+08:00","close_reason":"Implemented central breakout-readiness feature computation and exposed readiness primitives as top-level setup_engine fields.","dependencies":[{"issue_id":"StockScreenClaude-umr.4.3","depends_on_id":"StockScreenClaude-umr.4","type":"parent-child","created_at":"2026-02-19T17:46:11.428528+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.4.3","depends_on_id":"StockScreenClaude-umr.4.1","type":"blocks","created_at":"2026-02-19T17:48:51.784369+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.4.3","depends_on_id":"StockScreenClaude-umr.1.3","type":"blocks","created_at":"2026-02-19T18:12:21.171034+08:00","created_by":"David Ten"}],"comments":[{"id":34,"issue_id":"StockScreenClaude-umr.4.3","author":"David Ten","text":"Centralizing readiness math avoids duplicated logic drift across detectors and scanner layers.\n\nEvery readiness field should map to both filterability and explainability.\n","created_at":"2026-02-19T09:46:11Z"},{"id":79,"issue_id":"StockScreenClaude-umr.4.3","author":"David Ten","text":"Central readiness field formulas to implement exactly:\n- `distance_to_pivot_pct = 100*(close - pivot)/pivot`\n- `atr14_pct = 100*ATR14/close`\n- `atr14_pct_trend = slope(atr14_pct, lookback=20)`\n- `bb_width_pct = 100*(bb_upper-bb_lower)/bb_mid`\n- `bb_width_pctile_252 = pct_rank(bb_width_pct[-1], bb_width_pct[-252:])`\n- `volume_vs_50d = vol / SMA(vol,50)`\n- `rs = close/spy_close`, plus `rs_line_new_high`, `rs_vs_spy_65d`, `rs_vs_spy_trend_20d`\n","created_at":"2026-02-19T10:14:13Z"}]}
{"id":"StockScreenClaude-umr.4.4","title":"SE-D4: Setup score synthesis and setup_ready gating policy","description":"Combine quality/readiness into setup_score and define setup_ready boolean using threshold and contextual gates (stage/RS/early-zone).","acceptance_criteria":"Score and readiness classification are reproducible and configurable with explicit threshold rationale.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:11.970305+08:00","created_by":"David Ten","updated_at":"2026-02-20T14:35:03.193607+08:00","closed_at":"2026-02-20T14:35:03.193607+08:00","close_reason":"Implemented setup_score synthesis (0.60*quality + 0.40*readiness), per-candidate setup_score (0.55*quality + 0.35*readiness + 0.10*confidence*100), and full 9-gate setup_ready policy (score threshold, quality floor, readiness floor, early zone, ATR14 cap, volume floor, RS leadership, stage_ok, no failed checks). All 56 tests pass.","dependencies":[{"issue_id":"StockScreenClaude-umr.4.4","depends_on_id":"StockScreenClaude-umr.4","type":"parent-child","created_at":"2026-02-19T17:46:11.971392+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.4.4","depends_on_id":"StockScreenClaude-umr.4.2","type":"blocks","created_at":"2026-02-19T17:48:51.97056+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.4.4","depends_on_id":"StockScreenClaude-umr.4.3","type":"blocks","created_at":"2026-02-19T17:48:52.216312+08:00","created_by":"David Ten"}],"comments":[{"id":35,"issue_id":"StockScreenClaude-umr.4.4","author":"David Ten","text":"This task codifies how rankings convert into actionable screening states.\n\nDocument why each gating condition exists and how it should be tuned over time.\n","created_at":"2026-02-19T09:46:12Z"},{"id":80,"issue_id":"StockScreenClaude-umr.4.4","author":"David Ten","text":"Scoring policy details:\n- Candidate score baseline:\n  `0.55*quality_score + 0.35*readiness_score + 0.10*(confidence*100)`\n- Final setup score baseline:\n  `0.60*quality_score + 0.40*readiness_score`\n- `setup_ready` gate should combine threshold + context checks (`in_early_zone`, `stage_ok`, `rs_ok`).\n\nThresholds must come from config with defaults + bounds, not literals.\n","created_at":"2026-02-19T10:14:13Z"}]}
{"id":"StockScreenClaude-umr.4.5","title":"SE-D5: Explain payload builder (checks, levels, invalidation flags)","description":"Build explain object with passed/failed checks, key levels, and invalidation flags for frontend rendering and auditability.","acceptance_criteria":"Explain payload is self-contained and consistent with score/readiness outcomes.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:12.499133+08:00","created_by":"David Ten","updated_at":"2026-02-20T19:20:12.129361+08:00","closed_at":"2026-02-20T19:20:12.129361+08:00","close_reason":"Explain payload builder fully implemented: pure build_explain_payload() with 8 readiness gates, frozen ExplainBuilderInput/ExplainResult dataclasses, scanner integration, and 55 passing tests. All major score drivers mapped to human-readable checks.","dependencies":[{"issue_id":"StockScreenClaude-umr.4.5","depends_on_id":"StockScreenClaude-umr.4","type":"parent-child","created_at":"2026-02-19T17:46:12.50064+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.4.5","depends_on_id":"StockScreenClaude-umr.4.4","type":"blocks","created_at":"2026-02-19T17:48:52.42696+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.4.5","depends_on_id":"StockScreenClaude-umr.4.6","type":"blocks","created_at":"2026-02-19T18:12:30.531598+08:00","created_by":"David Ten"}],"comments":[{"id":36,"issue_id":"StockScreenClaude-umr.4.5","author":"David Ten","text":"Explain payload quality determines whether users trust the Setup Engine.\n\nEnsure all major score drivers have corresponding human-readable check or metric entries.\n","created_at":"2026-02-19T09:46:12Z"}]}
{"id":"StockScreenClaude-umr.4.6","title":"SE-D6: Implement field-level calculation spec + trace metadata","description":"Encode each readiness/quality field formula with trace metadata so score outputs can be audited down to input components.","acceptance_criteria":"For each computed field, the system can expose formula inputs/outputs and units; discrepancies are test-detectable with deterministic fixtures.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T18:12:22.606238+08:00","created_by":"David Ten","updated_at":"2026-02-20T17:04:52.006302+08:00","closed_at":"2026-02-20T17:04:52.006302+08:00","close_reason":"All 30 score trace tests + 54 related setup engine tests pass green. Implementation complete across commits e14cfc1d and a5f3dcd8.","dependencies":[{"issue_id":"StockScreenClaude-umr.4.6","depends_on_id":"StockScreenClaude-umr.4","type":"parent-child","created_at":"2026-02-19T18:12:22.607287+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.4.6","depends_on_id":"StockScreenClaude-umr.4.3","type":"blocks","created_at":"2026-02-19T18:12:29.70279+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.4.6","depends_on_id":"StockScreenClaude-umr.4.4","type":"blocks","created_at":"2026-02-19T18:12:30.117538+08:00","created_by":"David Ten"}],"comments":[{"id":64,"issue_id":"StockScreenClaude-umr.4.6","author":"David Ten","text":"Formula trace spec (must be code-backed, not docs-only):\n- `distance_to_pivot_pct = 100 * (close - pivot_price) / pivot_price`\n- `atr14_pct = 100 * ATR14 / close`\n- `bb_width_pct = 100 * (bb_upper - bb_lower) / bb_mid`\n- `bb_width_pctile_252 = pct_rank(bb_width_pct[-1], bb_width_pct[-252:])`\n- `volume_vs_50d = volume / SMA(volume, 50)`\n- `setup_score = 0.60 * quality_score + 0.40 * readiness_score`\n\nTrace payload guidance:\nInclude optional `score_trace` block under `setup_engine.explain` with per-component values and weights for debugging.\n","created_at":"2026-02-19T10:13:31Z"}]}
{"id":"StockScreenClaude-umr.5","title":"SE-E: SetupEngineScanner integration, persistence, and query wiring","description":"Integrate Setup Engine outputs into screener runtime and persistence/query layers so fields are stored, filterable, and sortable.","acceptance_criteria":"setup_engine payload is fully emitted, persisted, and queryable in both scan results and feature store paths.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:45:55.157169+08:00","created_by":"David Ten","updated_at":"2026-02-23T07:42:08.285267+08:00","closed_at":"2026-02-23T07:42:08.285267+08:00","close_reason":"All 9 children completed: scanner registration (E1), context analyzers (E2), canonical payload (E3), scan_result_query mappings (E4), feature_store_query mappings (E5), backward compatibility (E6), historical backfill (E8), feature flag/observability (E9), and invalidation plumbing (E7).","dependencies":[{"issue_id":"StockScreenClaude-umr.5","depends_on_id":"StockScreenClaude-umr","type":"parent-child","created_at":"2026-02-19T17:45:55.158418+08:00","created_by":"David Ten"}],"comments":[{"id":6,"issue_id":"StockScreenClaude-umr.5","author":"David Ten","text":"This epic makes the feature real for production usage by wiring detector/aggregator outputs into existing scanner and repository/query infrastructure.\n\nPrimary concerns: backward compatibility, JSON path consistency, and SQL-side sorting/filtering for performance-safe retrieval.\n\nThis is where analytical work becomes operational capability.\n","created_at":"2026-02-19T09:45:55Z"},{"id":65,"issue_id":"StockScreenClaude-umr.5","author":"David Ten","text":"Integration checklist for this epic:\n- New scanner file: `backend/app/scanners/setup_engine_scanner.py`\n- Registry wiring in `backend/app/scanners/screener_registry.py`\n- JSON mapping additions in:\n  - `backend/app/infra/query/scan_result_query.py`\n  - `backend/app/infra/query/feature_store_query.py`\n- Persistence path verification in `backend/app/infra/db/repositories/scan_result_repo.py`\n\nUser-facing success condition:\nFields are not only present in JSON but filterable/sortable without backend-specific caveats.\n","created_at":"2026-02-19T10:13:32Z"}]}
{"id":"StockScreenClaude-umr.5.1","title":"SE-E1: Implement and register SetupEngineScanner","description":"Add backend/app/scanners/setup_engine_scanner.py and register the screener in ScreenerRegistry.","acceptance_criteria":"SetupEngineScanner can execute in orchestrator flow with declared data requirements and no regressions to existing screeners.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:13.125946+08:00","created_by":"David Ten","updated_at":"2026-02-20T20:47:03.44921+08:00","closed_at":"2026-02-20T20:47:03.44921+08:00","close_reason":"Implemented SetupEngineScanner with @register_screener, ScreenerName.SETUP_ENGINE enum, full pipeline (policy → aggregator → readiness → payload), and 20 passing tests. Commit b8049b1a.","dependencies":[{"issue_id":"StockScreenClaude-umr.5.1","depends_on_id":"StockScreenClaude-umr.5","type":"parent-child","created_at":"2026-02-19T17:46:13.128299+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.5.1","depends_on_id":"StockScreenClaude-umr.4.5","type":"blocks","created_at":"2026-02-19T17:48:52.607747+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.5.1","depends_on_id":"StockScreenClaude-umr.1.4","type":"blocks","created_at":"2026-02-19T17:48:52.77787+08:00","created_by":"David Ten"}],"comments":[{"id":37,"issue_id":"StockScreenClaude-umr.5.1","author":"David Ten","text":"This task introduces the runtime entrypoint for all Setup Engine logic.\n\nKeep scanner responsibilities thin: orchestration and output packaging, not detector-specific algorithm sprawl.\n","created_at":"2026-02-19T09:46:13Z"}]}
{"id":"StockScreenClaude-umr.5.2","title":"SE-E2: Integrate stage/MA/RS context analyzers into scanner flow","description":"Reuse existing analyzers (e.g., Minervini components) for stage and leadership gates to avoid duplicate implementations.","acceptance_criteria":"Scanner output includes stage/MA/RS gating fields aligned with setup_ready criteria.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:13.777479+08:00","created_by":"David Ten","updated_at":"2026-02-22T13:27:52.496274+08:00","closed_at":"2026-02-22T13:27:52.496274+08:00","close_reason":"All acceptance criteria met: stage/MA/RS analyzers integrated via Phase B½, three gating fields in payload, gates 8-10 drive setup_ready, comprehensive test coverage. Implemented in commit 4c6a751.","dependencies":[{"issue_id":"StockScreenClaude-umr.5.2","depends_on_id":"StockScreenClaude-umr.5","type":"parent-child","created_at":"2026-02-19T17:46:13.779692+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.5.2","depends_on_id":"StockScreenClaude-umr.5.1","type":"blocks","created_at":"2026-02-19T17:48:52.949286+08:00","created_by":"David Ten"}],"comments":[{"id":38,"issue_id":"StockScreenClaude-umr.5.2","author":"David Ten","text":"Reusing existing analyzers improves consistency with current system behavior and reduces maintenance burden.\n","created_at":"2026-02-19T09:46:14Z"}]}
{"id":"StockScreenClaude-umr.5.3","title":"SE-E3: Emit canonical setup_engine payload in ScreenerResult.details","description":"Package primary candidate, secondary candidates, readiness metrics, scores, and explain object under setup_engine namespace.","acceptance_criteria":"Payload shape matches SE-A2 contract exactly and remains JSON-serializable.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:14.506371+08:00","created_by":"David Ten","updated_at":"2026-02-20T22:16:08.850155+08:00","closed_at":"2026-02-20T22:16:08.850155+08:00","close_reason":"Scope fully absorbed by SE-E1 (b8049b1a). Payload builder, screener integration, schema contract, boundary guard, and 57 tests all verified passing.","dependencies":[{"issue_id":"StockScreenClaude-umr.5.3","depends_on_id":"StockScreenClaude-umr.5","type":"parent-child","created_at":"2026-02-19T17:46:14.508015+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.5.3","depends_on_id":"StockScreenClaude-umr.5.1","type":"blocks","created_at":"2026-02-19T17:48:53.117489+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.5.3","depends_on_id":"StockScreenClaude-umr.2.7","type":"blocks","created_at":"2026-02-19T18:12:28.708087+08:00","created_by":"David Ten"}],"comments":[{"id":39,"issue_id":"StockScreenClaude-umr.5.3","author":"David Ten","text":"This task is the contract handoff from analysis runtime to persistence/query/frontend layers.\n\nAny field naming drift here will propagate into broken filters and UI mappings.\n","created_at":"2026-02-19T09:46:14Z"}]}
{"id":"StockScreenClaude-umr.5.4","title":"SE-E4: Update scan_result_query JSON mappings and add JSON numeric sorting","description":"Add setup_engine field mappings in scan_result_query and implement SQL-side json_extract sorting for mapped numeric fields.","acceptance_criteria":"Scan-result filtering/sorting supports setup_score/readiness/pivot-distance and related fields without Python-side sorting fallbacks.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:15.18611+08:00","created_by":"David Ten","updated_at":"2026-02-20T23:59:54.996795+08:00","closed_at":"2026-02-20T23:59:54.996795+08:00","close_reason":"Implemented in commit 22b2b54c: 18 se_* JSON field mappings, _JSON_SORT_NUMERIC, _json_sort_expr helper, categorical/text filter support for JSON fields, 222 tests passing","dependencies":[{"issue_id":"StockScreenClaude-umr.5.4","depends_on_id":"StockScreenClaude-umr.5","type":"parent-child","created_at":"2026-02-19T17:46:15.188006+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.5.4","depends_on_id":"StockScreenClaude-umr.5.3","type":"blocks","created_at":"2026-02-19T17:48:53.398824+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.5.4","depends_on_id":"StockScreenClaude-umr.1.2","type":"blocks","created_at":"2026-02-19T17:48:53.590541+08:00","created_by":"David Ten"}],"comments":[{"id":40,"issue_id":"StockScreenClaude-umr.5.4","author":"David Ten","text":"SQL-side sorting is required for scale and correctness; avoid in-memory sort paths that truncate or reorder unexpectedly.\n\nVerify casts and null handling for mixed JSON value types.\n","created_at":"2026-02-19T09:46:15Z"},{"id":81,"issue_id":"StockScreenClaude-umr.5.4","author":"David Ten","text":"Query mapping details:\n- Add each new field path to `_JSON_FIELD_MAP`.\n- For JSON sorts, cast numeric fields in SQL (`cast(json_extract(...) as float)` equivalent for dialect).\n- Define null-order behavior explicitly (e.g., nulls last for descending quality sorts).\n\nFile target: `backend/app/infra/query/scan_result_query.py`.\n","created_at":"2026-02-19T10:14:14Z"}]}
{"id":"StockScreenClaude-umr.5.5","title":"SE-E5: Update feature_store_query JSON field mappings","description":"Add equivalent setup_engine mappings to feature_store_query for snapshot filtering and sorting parity.","acceptance_criteria":"Feature store query path exposes the same core setup fields as scan result queries.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:15.849878+08:00","created_by":"David Ten","updated_at":"2026-02-20T23:59:55.001694+08:00","closed_at":"2026-02-20T23:59:55.001694+08:00","close_reason":"Implemented in commit 22b2b54c: 18 se_* JSON field mappings, _JSON_SORT_NUMERIC, _json_sort_expr helper, categorical/text filter support for JSON fields, 222 tests passing","dependencies":[{"issue_id":"StockScreenClaude-umr.5.5","depends_on_id":"StockScreenClaude-umr.5","type":"parent-child","created_at":"2026-02-19T17:46:15.851119+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.5.5","depends_on_id":"StockScreenClaude-umr.5.3","type":"blocks","created_at":"2026-02-19T17:48:53.762291+08:00","created_by":"David Ten"}],"comments":[{"id":41,"issue_id":"StockScreenClaude-umr.5.5","author":"David Ten","text":"Parity between ad-hoc scans and feature-store snapshots is critical to avoid confusing query behavior differences.\n","created_at":"2026-02-19T09:46:16Z"},{"id":82,"issue_id":"StockScreenClaude-umr.5.5","author":"David Ten","text":"Feature-store parity details:\n- Keep setup-engine filter/sort field names aligned with scan-result query keys.\n- Validate numeric-cast behavior and bool extraction parity.\n\nFile target: `backend/app/infra/query/feature_store_query.py`.\n","created_at":"2026-02-19T10:14:14Z"}]}
{"id":"StockScreenClaude-umr.5.6","title":"SE-E6: Validate persistence and backward compatibility across storage paths","description":"Confirm ScanResult.details and StockFeatureDaily.details_json persist setup_engine consistently without breaking existing consumers.","acceptance_criteria":"Round-trip verification proves setup_engine fields are stable, queryable, and backward compatible with existing workflows.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:16.534538+08:00","created_by":"David Ten","updated_at":"2026-02-21T01:02:56.594191+08:00","closed_at":"2026-02-21T01:02:56.594191+08:00","close_reason":"Promoted setup_engine in orchestrator (4 lines) + 53 round-trip/validation tests all passing","dependencies":[{"issue_id":"StockScreenClaude-umr.5.6","depends_on_id":"StockScreenClaude-umr.5","type":"parent-child","created_at":"2026-02-19T17:46:16.535894+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.5.6","depends_on_id":"StockScreenClaude-umr.5.4","type":"blocks","created_at":"2026-02-19T17:48:53.948228+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.5.6","depends_on_id":"StockScreenClaude-umr.5.5","type":"blocks","created_at":"2026-02-19T17:48:54.134591+08:00","created_by":"David Ten"}],"comments":[{"id":42,"issue_id":"StockScreenClaude-umr.5.6","author":"David Ten","text":"Run end-to-end checks across both persistence paths and existing filters.\n\nBackward compatibility includes not only schema shape but also expected default values when Setup Engine is absent.\n","created_at":"2026-02-19T09:46:16Z"}]}
{"id":"StockScreenClaude-umr.5.7","title":"SE-E7: Invalidation flag plumbing and optional earnings-aware checks","description":"Add invalidation signals (too_extended, breaks_50d_support, low_liquidity, optional earnings_soon) to setup_engine explain payload.","acceptance_criteria":"Invalidation flags are explicit, configurable where needed, and available for UI rendering/filtering.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:17.185312+08:00","created_by":"David Ten","updated_at":"2026-02-22T14:44:01.047015+08:00","closed_at":"2026-02-22T14:44:01.047015+08:00","close_reason":"Implemented in commits 178fe043 and 19d30001. 4 operational flags (too_extended, breaks_50d_support, low_liquidity, earnings_soon) with configurable thresholds, frontend severity rendering, 84 backend + 29 frontend tests passing.","dependencies":[{"issue_id":"StockScreenClaude-umr.5.7","depends_on_id":"StockScreenClaude-umr.5","type":"parent-child","created_at":"2026-02-19T17:46:17.18641+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.5.7","depends_on_id":"StockScreenClaude-umr.5.3","type":"blocks","created_at":"2026-02-19T17:48:54.316401+08:00","created_by":"David Ten"}],"comments":[{"id":43,"issue_id":"StockScreenClaude-umr.5.7","author":"David Ten","text":"Invalidation flags make the system operationally useful by surfacing why a candidate may be de-prioritized despite strong structure.\n\nKeep earnings-aware logic optional and clearly labeled as data-dependent.\n","created_at":"2026-02-19T09:46:17Z"}]}
{"id":"StockScreenClaude-umr.5.8","title":"SE-E8: Historical backfill for setup_engine in feature store","description":"Add a backfill path so historical StockFeatureDaily rows receive setup_engine payloads for immediate filter/sort usability.","acceptance_criteria":"Backfill job supports resumable execution, symbol/date scoping, and idempotent writes with progress visibility.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T18:12:23.065759+08:00","created_by":"David Ten","updated_at":"2026-02-22T15:05:47.712868+08:00","closed_at":"2026-02-22T15:05:47.712868+08:00","close_reason":"Backfill script delivered with idempotent writes, symbol scoping, dry-run, progress counters, and 23 unit tests across 2 commits (ba222e22, 6e6ec0da).","dependencies":[{"issue_id":"StockScreenClaude-umr.5.8","depends_on_id":"StockScreenClaude-umr.5","type":"parent-child","created_at":"2026-02-19T18:12:23.066897+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.5.8","depends_on_id":"StockScreenClaude-umr.5.6","type":"blocks","created_at":"2026-02-19T18:12:31.364472+08:00","created_by":"David Ten"}],"comments":[{"id":66,"issue_id":"StockScreenClaude-umr.5.8","author":"David Ten","text":"Backfill execution details:\n- Support symbol/date scoped backfill to avoid all-or-nothing runs.\n- Idempotency rule: if `setup_engine` exists for a row and schema version matches, skip unless `--force`.\n- Add progress counters: processed rows, skipped rows, errors, ETA.\n- Add dry-run mode for sizing and safety checks.\n\nOperational expectation:\nBackfill should enable historical screening workflows immediately after rollout, not only for new scans.\n","created_at":"2026-02-19T10:13:32Z"}]}
{"id":"StockScreenClaude-umr.5.9","title":"SE-E9: Add feature flag + runtime observability for Setup Engine","description":"Gate Setup Engine rollout behind a config flag and emit detector timing/coverage metrics for production diagnostics.","acceptance_criteria":"Feature can be toggled safely; per-detector latency/failure/candidate metrics are emitted and visible in existing observability flow.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T18:12:23.612403+08:00","created_by":"David Ten","updated_at":"2026-02-21T07:05:14.700295+08:00","closed_at":"2026-02-21T07:05:14.700295+08:00","close_reason":"Shipped in commits 9db5cf3 + 7214168: feature flag, per-detector timing, scanner-level timing breakdown, score distribution telemetry, 26 tests passing","dependencies":[{"issue_id":"StockScreenClaude-umr.5.9","depends_on_id":"StockScreenClaude-umr.5","type":"parent-child","created_at":"2026-02-19T18:12:23.61351+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.5.9","depends_on_id":"StockScreenClaude-umr.5.1","type":"blocks","created_at":"2026-02-19T18:12:32.625003+08:00","created_by":"David Ten"}],"comments":[{"id":67,"issue_id":"StockScreenClaude-umr.5.9","author":"David Ten","text":"Observability deliverables:\n- Emit per-detector timing, candidate count, and exception/no-data counters.\n- Emit scanner-level timing breakdown: fetch prep, detectors, aggregation, serialization.\n- Include setup score distribution telemetry by scan run for sanity monitoring.\n\nFeature flag scope:\n- Toggle should control scanner availability/execution path without requiring deploy rollback.\n","created_at":"2026-02-19T10:13:33Z"}]}
{"id":"StockScreenClaude-umr.6","title":"SE-F: Frontend integration for Setup Engine fields and explain drawer","description":"Expose Setup Engine fields as columns/filters and render explain object in an actionable drawer UI.","acceptance_criteria":"Users can inspect setup rationale and key levels without custom backend endpoints or manual JSON inspection.","status":"closed","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:45:55.707749+08:00","created_by":"David Ten","updated_at":"2026-02-23T07:44:21.973643+08:00","closed_at":"2026-02-23T07:44:21.973643+08:00","close_reason":"All 4 children completed: screener selection (F1), columns/filters (F2), explain drawer (F3), and UI resilience for partial payloads (F4).","dependencies":[{"issue_id":"StockScreenClaude-umr.6","depends_on_id":"StockScreenClaude-umr","type":"parent-child","created_at":"2026-02-19T17:45:55.709006+08:00","created_by":"David Ten"}],"comments":[{"id":7,"issue_id":"StockScreenClaude-umr.6","author":"David Ten","text":"The frontend epic converts backend analysis into operator leverage: faster chart review and consistent triage.\n\nUI implementation should prioritize clarity and failure tolerance: partial payloads must degrade gracefully and still preserve trust in what is shown.\n\nExplain drawer content should map directly to backend checks/levels to avoid interpretation drift.\n","created_at":"2026-02-19T09:45:55Z"}]}
{"id":"StockScreenClaude-umr.6.1","title":"SE-F1: Add Setup Engine as selectable screener in frontend flows","description":"Expose Setup Engine in screener selection and request payload wiring.","acceptance_criteria":"Users can run scans with Setup Engine enabled via standard UI flows.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:17.815424+08:00","created_by":"David Ten","updated_at":"2026-02-21T07:58:54.51387+08:00","closed_at":"2026-02-21T07:58:54.51387+08:00","close_reason":"Shipped in commit 923d31b: setup_engine chip + default state in ScanPage, JSDoc and schema description updates","dependencies":[{"issue_id":"StockScreenClaude-umr.6.1","depends_on_id":"StockScreenClaude-umr.6","type":"parent-child","created_at":"2026-02-19T17:46:17.818704+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.6.1","depends_on_id":"StockScreenClaude-umr.5.1","type":"blocks","created_at":"2026-02-19T17:48:54.501663+08:00","created_by":"David Ten"}],"comments":[{"id":44,"issue_id":"StockScreenClaude-umr.6.1","author":"David Ten","text":"This task connects user intent to backend capability and should follow established screener selection patterns.\n","created_at":"2026-02-19T09:46:18Z"}]}
{"id":"StockScreenClaude-umr.6.2","title":"SE-F2: Add Setup Engine columns and filter controls","description":"Expose setup_score, pattern_primary, pivot-distance, squeeze, volume, RS, and pivot fields as table columns and filters.","acceptance_criteria":"Columns/filters are coherent with backend JSON mappings and support sort/filter UX without custom parsing hacks.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:18.459078+08:00","created_by":"David Ten","updated_at":"2026-02-21T12:05:49.311646+08:00","closed_at":"2026-02-21T12:05:49.311646+08:00","close_reason":"Implemented in commit e67a7554: extracted SE fields to extended_fields, added schema/filter params, built 7 frontend columns and 6 filter controls. Build passes, tests pass.","dependencies":[{"issue_id":"StockScreenClaude-umr.6.2","depends_on_id":"StockScreenClaude-umr.6","type":"parent-child","created_at":"2026-02-19T17:46:18.461469+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.6.2","depends_on_id":"StockScreenClaude-umr.6.1","type":"blocks","created_at":"2026-02-19T17:48:54.676381+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.6.2","depends_on_id":"StockScreenClaude-umr.5.4","type":"blocks","created_at":"2026-02-19T17:48:54.852772+08:00","created_by":"David Ten"}],"comments":[{"id":45,"issue_id":"StockScreenClaude-umr.6.2","author":"David Ten","text":"Prioritize high-signal fields first; avoid overloading the default view with too many low-value metrics.\n","created_at":"2026-02-19T09:46:18Z"},{"id":83,"issue_id":"StockScreenClaude-umr.6.2","author":"David Ten","text":"Frontend field exposure details:\n- Required initial columns: `setup_score`, `pattern_primary`, `distance_to_pivot_pct`, `bb_squeeze`, `volume_vs_50d`, `rs_line_new_high`, `pivot_price`.\n- Maintain unit formatting consistency (`%`, ratios, price precision).\n- Filters must match backend key names exactly to avoid hidden mapping drift.\n","created_at":"2026-02-19T10:14:14Z"}]}
{"id":"StockScreenClaude-umr.6.3","title":"SE-F3: Build explain drawer for checklist and key levels","description":"Render setup_engine.explain with passed/failed checks, key levels, invalidation flags, and candidate summary details.","acceptance_criteria":"Drawer content is readable, traceable to backend fields, and helpful for rapid chart triage.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:19.043723+08:00","created_by":"David Ten","updated_at":"2026-02-21T14:55:50.490392+08:00","closed_at":"2026-02-21T14:55:50.490392+08:00","close_reason":"Both review fixes applied: symbol in drawer header, null guard on ready chip. Frontend builds clean, 23 backend tests pass.","dependencies":[{"issue_id":"StockScreenClaude-umr.6.3","depends_on_id":"StockScreenClaude-umr.6","type":"parent-child","created_at":"2026-02-19T17:46:19.045125+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.6.3","depends_on_id":"StockScreenClaude-umr.6.1","type":"blocks","created_at":"2026-02-19T17:48:55.052837+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.6.3","depends_on_id":"StockScreenClaude-umr.5.3","type":"blocks","created_at":"2026-02-19T17:48:55.22686+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.6.3","depends_on_id":"StockScreenClaude-umr.2.7","type":"blocks","created_at":"2026-02-19T18:12:29.242257+08:00","created_by":"David Ten"}],"comments":[{"id":46,"issue_id":"StockScreenClaude-umr.6.3","author":"David Ten","text":"The explain drawer is where model transparency becomes user trust.\n\nField labels and units must match backend semantics exactly.\n","created_at":"2026-02-19T09:46:19Z"},{"id":84,"issue_id":"StockScreenClaude-umr.6.3","author":"David Ten","text":"Explain drawer structure (minimum sections):\n1) Setup summary (pattern, score, readiness)\n2) Passed checks\n3) Failed checks\n4) Key levels (pivot/support/base bounds)\n5) Invalidation flags\n\nFallback behavior:\n- If explain block partial, render available sections with explicit \"data unavailable\" indicators.\n","created_at":"2026-02-19T10:14:15Z"}]}
{"id":"StockScreenClaude-umr.6.4","title":"SE-F4: UI resilience for partial explain payloads and detector fallbacks","description":"Implement graceful handling when some explain fields are missing or detector outputs are partial/none.","acceptance_criteria":"Frontend does not crash or mislead when setup_engine payload is incomplete; state messaging remains explicit.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:19.645312+08:00","created_by":"David Ten","updated_at":"2026-02-21T15:34:43.81025+08:00","closed_at":"2026-02-21T15:34:43.81025+08:00","close_reason":"Implemented all 6 changes: type guards on explain/candidates, insufficient/degraded data Alert banners, conditional scores grid, Object.keys() guards, stable candidate key, NaN guard on key_levels price. 55 backend tests pass.","dependencies":[{"issue_id":"StockScreenClaude-umr.6.4","depends_on_id":"StockScreenClaude-umr.6","type":"parent-child","created_at":"2026-02-19T17:46:19.64698+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.6.4","depends_on_id":"StockScreenClaude-umr.6.3","type":"blocks","created_at":"2026-02-19T17:48:55.425738+08:00","created_by":"David Ten"}],"comments":[{"id":47,"issue_id":"StockScreenClaude-umr.6.4","author":"David Ten","text":"Treat missing data as first-class UX states, not exceptional errors.\n\nClear fallback messaging prevents false confidence and reduces debugging burden.\n","created_at":"2026-02-19T09:46:20Z"}]}
{"id":"StockScreenClaude-umr.7","title":"SE-G: Testing, regression safety, and quality gates","description":"Add detector/unit/integration/performance tests and CI quality gates to prevent regressions and look-ahead errors.","acceptance_criteria":"Automated validation covers detectors, readiness features, persistence/query behavior, frontend rendering, and runtime budget.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:45:56.24097+08:00","created_by":"David Ten","updated_at":"2026-02-23T07:44:23.075912+08:00","closed_at":"2026-02-23T07:44:23.075912+08:00","close_reason":"All 7 children completed: unit tests (G1), no-look-ahead safeguards (G2), backend integration tests (G3), frontend tests (G4), performance budget tests (G5), CI quality gates (G6), and golden regression suite (G7).","dependencies":[{"issue_id":"StockScreenClaude-umr.7","depends_on_id":"StockScreenClaude-umr","type":"parent-child","created_at":"2026-02-19T17:45:56.242134+08:00","created_by":"David Ten"}],"comments":[{"id":8,"issue_id":"StockScreenClaude-umr.7","author":"David Ten","text":"This epic enforces correctness and stability for a heuristic-heavy system where silent drift is expensive.\n\nSpecial emphasis is placed on no-look-ahead guarantees and incomplete-week handling because those failures produce deceptively good historical results.\n\nQuality gates here are release blockers, not optional polish.\n","created_at":"2026-02-19T09:45:56Z"},{"id":68,"issue_id":"StockScreenClaude-umr.7","author":"David Ten","text":"Test matrix requirement for this epic:\n- Utility math unit tests\n- Detector positive/negative fixtures\n- No-look-ahead + incomplete-week checks\n- Scanner persistence/query integration\n- Frontend rendering/filter behavior\n- Performance budget checks\n- Golden historical regression set\n\nFailure policy:\nAny change to scoring/detection logic must update either expected snapshots or explicit migration notes; silent drift is not acceptable.\n","created_at":"2026-02-19T10:13:33Z"}]}
{"id":"StockScreenClaude-umr.7.1","title":"SE-G1: Unit tests for utilities and detector positive/negative fixtures","description":"Add deterministic unit tests for shared utility functions and detector behavior on synthetic pass/fail datasets.","acceptance_criteria":"Core utility math and detector checks are verified with explicit expected metrics and fail reasons.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:20.835988+08:00","created_by":"David Ten","updated_at":"2026-02-20T10:50:28.388032+08:00","closed_at":"2026-02-20T10:50:28.388032+08:00","close_reason":"Added detector and utility fixture tests for positive/negative cases with explicit fail reasons and metrics assertions.","dependencies":[{"issue_id":"StockScreenClaude-umr.7.1","depends_on_id":"StockScreenClaude-umr.7","type":"parent-child","created_at":"2026-02-19T17:46:20.837318+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.1","depends_on_id":"StockScreenClaude-umr.3.7","type":"blocks","created_at":"2026-02-19T17:48:55.622533+08:00","created_by":"David Ten"}],"comments":[{"id":48,"issue_id":"StockScreenClaude-umr.7.1","author":"David Ten","text":"Test both happy paths and near-miss cases to catch threshold-boundary regressions.\n\nInclude assertions on checks/notes fields, not just binary detection outcomes.\n","created_at":"2026-02-19T09:46:21Z"},{"id":85,"issue_id":"StockScreenClaude-umr.7.1","author":"David Ten","text":"Unit-test scope details:\n- For each detector, include synthetic positive case + one near-miss negative case.\n- Assert pivot location, computed metrics, and check-reason keys (not just boolean detect/non-detect).\n- Include utility-level tests for ATR/BB/slope/swing/percentile helpers.\n","created_at":"2026-02-19T10:14:15Z"}]}
{"id":"StockScreenClaude-umr.7.2","title":"SE-G2: No-look-ahead and incomplete-week bar safeguards","description":"Add tests ensuring rolling metrics and weekly resampling never use future data and handle incomplete current week correctly.","acceptance_criteria":"Temporal integrity tests fail if any feature uses forward-looking information.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:21.559136+08:00","created_by":"David Ten","updated_at":"2026-02-20T10:50:28.399591+08:00","closed_at":"2026-02-20T10:50:28.399591+08:00","close_reason":"Added no-look-ahead temporal integrity tests and incomplete-week exclusion safeguards with boundary-window regressions.","dependencies":[{"issue_id":"StockScreenClaude-umr.7.2","depends_on_id":"StockScreenClaude-umr.7","type":"parent-child","created_at":"2026-02-19T17:46:21.560482+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.2","depends_on_id":"StockScreenClaude-umr.3.7","type":"blocks","created_at":"2026-02-19T17:48:55.812566+08:00","created_by":"David Ten"}],"comments":[{"id":49,"issue_id":"StockScreenClaude-umr.7.2","author":"David Ten","text":"This is a high-risk area for subtle bias. Tests should explicitly freeze \"current\" index positions and verify window boundaries.\n","created_at":"2026-02-19T09:46:21Z"},{"id":86,"issue_id":"StockScreenClaude-umr.7.2","author":"David Ten","text":"Temporal integrity test guidance:\n- Freeze reference index `t`; ensure all features at `t` only use data \u003c= `t`.\n- Verify weekly-resample behavior for incomplete current week (excluded or explicitly marked).\n- Add regression tests around boundary windows (e.g., \u003c252 bars, exact 252 bars).\n","created_at":"2026-02-19T10:14:16Z"}]}
{"id":"StockScreenClaude-umr.7.3","title":"SE-G3: Backend integration tests for scanner→persistence→query path","description":"Validate end-to-end Setup Engine output persistence and query filtering/sorting behavior across scan results and feature store.","acceptance_criteria":"Integration tests prove setup_engine fields survive full pipeline and behave correctly in query APIs.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:22.099762+08:00","created_by":"David Ten","updated_at":"2026-02-22T15:48:34.771643+08:00","closed_at":"2026-02-22T15:48:34.771643+08:00","close_reason":"All 5 acceptance criteria covered by ~2000 lines of tests across 6 files. 99/99 tests passing: scanner output structure, lossless persistence round-trip, JSON field sorting with CAST, feature-store/scan-result path parity, and backward compat for rows without setup_engine.","dependencies":[{"issue_id":"StockScreenClaude-umr.7.3","depends_on_id":"StockScreenClaude-umr.7","type":"parent-child","created_at":"2026-02-19T17:46:22.100845+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.3","depends_on_id":"StockScreenClaude-umr.5.6","type":"blocks","created_at":"2026-02-19T17:48:55.989335+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.3","depends_on_id":"StockScreenClaude-umr.5.8","type":"blocks","created_at":"2026-02-19T18:12:31.786245+08:00","created_by":"David Ten"}],"comments":[{"id":50,"issue_id":"StockScreenClaude-umr.7.3","author":"David Ten","text":"Include assertions for JSON-field sorting semantics and null handling to protect against SQL cast regressions.\n","created_at":"2026-02-19T09:46:22Z"},{"id":87,"issue_id":"StockScreenClaude-umr.7.3","author":"David Ten","text":"Integration validation checklist:\n- scanner output includes full `setup_engine` structure\n- repository persists payload without lossy transforms\n- query filters/sorts return expected ordering on JSON fields\n- feature-store path parity with scan-result path\n- backward compatibility for rows without `setup_engine`\n","created_at":"2026-02-19T10:14:16Z"}]}
{"id":"StockScreenClaude-umr.7.4","title":"SE-G4: Frontend integration tests for columns/filters/explain drawer","description":"Add frontend tests covering Setup Engine table fields, filter interactions, and explain drawer rendering/fallback behavior.","acceptance_criteria":"UI regressions in Setup Engine workflows are caught automatically.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:22.631134+08:00","created_by":"David Ten","updated_at":"2026-02-22T08:34:19.941107+08:00","closed_at":"2026-02-22T08:34:19.941107+08:00","close_reason":"Delivered 35 new tests: ResultsTable.test.jsx (17) + FilterPanel.test.jsx (18). All 108 tests pass, 0 lint errors.","dependencies":[{"issue_id":"StockScreenClaude-umr.7.4","depends_on_id":"StockScreenClaude-umr.7","type":"parent-child","created_at":"2026-02-19T17:46:22.632243+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.4","depends_on_id":"StockScreenClaude-umr.6.4","type":"blocks","created_at":"2026-02-19T17:48:56.17154+08:00","created_by":"David Ten"}],"comments":[{"id":51,"issue_id":"StockScreenClaude-umr.7.4","author":"David Ten","text":"Use representative payload fixtures (full, partial, no-candidate) to validate resilience and readability behavior.\n","created_at":"2026-02-19T09:46:22Z"}]}
{"id":"StockScreenClaude-umr.7.5","title":"SE-G5: Performance and runtime budget regression tests","description":"Measure Setup Engine impact on multi-screener runtime and guard against unacceptable latency growth.","acceptance_criteria":"Performance thresholds are documented and tested to prevent stealth degradation.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:23.180684+08:00","created_by":"David Ten","updated_at":"2026-02-22T08:52:02.494374+08:00","closed_at":"2026-02-22T08:52:02.494374+08:00","close_reason":"Implemented 15 performance regression tests across 5 test classes: TestDetectorBudgets (7 parametrized), TestAggregatorBudget (2), TestReadinessBudget (2), TestScannerBudget (2), TestDetectorCountGuard (2). Adjusted DETECTOR_BUDGET_MS from 50→150 to accommodate three_weeks_tight O(n²) detector (~95ms). All 36 performance tests pass, no interference with existing tests.","dependencies":[{"issue_id":"StockScreenClaude-umr.7.5","depends_on_id":"StockScreenClaude-umr.7","type":"parent-child","created_at":"2026-02-19T17:46:23.181966+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.5","depends_on_id":"StockScreenClaude-umr.4.1","type":"blocks","created_at":"2026-02-19T17:48:56.347439+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.5","depends_on_id":"StockScreenClaude-umr.5.1","type":"blocks","created_at":"2026-02-19T17:48:56.541506+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.5","depends_on_id":"StockScreenClaude-umr.5.9","type":"blocks","created_at":"2026-02-19T18:12:33.039085+08:00","created_by":"David Ten"}],"comments":[{"id":52,"issue_id":"StockScreenClaude-umr.7.5","author":"David Ten","text":"Detector breadth can inflate runtime quickly; add budget checks early to enforce practical limits.\n","created_at":"2026-02-19T09:46:23Z"}]}
{"id":"StockScreenClaude-umr.7.6","title":"SE-G6: CI quality gates and release-readiness checklist updates","description":"Update CI/test matrix and release checklist to require Setup Engine validation suites before merge/release.","acceptance_criteria":"Quality gates include detector correctness, temporal integrity, integration coverage, and performance baselines.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:23.854891+08:00","created_by":"David Ten","updated_at":"2026-02-22T19:08:15.400125+08:00","closed_at":"2026-02-22T19:08:15.400125+08:00","close_reason":"Delivered Makefile with 5 quality gates (gate-check safety net, advisory gate-4), GitHub Actions CI workflow with parallel backend/frontend jobs, release-readiness checklist, and CLAUDE.md update. All 365 SE tests pass across all gates.","dependencies":[{"issue_id":"StockScreenClaude-umr.7.6","depends_on_id":"StockScreenClaude-umr.7","type":"parent-child","created_at":"2026-02-19T17:46:23.85614+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.6","depends_on_id":"StockScreenClaude-umr.7.1","type":"blocks","created_at":"2026-02-19T17:48:56.739438+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.6","depends_on_id":"StockScreenClaude-umr.7.2","type":"blocks","created_at":"2026-02-19T17:48:56.916038+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.6","depends_on_id":"StockScreenClaude-umr.7.3","type":"blocks","created_at":"2026-02-19T17:48:57.083077+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.6","depends_on_id":"StockScreenClaude-umr.7.4","type":"blocks","created_at":"2026-02-19T17:48:57.26321+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.6","depends_on_id":"StockScreenClaude-umr.7.5","type":"blocks","created_at":"2026-02-19T17:48:57.435513+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.6","depends_on_id":"StockScreenClaude-umr.7.7","type":"blocks","created_at":"2026-02-19T18:12:34.694661+08:00","created_by":"David Ten"}],"comments":[{"id":53,"issue_id":"StockScreenClaude-umr.7.6","author":"David Ten","text":"This task operationalizes the test strategy so safeguards are consistently enforced rather than manually remembered.\n","created_at":"2026-02-19T09:46:24Z"}]}
{"id":"StockScreenClaude-umr.7.7","title":"SE-G7: Golden regression suite with known historical setup cases","description":"Create a curated golden dataset harness for expected pattern/pivot/check outputs on known historical windows.","acceptance_criteria":"Golden tests fail on unintended behavior drift and are easy to regenerate intentionally with reviewed snapshots.","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T18:12:24.089277+08:00","created_by":"David Ten","updated_at":"2026-02-22T12:01:24.655168+08:00","closed_at":"2026-02-22T12:01:24.655168+08:00","close_reason":"Fully implemented: 26 golden regression tests across 3 layers (12 detector, 3 aggregator, 11 scanner) covering all 7 pattern detectors with positive and near-miss cases. Snapshot regeneration via --golden-update flag. All acceptance criteria met. 26/26 tests pass.","dependencies":[{"issue_id":"StockScreenClaude-umr.7.7","depends_on_id":"StockScreenClaude-umr.7","type":"parent-child","created_at":"2026-02-19T18:12:24.09038+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.7","depends_on_id":"StockScreenClaude-umr.7.1","type":"blocks","created_at":"2026-02-19T18:12:33.866764+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.7.7","depends_on_id":"StockScreenClaude-umr.7.2","type":"blocks","created_at":"2026-02-19T18:12:34.281571+08:00","created_by":"David Ten"}],"comments":[{"id":69,"issue_id":"StockScreenClaude-umr.7.7","author":"David Ten","text":"Golden suite content requirements:\n- Include representative symbols/windows for each pattern family and at least one intentional near-miss case.\n- Snapshot fields must include pivot, primary pattern, key checks, and score ranges.\n- Use stable fixture snapshots in repo to ensure deterministic CI behavior.\n\nUpdate policy:\nAllow snapshot regeneration only with reviewed rationale documenting why behavior changed.\n","created_at":"2026-02-19T10:13:34Z"}]}
{"id":"StockScreenClaude-umr.8","title":"SE-H: Calibration, rollout strategy, and maintainer handoff","description":"Document parameter rationale, calibration workflow, staged rollout controls, and follow-up backlog for optional enhancements.","acceptance_criteria":"Future maintainers can tune thresholds and operate rollout safely using self-contained docs and backlog links.","status":"closed","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:45:56.811013+08:00","created_by":"David Ten","updated_at":"2026-02-23T07:44:23.972588+08:00","closed_at":"2026-02-23T07:44:23.972588+08:00","close_reason":"All 4 children completed: parameter catalog (H1), staged rollout plan (H2), maintainer handoff (H3), and formula dictionary/operator runbook (H4).","dependencies":[{"issue_id":"StockScreenClaude-umr.8","depends_on_id":"StockScreenClaude-umr","type":"parent-child","created_at":"2026-02-19T17:45:56.812315+08:00","created_by":"David Ten"}],"comments":[{"id":9,"issue_id":"StockScreenClaude-umr.8","author":"David Ten","text":"This epic ensures the project is maintainable after initial implementation.\n\nHeuristic systems degrade without calibration discipline and clear ownership boundaries; this work captures intent, controls, and iteration pathways.\n\nThe goal is operational continuity, not one-off feature delivery.\n","created_at":"2026-02-19T09:45:57Z"}]}
{"id":"StockScreenClaude-umr.8.1","title":"SE-H1: Parameter catalog and calibration report for default thresholds","description":"Produce a maintainable parameter catalog and calibration summary justifying initial defaults and tuning process.","acceptance_criteria":"Threshold defaults are documented with rationale, expected behavior, and recalibration guidance.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:24.652143+08:00","created_by":"David Ten","updated_at":"2026-02-22T21:33:49.711792+08:00","closed_at":"2026-02-22T21:33:49.711792+08:00","close_reason":"Created comprehensive parameter catalog at docs/setup_engine/se_h1_parameter_catalog.md with all 18 runtime params, 10 gates, 9 calibration profiles, 7 detector constant sets, worked examples, and recalibration guide","dependencies":[{"issue_id":"StockScreenClaude-umr.8.1","depends_on_id":"StockScreenClaude-umr.8","type":"parent-child","created_at":"2026-02-19T17:46:24.655958+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.8.1","depends_on_id":"StockScreenClaude-umr.4.4","type":"blocks","created_at":"2026-02-19T17:48:57.610485+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.8.1","depends_on_id":"StockScreenClaude-umr.7.6","type":"blocks","created_at":"2026-02-19T17:48:57.787779+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.8.1","depends_on_id":"StockScreenClaude-umr.4.6","type":"blocks","created_at":"2026-02-19T18:12:30.948148+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.8.1","depends_on_id":"StockScreenClaude-umr.7.7","type":"blocks","created_at":"2026-02-19T18:12:35.112895+08:00","created_by":"David Ten"}],"comments":[{"id":54,"issue_id":"StockScreenClaude-umr.8.1","author":"David Ten","text":"Calibration documentation should explain not only chosen values but also tradeoffs and observed failure modes.\n","created_at":"2026-02-19T09:46:25Z"}]}
{"id":"StockScreenClaude-umr.8.2","title":"SE-H2: Staged rollout plan with feature flags and observability metrics","description":"Define progressive rollout sequence, kill-switch strategy, and monitoring metrics for Setup Engine adoption.","acceptance_criteria":"Rollout plan supports safe enablement with clear rollback criteria and telemetry checkpoints.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:25.385593+08:00","created_by":"David Ten","updated_at":"2026-02-22T21:56:49.40275+08:00","closed_at":"2026-02-22T21:56:49.40275+08:00","close_reason":"Created se_h2_staged_rollout_plan.md with all 10 sections, verified cross-references against codebase","dependencies":[{"issue_id":"StockScreenClaude-umr.8.2","depends_on_id":"StockScreenClaude-umr.8","type":"parent-child","created_at":"2026-02-19T17:46:25.389765+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.8.2","depends_on_id":"StockScreenClaude-umr.8.1","type":"blocks","created_at":"2026-02-19T17:48:57.961301+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.8.2","depends_on_id":"StockScreenClaude-umr.5.6","type":"blocks","created_at":"2026-02-19T17:48:58.139602+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.8.2","depends_on_id":"StockScreenClaude-umr.5.8","type":"blocks","created_at":"2026-02-19T18:12:32.203043+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.8.2","depends_on_id":"StockScreenClaude-umr.5.9","type":"blocks","created_at":"2026-02-19T18:12:33.45341+08:00","created_by":"David Ten"}],"comments":[{"id":55,"issue_id":"StockScreenClaude-umr.8.2","author":"David Ten","text":"Treat rollout as controlled experimentation: define success/failure signals before enabling broadly.\n","created_at":"2026-02-19T09:46:25Z"}]}
{"id":"StockScreenClaude-umr.8.3","title":"SE-H3: Maintainer handoff and follow-up backlog for v1.1 enhancements","description":"Document operational handoff and create follow-up backlog for optional enhancements like industry-basket RS and richer earnings integration.","acceptance_criteria":"Future contributors have explicit next steps, ownership context, and extension guardrails.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T17:46:26.085449+08:00","created_by":"David Ten","updated_at":"2026-02-22T23:21:52.487921+08:00","closed_at":"2026-02-22T23:21:52.487921+08:00","close_reason":"SE-H3 maintainer handoff document created (593 lines, 36 KB). Covers system overview, quickstart, architecture map, design philosophy, extension guardrails, quality gate reference, and 8-item prioritized backlog.","dependencies":[{"issue_id":"StockScreenClaude-umr.8.3","depends_on_id":"StockScreenClaude-umr.8","type":"parent-child","created_at":"2026-02-19T17:46:26.086625+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.8.3","depends_on_id":"StockScreenClaude-umr.8.2","type":"blocks","created_at":"2026-02-19T17:48:58.322175+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.8.3","depends_on_id":"StockScreenClaude-umr.8.4","type":"blocks","created_at":"2026-02-19T18:12:36.425191+08:00","created_by":"David Ten"}],"comments":[{"id":56,"issue_id":"StockScreenClaude-umr.8.3","author":"David Ten","text":"The handoff should make future iteration cheap: clear boundaries, known gaps, and explicit sequencing for optional capabilities.\n","created_at":"2026-02-19T09:46:26Z"}]}
{"id":"StockScreenClaude-umr.8.4","title":"SE-H4: Publish formula dictionary and operator runbook","description":"Document every setup_engine field formula, thresholds, and operational troubleshooting guidance for maintainers and end-users.","acceptance_criteria":"Runbook includes metric definitions, common failure modes, calibration workflow, and clear ownership/escalation notes.","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-19T18:12:24.556466+08:00","created_by":"David Ten","updated_at":"2026-02-22T22:55:29.700163+08:00","closed_at":"2026-02-22T22:55:29.700163+08:00","close_reason":"All acceptance criteria met: formula dictionary (31 fields), threshold tuning playbook, common failure modes, decision trees, and ownership map all documented. Two commits on main (744671aa, f2889bba).","dependencies":[{"issue_id":"StockScreenClaude-umr.8.4","depends_on_id":"StockScreenClaude-umr.8","type":"parent-child","created_at":"2026-02-19T18:12:24.557543+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.8.4","depends_on_id":"StockScreenClaude-umr.8.1","type":"blocks","created_at":"2026-02-19T18:12:35.532872+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-umr.8.4","depends_on_id":"StockScreenClaude-umr.8.2","type":"blocks","created_at":"2026-02-19T18:12:35.971761+08:00","created_by":"David Ten"}],"comments":[{"id":70,"issue_id":"StockScreenClaude-umr.8.4","author":"David Ten","text":"Runbook must include:\n- Field dictionary (formula, units, interpretation, edge cases)\n- Threshold tuning playbook (what to adjust, expected side-effects)\n- Common failure modes (missing benchmark, sparse history, outlier volume)\n- Operational troubleshooting for detector timeouts and backfill anomalies\n- Ownership/escalation map for scanner/query/frontend issues\n\nThis document is the primary handoff artifact for future maintainers.\n","created_at":"2026-02-19T10:13:34Z"}]}
{"id":"StockScreenClaude-vkg","title":"T3: Integration tests — repository implementations with SQLite","description":"## What\nWrite integration tests that verify SQLAlchemy repository implementations against a real SQLite database.\n\n## Files to Create\n- backend/tests/integration/test_scan_repo_sqlalchemy.py\n- backend/tests/integration/test_feature_store_repo_sqlalchemy.py\n- backend/tests/integration/conftest.py — Shared fixtures:\n  - in-memory SQLite engine\n  - create_all tables\n  - session factory\n  - cleanup between tests\n\n## Test Cases for ScanRepository\n- CRUD operations: create, get, update_status\n- Idempotency key: duplicate create returns existing\n- Status transitions: pending → running → completed/failed\n\n## Test Cases for FeatureStoreRepository\n- upsert_snapshot_rows: bulk insert and update\n- query_latest: returns rows from latest published run\n- query_run: returns rows from specific run\n- Atomic publish: verify status + pointer update in one transaction\n- FilterSpec translation: common filter/sort combinations\n\n## Key Verification\n- Atomic publish: simulate crash between status update and pointer update → verify no partial state\n- Query performance: no N+1 queries (check query count)\n\n## Acceptance Criteria\n- All repository methods tested against real SQLite\n- Atomic publish verified\n- Tests clean up after themselves (no cross-test contamination)\n- Tests run in \u003c10 seconds\n\n## Depends On\n- E3 (Feature Store repos must exist)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:05:52.621416+08:00","created_by":"David Ten","updated_at":"2026-02-18T09:39:57.603888+08:00","closed_at":"2026-02-18T09:39:57.603888+08:00","close_reason":"55 tests passing: 12 scan_repo, 27 feature_store_repo, 16 feature_run_repo, 2 UoW — all against real SQLite","dependencies":[{"issue_id":"StockScreenClaude-vkg","depends_on_id":"StockScreenClaude-rwf","type":"blocks","created_at":"2026-02-17T00:08:12.373204+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-wms","title":"EPIC-C: Thin Celery — RunBulkScanUseCase + Thin Task Wrapper","description":"Move all scan business logic out of Celery tasks into RunBulkScanUseCase. The Celery task becomes a thin wrapper that opens a UoW, calls the use case, and reports status. After this epic, task files contain zero business rules. Supports cancellation, checkpointing, and idempotent retries. Corresponds to Phase C of the v3 architecture plan.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-16T23:58:54.38017+08:00","created_by":"David Ten","updated_at":"2026-02-17T17:45:57.374455+08:00","closed_at":"2026-02-17T17:45:57.374455+08:00","close_reason":"Both tasks (C1-C2) completed: RunBulkScanUseCase with progress/cancellation/checkpointing, Celery task rewritten as thin strangler wrapper","dependencies":[{"issue_id":"StockScreenClaude-wms","depends_on_id":"StockScreenClaude-5pd","type":"blocks","created_at":"2026-02-17T17:45:50.948855+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-wms","depends_on_id":"StockScreenClaude-4g6","type":"blocks","created_at":"2026-02-17T17:45:51.16869+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-xph","title":"EPIC-B: Domain Extraction — Pure Scoring, Domain Types, Port-Based Orchestrator","description":"Extract pure business logic from ScanOrchestrator into the domain layer. This includes composite scoring policies, rating calculation, domain types (ScanConfig, ScreenerOutput), and refactoring the orchestrator to depend on ports (Protocols) rather than concrete IO services. After this epic, all scoring/rating logic is unit-testable without DB or network. Corresponds to Phase B of the v3 architecture plan.","status":"closed","priority":1,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-16T23:58:35.625877+08:00","created_by":"David Ten","updated_at":"2026-02-17T17:41:44.249146+08:00","closed_at":"2026-02-17T17:41:44.249146+08:00","close_reason":"All 3 tasks (B1-B3) completed: scoring policies extracted, domain types defined, orchestrator refactored to ports","dependencies":[{"issue_id":"StockScreenClaude-xph","depends_on_id":"StockScreenClaude-3z0","type":"blocks","created_at":"2026-02-17T17:41:39.272418+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-xph","depends_on_id":"StockScreenClaude-74o","type":"blocks","created_at":"2026-02-17T17:41:39.595074+08:00","created_by":"David Ten"},{"issue_id":"StockScreenClaude-xph","depends_on_id":"StockScreenClaude-7yl","type":"blocks","created_at":"2026-02-17T17:41:39.928824+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-y5c","title":"Fix rate limit constant in warm_all_caches()","description":"cache_manager.py line 221 uses scan_rate_limit (1.0s) instead of yfinance_batch_rate_limit_interval (5.0s)","status":"closed","priority":1,"issue_type":"bug","owner":"davidten7@gmail.com","created_at":"2026-02-19T08:11:44.99013+08:00","created_by":"David Ten","updated_at":"2026-02-19T08:12:09.721103+08:00","closed_at":"2026-02-19T08:12:09.721103+08:00","close_reason":"Fixed scan_rate_limit -\u003e yfinance_batch_rate_limit_interval in warm_all_caches()"}
{"id":"StockScreenClaude-yfz","title":"T17: Update existing scan tests for universe changes","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:49:45.931233+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:24.266684+08:00","closed_at":"2026-02-16T14:58:24.266684+08:00","close_reason":"Implemented in universe unification session","dependencies":[{"issue_id":"StockScreenClaude-yfz","depends_on_id":"StockScreenClaude-bkd","type":"blocks","created_at":"2026-02-16T14:50:51.393973+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-ykj","title":"EPIC-T: Testing — Domain, Use Case, Integration, Parity, Performance Tests","description":"Comprehensive testing strategy for the refactored architecture. Includes domain unit tests (composite/rating), use case tests with fake repos, integration tests with DB, golden scan parity tests (legacy vs feature store), provider contract tests, and query performance guardrails. Corresponds to Section 7 of the v3 architecture plan.","status":"closed","priority":2,"issue_type":"epic","owner":"davidten7@gmail.com","created_at":"2026-02-16T23:59:09.260593+08:00","created_by":"David Ten","updated_at":"2026-02-19T12:05:34.245278+08:00","closed_at":"2026-02-19T12:05:34.245278+08:00","close_reason":"All 5 testing categories implemented: 429 tests passing (domain units, use case fakes, integration, golden parity, performance guardrails)"}
{"id":"StockScreenClaude-yt7","title":"D5: Create ExportScanResultsUseCase","description":"## What\nExtract scan results CSV/Excel export into a use case.\n\n## Current State\nThe export endpoint in scans.py queries results, formats them, and returns a downloadable file.\n\n## Files to Create\n- backend/app/use_cases/scanning/export_scan_results.py — ExportScanResultsUseCase\n  - Input: scan_id, FilterSpec, SortSpec, export_format (csv/xlsx)\n  - Output: bytes (file content) + filename\n  - Uses ScanResultRepository port + domain formatting logic\n\n## Acceptance Criteria\n- Produces identical export files as current endpoint\n- Router is thin wrapper (streams response)\n- Supports same filter/sort options as GetScanResults\n\n## Depends On\n- D1 (establishes query and repository patterns)","status":"closed","priority":2,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-17T00:02:51.953914+08:00","created_by":"David Ten","updated_at":"2026-02-17T14:37:05.774925+08:00","closed_at":"2026-02-17T14:37:05.774925+08:00","close_reason":"Fully implemented and verified: use case, router, DI wiring, 30 unit tests all passing. Commits c903d9db (implementation) and d21cea75 (bug fix) cover the full scope.","dependencies":[{"issue_id":"StockScreenClaude-yt7","depends_on_id":"StockScreenClaude-iai","type":"blocks","created_at":"2026-02-17T00:08:10.910396+08:00","created_by":"David Ten"}]}
{"id":"StockScreenClaude-z91","title":"T3: Create UniverseResolver service","status":"closed","priority":1,"issue_type":"task","owner":"davidten7@gmail.com","created_at":"2026-02-16T14:48:57.456743+08:00","created_by":"David Ten","updated_at":"2026-02-16T14:58:23.671277+08:00","closed_at":"2026-02-16T14:58:23.671277+08:00","close_reason":"Implemented in universe unification session","dependencies":[{"issue_id":"StockScreenClaude-z91","depends_on_id":"StockScreenClaude-eeh","type":"blocks","created_at":"2026-02-16T14:49:56.973957+08:00","created_by":"David Ten"}]}
